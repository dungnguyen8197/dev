(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fb81e4d"],{"14e3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation_booking"},[e("el-row",{staticClass:"app-container list-account"},[e("el-row",{staticClass:"list-account__header"},[e("el-col",{attrs:{sm:24}},[e("h3",{staticClass:"title"},[t._v("Doanh thu theo hợp đồng")])])],1),e("div",{staticClass:"filter-container mt-10"},[e("el-row",[e("el-col",{staticClass:"mr-10 pb-10",attrs:{sm:24,md:4,lg:4}},[e("el-select",{ref:"searchContract",staticClass:"w-100",attrs:{clearable:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm theo tên hợp đồng","remote-method":t.onSearchContract,loading:t.loadingSearchContract},on:{"hook:mounted":function(e){return t.cancelReadOnly(e,"searchContract")},"visible-change":function(e){return t.cancelReadOnly(e,"searchContract")}},model:{value:t.query.contract_name,callback:function(e){t.$set(t.query,"contract_name",e)},expression:"query.contract_name"}},t._l(t.Contracts,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})})),1)],1),e("el-col",{staticClass:"mr-10 pb-10",attrs:{sm:24,md:4,lg:4}},[e("el-select",{ref:"searchFacility",staticClass:"w-100",attrs:{clearable:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm theo sân","remote-method":t.onSearchFacility,loading:t.loadingSearchFacility},on:{"hook:mounted":function(e){return t.cancelReadOnly(e,"searchFacility")},"visible-change":function(e){return t.cancelReadOnly(e,"searchFacility")}},model:{value:t.query.facility_id,callback:function(e){t.$set(t.query,"facility_id",e)},expression:"query.facility_id"}},t._l(t.Facilities,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-col",{staticClass:"mr-10 pb-10",attrs:{sm:24,md:4,lg:6}},[e("el-date-picker",{staticClass:"date-rang-history",attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"đến","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("el-col",{attrs:{sm:24,md:4,lg:8}},[e("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" Tìm kiếm ")]),e("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh"},on:{click:t.onRefreshSearch}},[t._v("Refresh")]),e("el-button",{staticClass:"mr-10 filter-item",attrs:{type:"primary",icon:"el-icon-download",loading:t.loadingExportExcel},on:{click:t.handleExportExcel}},[t._v(" Xuất Excel ")])],1)],1)],1),e("el-row",{staticClass:"list-account__data"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{label:"STT",width:"50",align:"center",type:"index",index:t.handleIndexMethod}}),e("el-table-column",{attrs:{prop:"contract_code",label:"Mã hợp đồng",align:"center"}}),e("el-table-column",{attrs:{label:"Tên hợp đồng",align:"center",prop:"contract_name"}}),e("el-table-column",{attrs:{label:"Sân",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a["facility.sub_title"]?a["facility.sub_title"]:"")+" ")]}}])}),e("el-table-column",{attrs:{label:"Số lượng đơn",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.totalInsurance)+" ")]}}])}),e("el-table-column",{attrs:{label:"Tổng doanh thu",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-link",{staticStyle:{color:"#20a0ff"},attrs:{size:"mini"},on:{click:function(e){return t.onGetListInsurance(n)}}},[t._v(" "+t._s(t.formatNumber(n.totalMoney))+" ")])]}}])}),e("el-table-column",{attrs:{label:"Chiết khấu sân",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-row",[e("p",[t._v(t._s("".concat(t.formatNumber(n.moneyFacility),"đ")))]),e("p",{staticStyle:{color:"red"}},[t._v(t._s("".concat(n.facility_discount,"%")))])])]}}])}),e("el-table-column",{attrs:{label:"Chiết khấu lobby",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-row",[e("p",[t._v(t._s(n.lobby_name))]),e("p",[t._v(t._s("".concat(t.formatNumber(n.moneyLobby),"đ")))]),e("p",{staticStyle:{color:"red"}},[t._v(t._s("".concat(n.lobby_discount,"%")))])])]}}])}),e("el-table-column",{attrs:{label:"PVI",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-row",[e("p",[t._v(t._s("".concat(t.formatNumber(n.moneyPVI),"đ")))]),e("p",{staticStyle:{color:"red"}},[t._v(t._s("".concat(n.PVI_discount,"%")))])])]}}])}),e("el-table-column",{attrs:{label:"WGHN",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-row",[e("p",[t._v(t._s("".concat(t.formatNumber(n.moneyWGHN),"đ")))]),e("p",{staticStyle:{color:"red"}},[t._v(t._s("".concat(n.WGHN_discount,"%")))])])]}}])}),e("el-table-column",{attrs:{label:"Chi nhánh",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-row",[e("p",[t._v(t._s(1===n.branch_id?"Central":"Southern"))]),e("p",[t._v(t._s("".concat(t.formatNumber(n.moneyBranch),"đ")))]),e("p",{staticStyle:{color:"red"}},[t._v(t._s("".concat(n.branch_discount,"%")))])])]}}])}),e("el-table-column",{attrs:{label:"Booking",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("p",[t._v(t._s("".concat(t.formatNumber(n.moneyBooking),"đ")))]),e("p",{staticStyle:{color:"red"}},[t._v(t._s("".concat(n.booking_discount,"%")))])]}}])})],1),e("el-row",{staticClass:"list-shop__footer"},[e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>t.query.limit,expression:"total > query.limit"}],attrs:{total:t.total,limit:t.query.limit,page:t.query.page},on:{"update:limit":function(e){return t.$set(t.query,"limit",e)},"update:page":function(e){return t.$set(t.query,"page",e)},pagination:t.onGetList}})],1),e("dialog-add-contract",{attrs:{"show-dialog":t.showDialogAddContract,"object-data":t.objectData,"is-add":t.isAdd},on:{onCloseDialog:t.handleClose}}),e("dialog-list-insurance",{attrs:{"object-query":t.query,"show-dialog":t.showTotalInsurance,"object-total-insurance":t.objectTotalInsurance},on:{onClickButtonTotalInsurance:t.onClickButtonTotalInsurance}})],1)],1)],1)},o=[],r=(a("99af"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("9861"),a("88a7"),a("271a"),a("5494"),a("d81d"),a("333d")),l=a("bcc2"),i=a("8c04"),c=a("ed15"),s=a("9a76"),u=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"detail-custom",attrs:{visible:t.showDialog,"before-close":t.handleClose,width:"80%"},on:{"update:visible":function(e){t.showDialog=e}}},[e("h3",[t._v("Danh sách đơn bảo hiểm S100 sân "+t._s(t.objectTotalInsurance["facility.sub_title"])+" ")]),e("el-button",{staticClass:"mr-10 filter-item",attrs:{type:"primary",icon:"el-icon-download",loading:t.loadingExportExcel},on:{click:t.handleExportExcel}},[t._v(" Xuất Excel ")]),e("el-row",{staticClass:"table-history"},[e("el-col",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{type:"index",index:t.handleIndexMethod,label:"STT",width:"50"}}),e("el-table-column",{attrs:{label:"Mã BH"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("BH".concat(e.row.id))+" ")]}}])}),e("el-table-column",{attrs:{label:"Nguồn tạo"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[7===n.source_buy?e("span",[t._v(" hio.wghn.net ")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"hole_select",label:"Tên hố"}}),e("el-table-column",{attrs:{label:"Mã vID/Passport"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",[t._v(" "+t._s("vID".concat(a.row.user_id)))])]}}])}),e("el-table-column",{attrs:{label:"Giá mua"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row?"".concat(t.formatNumber(e.row.total_pay)," VNĐ"):"")+" ")]}}])}),e("el-table-column",{attrs:{label:"Số người chơi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.total_member?e.row.total_member:"")+" ")]}}])}),e("el-table-column",{attrs:{label:"Giờ chơi"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.convertDateTime(a.date_played))+" ")]}}])}),e("el-table-column",{attrs:{label:"Trạng thái đơn"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[3===n.status?e("div",[e("el-tag",{attrs:{type:"danger"}},[t._v(" Không có hiệu lực ")]),0===n.is_customer_pay?e("el-tag",{attrs:{type:"danger"}},[t._v(" Chưa thanh toán ")]):t._e(),1===n.is_customer_pay?e("el-tag",{attrs:{type:"success"}},[t._v(" Đã thanh toán ")]):t._e(),1===n.is_send_pvi?e("el-tag",{attrs:{type:"success"}},[t._v(" Đã gửi đơn qua PVI ")]):t._e(),2===n.is_send_pvi?e("el-tag",{attrs:{type:"primary"}},[t._v(" Đã đẩy vào hàng chờ ")]):t._e(),0===n.is_send_pvi?e("el-tag",{attrs:{type:"warning"}},[t._v(" Chưa gửi thông tin ")]):t._e()],1):t._e(),1===n.status?e("div",[e("el-tag",{attrs:{type:"success"}},[t._v(" Có hiệu lực ")])],1):t._e()]}}])})],1),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>t.listQuery.limit,expression:"total > listQuery.limit"}],attrs:{total:t.total,limit:t.listQuery.limit,page:t.listQuery.page},on:{"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},"update:page":function(e){return t.$set(t.listQuery,"page",e)},pagination:t.onGetListInsurances}})],1)],1)],1)},d=[],h=a("974c"),f=a("8ffd"),g=new i["a"],m={name:"DialogListInsurance",components:{Pagination:r["a"]},props:{objectTotalInsurance:{type:Object,default:function(){return{}}},showDialog:{type:Boolean,default:!1},objectQuery:{type:Object,default:function(){return{}}}},data:function(){return{detail:{},loading:!1,listQuery:{page:1,limit:10},loadingUpdateVerify:!1,tableData:[],total:0,loadingExportExcel:!1}},watch:{objectTotalInsurance:function(t){t&&this.onGetListInsurances(t.id)}},methods:{handleExportExcel:function(){var t=this,e={facility_id:this.objectTotalInsurance.facility_id,date_start:this.objectQuery.date_start,date_end:this.objectQuery.date_end};this.loadingExportExcel=!0,g.exportListInsuranceDialog(e).then((function(a){var n=document.createElement("a"),o=e.toString();n.href="".concat(f["a"],"insurance-hio/export-list-insurance-dialog?").concat(o),n.setAttribute("download","proposed_file_name"),document.body.appendChild(n),n.click(),t.$message({message:"Export thành công",type:"success",duration:5e3})})).finally((function(){t.loadingExportExcel=!1}))},convertDateTime:l["b"],onGetListInsurances:function(){var t=this,e={facility_id:this.objectTotalInsurance.facility_id,limit:this.listQuery.limit,page:this.listQuery.page,date_start:this.objectQuery.date_start,date_end:this.objectQuery.date_end};this.loadingTable=!0,g.listInsuranceDialog(e).then((function(e){var a,n;0===e.error_code?(t.tableData=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)||[],t.total=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.total)||0):t.$message.error(e.error_msg)})).finally((function(){t.loadingTable=!1}))},handleClose:function(){this.$emit("onClickButtonTotalInsurance",{dialog:!1,reload:!1})},handleIndexMethod:function(t){return 1===this.listQuery.page?this.listQuery.page+t:10*this.listQuery.page+t},formatNumber:l["k"],convertIsPayToString:h["a"],convertSourceBuyToString:h["c"],convertIsSendPviToString:h["b"],convertSourcePayToString:h["d"]}},_=m,p=(a("6bf4"),a("2877")),b=Object(p["a"])(_,u,d,!1,null,null,null),y=b.exports,v=new i["a"],w=new s["a"],C=[{value:0,label:"Hết hiệu lực"},{value:1,label:"Còn hiệu lực"}],S={name:"List",components:{DialogListInsurance:y,DialogAddContract:c["a"],Pagination:r["a"]},data:function(){return{arrayStatus:[].concat(C),tableData:[],loadingTable:!1,total:0,isAdd:!0,onShowDialog:!1,query:{limit:10,page:1},loadingData:!0,from:0,showDialogAddContract:!1,loadingSearchContract:!1,objectData:{},objectDataListMember:{},dateRange:"",Contracts:[],showDialogListMember:!1,ContractCodes:[],Facilities:[],loadingSearchContractCode:!1,loadingSearchFacility:!1,showTotalInsurance:!1,objectTotalInsurance:{},loadingExportExcel:!1}},watch:{dateRange:function(t){t?(this.query.date_start=this.convertDate(t[0],"YYYY-MM-DD"),this.query.date_end=this.convertDate(t[1],"YYYY-MM-DD")):(this.query.date_start="",this.query.date_end="")}},created:function(){this.onGetList()},methods:{handleExportExcel:function(){var t=this;this.loadingExportExcel=!0,v.exportRevenueContract(this.query).then((function(e){var a=document.createElement("a"),n=new URLSearchParams(t.query).toString();a.href="".concat(f["a"],"insurance-hio/export-revenue-contract?").concat(n),a.setAttribute("download","proposed_file_name"),document.body.appendChild(a),a.click(),t.$message({message:"Export thành công",type:"success",duration:5e3})})).finally((function(){t.loadingExportExcel=!1}))},onGetListInsurance:function(t){console.log("qưeqưeqưewqeqưe",t),this.objectTotalInsurance=t,this.showTotalInsurance=!0},onClickButtonTotalInsurance:function(t){var e=t.dialog,a=t.reload;this.showTotalInsurance=e,a&&this.onGetList()},convertDate:l["a"],onRefreshSearch:function(){this.query=Object.assign({},{limit:10,page:1}),this.dateRange="",this.onGetList()},convertDateTime:l["b"],onGetList:function(){var t=this;this.loadingTable=!0,v.revenueContract(this.query).then((function(e){var a,n;0===e.error_code?(t.tableData=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)||[],t.total=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.total)||0):t.$message.error(e.error_msg)})).finally((function(){t.loadingTable=!1}))},handleFilter:function(){this.query.page=1,this.onGetList()},handleIndexMethod:function(t){return 1===this.query.page?this.query.page+t:10*this.query.page+t},handleClose:function(t){this.showDialogAddContract=t.dialog,t.reload&&(this.query=Object.assign({},{limit:10,page:1}),this.onGetList())},onSearchContract:function(t){var e=this;this.loadingSearchContract=!0,v.searchContract({keyword_contract:t}).then((function(t){var a=t.data;0===t.error_code?a.length>0?e.Contracts=a.map((function(t){return{value:t.id,label:t.contract_name}})):e.Contracts=[]:e.$message.error(t.error_msg)})).finally((function(){e.loadingSearchContract=!1}))},onSearchContractCode:function(t){var e=this;this.loadingSearchContract=!0,v.searchContractCode({keyword_contractCode:t}).then((function(t){var a=t.data;0===t.error_code?a.length>0?e.ContractCodes=a.map((function(t){return{value:t.id,label:t.contract_code}})):e.ContractCodes=[]:e.$message.error(t.error_msg)})).finally((function(){e.loadingSearchContract=!1}))},onSearchFacility:function(t){var e=this;this.loadingSearchFacility=!0,w.listFacility({title:t}).then((function(t){var a=t.data;0===t.error_code?a.length>0?e.Facilities=a.map((function(t){return{value:t.id,label:t.sub_title}})):e.Facilities=[]:e.$message.error(t.error_msg)})).finally((function(){e.loadingSearchFacility=!1}))},changeStatus:function(t){var e=this,a={status:t.status};this.$confirm("Bạn có chắc chắn muốn đổi trạng thái").then((function(n){v.updateStatusContract(a,t.id).then((function(t){0===t.error_code?e.$message.success(t.error_msg):e.$message.error(t.error_msg)}))}))},cancelReadOnly:function(t,e){var a=this;this.$nextTick((function(){if(!t){var n=a.$refs[e],o=n.$el.querySelector(".el-input__inner");o.removeAttribute("readonly")}}))},convertLink:function(t){return t},formatDate:l["j"],formatNumber:l["k"]}},k=S,x=(a("d5b1"),Object(p["a"])(k,n,o,!1,null,"1299b658",null));e["default"]=x.exports},4771:function(t,e,a){},5573:function(t,e,a){},"6bf4":function(t,e,a){"use strict";a("4771")},"8ffd":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n="https://prod-wap-wghn-beta.vcallid.com/"},"974c":function(t,e,a){"use strict";function n(t){switch(t){case 0:return"Chưa xác nhận gửi PVI";case 1:return"Đã xác nhận gửi PVI";default:return"Không xác định"}}function o(t){switch(t){case 1:return{className:"success",text:"Đã gửi đơn qua PVI"};case 2:return{className:"primary",text:"Đã đẩy vào hàng chờ"};default:return{className:"warning",text:"Chưa gửi thông tin"}}}function r(t){switch(t){case 2:return"CMS SPORT";case 3:return"CMS BOOKING";case 4:return"AGENT";case 6:return"ZALO";default:return"APP WGHN"}}function l(t){switch(t){case 1:return"CMS ";case 2:return"Chuyển khoản";default:return""}}a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return l}))},d5b1:function(t,e,a){"use strict";a("5573")}}]);