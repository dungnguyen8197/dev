(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1e556d4"],{"3bdd":function(t,e,i){"use strict";i("cc90")},"6c6e":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var s=i("d4ec"),a=i("bee2"),n=i("b775"),o=function(){function t(e){Object(s["a"])(this,t),this.uri=e}return Object(a["a"])(t,[{key:"list",value:function(t){return Object(n["a"])({url:"/"+this.uri,method:"get",params:t})}},{key:"get",value:function(t){return Object(n["a"])({url:"/"+this.uri+"/"+t,method:"get"})}},{key:"store",value:function(t){return Object(n["a"])({url:"/"+this.uri,method:"post",data:t})}},{key:"update",value:function(t,e){return Object(n["a"])({url:"/"+this.uri+"/"+t,method:"put",data:e})}},{key:"destroy",value:function(t){return Object(n["a"])({url:"/"+this.uri+"/"+t,method:"delete"})}}]),t}()},"7db0":function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").find,n=i("44d2"),o="find",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),s({target:"Array",proto:!0,forced:r},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},"7f81":function(t,e,i){"use strict";i("dd5e")},"8024e":function(t,e,i){"use strict";i("abf5")},"890d":function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var s=i("d4ec"),a=i("bee2"),n=i("262e"),o=i("2caf"),r=(i("99af"),i("6c6e")),l=i("a27e"),c=i("5f87"),d=Object(c["a"])(),h="https://shop.vcallid.com/api/public",p=1,u=function(t){Object(n["a"])(i,t);var e=Object(o["a"])(i);function i(){return Object(s["a"])(this,i),e.call(this,"")}return Object(a["a"])(i,[{key:"getVerify",value:function(){return d&&d.id?"uid=".concat(d.id,"&cms=").concat(p):"cms=".concat(p)}},{key:"listMenu",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{email:"demo@gmail.com",name:"demo"};return Object(l["a"])({baseURL:"https://shop.vcallid.com/api/public",url:"".concat(this.uri,"/supplier/list_supplier_menu_item"),method:"post",data:t})}},{key:"listBrand",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:10};return Object(l["a"])({baseURL:"https://shop.vcallid.com/api/public",url:"".concat(this.uri,"/trademark/list"),method:"get",params:t})}},{key:"ListSupplier",value:function(t){return Object(l["a"])({url:h+"/shop/list",method:"get",params:t})}},{key:"uploadImage",value:function(t){return Object(l["a"])({url:h+"/post_cdn",method:"post",data:t})}},{key:"addBrand",value:function(t){return Object(l["a"])({url:h+"/trademark/create",method:"post",data:t})}},{key:"editBrand",value:function(t){return Object(l["a"])({url:h+"/trademark/update",method:"post",data:t})}},{key:"getProvinceList",value:function(){return Object(l["a"])({url:h+"/address_ship/viettel_list_province_or_city",method:"get"})}},{key:"getWardsList",value:function(t){return Object(l["a"])({url:h+"/address_ship/viettel_list_wards",method:"get",params:t})}},{key:"getDistrictList",value:function(t){return Object(l["a"])({url:h+"/address_ship/viettel_list_district",method:"get",params:t})}},{key:"get_bussiness_type",value:function(){return Object(l["a"])({url:h+"/supplier/get_bussiness_type",method:"get"})}},{key:"create_general_supplier",value:function(t){return Object(l["a"])({url:h+"/supplier/create_general_supplier",method:"post",data:t})}},{key:"get_supplier_info",value:function(t){return Object(l["a"])({url:h+"/get_supplier_info?id=".concat(t),method:"get"})}},{key:"upload_discount",value:function(t){return Object(l["a"])({url:h+"/supplier/upload_discount",method:"post",data:t})}},{key:"detele_discount",value:function(t){return Object(l["a"])({url:h+"/supplier/detele_discount",method:"post",data:t})}},{key:"list_contract_active",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(l["a"])({url:h+"/supplier/list_contract_active?shop_id=".concat(t),method:"get"})}},{key:"add_new_bank_account",value:function(t){return Object(l["a"])({url:h+"/add_new_bank_account",method:"post",data:t})}},{key:"list_signer",value:function(){return Object(l["a"])({url:h+"/supplier/list_signer",method:"get"})}},{key:"update_contract",value:function(t){return Object(l["a"])({url:h+"/supplier/update_contract",method:"post",data:t})}},{key:"create_new_exeprt",value:function(t){return Object(l["a"])({url:h+"create_new_exeprt",method:"post",data:t})}},{key:"delete_exeprt",value:function(t){return Object(l["a"])({url:h+"/delete_exeprt",method:"post",data:t})}},{key:"list_categories",value:function(){return Object(l["a"])({url:h+"/supplier/list_categories",method:"get"})}},{key:"deleteShop",value:function(t){return Object(l["a"])({url:h+"/shop/delete/".concat(t),method:"get"})}},{key:"detail",value:function(t){return Object(l["a"])({url:h+"/supplier/detail_supplier?id=".concat(t),method:"get"})}},{key:"get_person_contact",value:function(t){return Object(l["a"])({url:h+"/supplier/get_person_contact?shop_id=".concat(t),method:"get"})}},{key:"get_person_representative",value:function(t){return Object(l["a"])({url:h+"/supplier/get_person_representative?id=".concat(t),method:"get"})}},{key:"update_supplier_info",value:function(t){return Object(l["a"])({url:h+"/supplier/update_supplier_info",method:"post",data:t})}},{key:"create_person_representative",value:function(t){return Object(l["a"])({url:h+"/supplier/create_person_representative",method:"post",data:t})}},{key:"update_representative_person",value:function(t){return Object(l["a"])({url:h+"/supplier/update_representative_person",method:"post",data:t})}},{key:"create_person_contact",value:function(t){return Object(l["a"])({url:h+"/supplier/create_person_contact",method:"post",data:t})}},{key:"update_contact_person",value:function(t){return Object(l["a"])({url:h+"/supplier/update_contact_person",method:"post",data:t})}},{key:"create_pickup_address",value:function(t){return Object(l["a"])({url:h+"/supplier/create_pickup_address",method:"post",data:t})}},{key:"update_pickup_address",value:function(t){return Object(l["a"])({url:h+"/supplier/update_pickup_address",method:"post",data:t})}},{key:"approve_contract",value:function(t){return Object(l["a"])({url:h+"/supplier/approve_contract",method:"post",data:t})}},{key:"reject_contract",value:function(t){return Object(l["a"])({url:h+"/supplier/reject_contract",method:"post",data:t})}},{key:"create_contract",value:function(t){return Object(l["a"])({url:h+"/supplier/create_contract",method:"post",data:t})}},{key:"detail_contract",value:function(t){return Object(l["a"])({url:h+"/supplier/detail_contract?id=".concat(t),method:"get"})}},{key:"contract_change_state",value:function(t){return Object(l["a"])({url:h+"/supplier/contract_change_state",method:"post",data:t})}},{key:"delete_contract",value:function(t){return Object(l["a"])({url:h+"/supplier/delete_contract",method:"post",data:t})}},{key:"listCategory",value:function(t){return Object(l["a"])({url:"".concat(h,"/category/list_cms_2?").concat(this.getVerify()),method:"get",params:t})}},{key:"storeCategory",value:function(t){return Object(l["a"])({url:"".concat(h,"/category/create?").concat(this.getVerify()),method:"post",data:t})}},{key:"updateCategory",value:function(t){return Object(l["a"])({url:"".concat(h,"/category/update?").concat(this.getVerify()),method:"post",data:t})}},{key:"deleteCategory",value:function(t){return Object(l["a"])({url:"".concat(h,"/category/delete/").concat(t,"?").concat(this.getVerify()),method:"get"})}},{key:"storeProductCategory",value:function(t){return Object(l["a"])({url:"".concat(h,"/category/add_list_product?").concat(this.getVerify()),method:"post",data:t})}}]),i}(r["a"])},"8ba0":function(t,e,i){},9049:function(t,e,i){"use strict";i("b710")},a27e:function(t,e,i){"use strict";var s=i("c7eb"),a=i("1da1"),n=(i("d3b7"),i("bc3a")),o=i.n(n),r=i("5c96"),l=i("4360"),c=i("5f87"),d="https://prod-wap-wghn-beta.vcallid.com",h=o.a.create({baseURL:d,headers:{Authorization:Object(c["f"])(),auththor:Object(c["d"])(),"X-Token":Object(c["d"])(),"Access-Control-Allow-Origin":"*"},timeout:18e4});h.interceptors.request.use((function(t){t.headers.Authorization=Object(c["f"])(),t.headers["X-Token"]=Object(c["d"])();var e="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaWF0IjoxNjc4MzMzNDY4fQ.d5WWQAGWF_TCPkvWa0ieclauQAlLierkNKGDCDfbDk5Cd-X98bLV7usneU2jXEu_cqjbJFerDRCky255aLElQLpxHmn_66tcgbTZqa5GRumTDqO4JOmgWd5vE0zRPx3xdfFPG0fILPEAA2_5bIGc4Mzd_FHMr9hqTKOn4TKxgBsCW0z9KNfO-2xevEP_gFi7xauUkdG5KUbG3UAr4sEr1s9Kfhz7H5F_lyIR99TfqV-45E4x4Av0tao2nxt5Nc16z201zjpd9OaHibpIGI1pcCkwORYQpH5pqoanO9alsYkNwyEPZbMCfenY95pD16GTswQwNlCGVmGHnSkkXF1SkBV4_rWt-J6fX1VGjq61nqr6yGm_JXvK3R_DMUN5GIZ_xC4BE6WOZQcF1SseMJalbBJKdFlRz0DpW4rsblr5Ge7KVI4ugPQFRV5PaEL6y_wx65-K8DyFYWwbFVG_YZJqzt7mVgSVZftx1yTaSYoUoAeD8FJ-zVPupv93ZM3y7Q3ybwvwZBj6KI-R9VuXlsLFWAqt7bWcUMXExhDeENGWMbgwF3YdJzG947_KzSkRsEsXK7ZOUKp7ihE3wLxQIueIyITQfmgvuG-AvtDqiffFfjbTP5e8DOLvloP2keIS1v252nZyr3i9pEBqm10KEmCx0krhQHjz5sdJStIenVtKospeB8tBjSbyCW5t0-RRo8vQOg40Jn-ySKnnBGW_jYMTy3hadbAxAQc4IprphQmvuFuVaO4YK4wNB_dEtbzAYSLpfm9vTk9eX0f95tleguH6QjEG8siA4znsMUf2SLdQNKcTniOEHp5hGcKV0gRX63zIC7X9dClOINwg3wYh6ecyXg";return t.headers.token=e,l["a"].getters.token,t}),(function(t){return Promise.reject(t)})),h.interceptors.response.use(function(){var t=Object(a["a"])(Object(s["a"])().mark((function t(e){var i,a,n,l;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.data,0===i.error_code){t.next=26;break}if(console.log(i.error_code),403!==i.error_code){t.next=6;break}return r["Message"].error(i.error_msg||"Có lỗi xảy ra vui lòng thử lại sau"),t.abrupt("return");case 6:if(498!==i.error_code){t.next=9;break}return p(),t.abrupt("return");case 9:if(401!==i.error_code){t.next=23;break}return a=Object(c["d"])(),t.next=13,h.post("/admin/token",{refresh_token:a});case 13:if(n=t.sent,0!==n.error_code){t.next=22;break}return l=e.config,l._retry=!0,o.a.defaults.headers.common["Authorization"]="Bearer "+n.data.token,Object(c["q"])(n.data.token),t.abrupt("return",h(l));case 22:p();case 23:return t.abrupt("return",i);case 26:return t.abrupt("return",i);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return r["Message"].error(t.message||"Có lỗi xảy ra vui lòng thử lại sau"),Promise.reject(t)}));var p=function(){r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){return l["a"].dispatch("user/resetToken").then((function(){return location.reload()}))}))};e["a"]=h},abf5:function(t,e,i){},b710:function(t,e,i){},b863:function(t,e,i){"use strict";i("8ba0")},b9173:function(t,e,i){"use strict";i("c8ab")},c8ab:function(t,e,i){},cc90:function(t,e,i){},dd5e:function(t,e,i){},f683:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"template"},[e("el-row",{staticClass:"app-container list-shop",attrs:{loading:t.loadingTable}},[e("el-row",{staticClass:"list-shop__header"},[e("el-col",{attrs:{sm:12}},[e("el-row",{staticStyle:{display:"ruby"}},[e("p",{staticStyle:{"margin-right":"15px"},on:{click:t.onBack}},[e("i",{staticClass:"el-icon-back"})]),e("h3",{staticStyle:{"font-size":"26px",display:"inherit"}},[t._v(t._s("Thông tin nhà cung cấp"))])])],1),e("el-col",{staticStyle:{"justify-content":"flex-end",display:"flex","align-items":"center"},attrs:{sm:12}},[t.is_write&&!t.isNew?e("el-button",{attrs:{type:"primary"},on:{click:t.onStatisticalPress}},[t._v(t._s("supplier_statistical"))]):t._e()],1)],1),e("supplier-info-vue",{ref:"refSupplierInfo",attrs:{stt:"I","shop-id":t.shopId,"is-new":t.isNew}}),t.isNew?t._e():e("contract-info",{ref:"refContractInfo",attrs:{stt:"II","shop-id":t.shopId,"is-new":t.isNew}}),e("person-representative",{ref:"refRepresnetative",attrs:{show:t.show,"list-provinces":t.provinces,"shop-id":t.shopId,"is-new":t.isNew}}),e("person-contact-vue",{ref:"refContact",attrs:{show:t.show,"list-provinces":t.provinces,"shop-id":t.shopId,"is-new":t.isNew}}),e("pickup-address",{ref:"refPickup",attrs:{data:t.shopDetail.pickup_address,show:t.show,"list-provinces":t.provinces,"shop-id":t.shopId,"is-new":t.isNew}}),e("el-row",{staticClass:"list-shop__data"}),t.isNew?e("el-row",{staticClass:"list-shop__header"},[e("el-col",{staticStyle:{"justify-content":"flex-end",display:"flex","align-items":"center"},attrs:{sm:24}},[e("el-button",{attrs:{type:"warning"},on:{click:t.onCancelPress}},[t._v(t._s("Hủy bỏ "))]),e("el-button",{attrs:{type:"primary"},on:{click:t.onConfirmPress}},[t._v(t._s("Xác Nhận"))])],1)],1):t._e()],1)],1)},a=[],n=(i("14d9"),i("ac1f"),i("00b4"),i("b64b"),i("e9c4"),i("890d")),o=i("5f87"),r=(i("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"id"},[e("el-row",{staticClass:"search-wrapper"},[e("el-row",{attrs:{sm:12}},[e("el-row",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{sm:24}},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:12}},[e("h5",[t._v(t._s(t.stt)+". "+t._s("Thông tin người liên hệ"))])]),e("el-col",{staticStyle:{"justify-content":"flex-end","margin-top":"25px",display:"flex","align-items":"center"},attrs:{sm:12}},[t.isNew?t._e():e("el-button",{staticStyle:{"margin-left":"10px","font-size":"16px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onCreatePress}},[t._v(t._s("Thêm mới"))]),!t.isNew&&t.is_load_data?e("el-button",{staticStyle:{"margin-left":"10px","font-size":"16px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onEditPress}},[t._v(t._s("Chỉnh sửa"))]):t._e()],1)],1)],1),e("el-row",{staticStyle:{display:"flex","justify-content":"right"}},[e("el-col",{attrs:{sm:19,md:24}},[e("div",{staticStyle:{display:"flex","justify-content":"right","flex-wrap":"wrap"}},[e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Họ và tên")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập họ tên"},model:{value:t.fullname,callback:function(e){t.fullname=e},expression:"fullname"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Số điện thoại")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập số điện thoại"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Email liên hệ"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Chức danh"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập chức danh"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Căn cước công dân"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập CCCD"},model:{value:t.passport,callback:function(e){t.passport=e},expression:"passport"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Giới tính"))]),e("el-select",{staticClass:"select-item-2",attrs:{disabled:t.disable},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}},t._l(t.list_sex,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Ngày bắt đầu"))]),e("div",{staticClass:"demo-date-picker"},[e("el-date-picker",{staticStyle:{width:"260px","margin-top":"10px"},attrs:{type:"date",format:"dd/MM/yyyy",placeholder:"Chọn ngày bắt đầu",disabled:t.disable},model:{value:t.date_start,callback:function(e){t.date_start=e},expression:"date_start"}})],1)])],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Tỉnh/Thành phố")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item-2",attrs:{filterable:"",remote:"",disabled:t.disable,"reserve-keyword":"",placeholder:"Chọn Tỉnh/Thành phố","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.provinceModel,callback:function(e){t.provinceModel=e},expression:"provinceModel"}},t._l(t.provinces_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Quận/huyện")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item-2",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Chọn Quận/huyện","remote-method":t.onSearchDistrict,loading:t.district_loading},on:{focus:t.districtFocus},model:{value:t.districtModel,callback:function(e){t.districtModel=e},expression:"districtModel"}},t._l(t.districts_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Phường/xã")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item-2",attrs:{filterable:"",disabled:t.disable,remote:"","reserve-keyword":"",placeholder:"Chọn Phường/xã","remote-method":t.onSearchWard,loading:t.ward_loading},on:{focus:t.wardFocus},model:{value:t.wardModel,callback:function(e){t.wardModel=e},expression:"wardModel"}},t._l(t.wards_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Địa chỉ cụ thể( Số nhà... )")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập địa chỉ cụ thể"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1)])])],1),(t.isCreate||t.isUpdate)&&t.shopId?e("el-row",{staticClass:"list-shop__header"},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:24}},[e("el-button",{attrs:{type:"warning"},on:{click:t.onCancelPress}},[t._v(t._s("Hủy bỏ"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.onConfirmPress}},[t._v(t._s("Xác nhận"))])],1)],1):t._e()],1)],1)}),l=[],c=i("2909"),d=(i("a9e3"),i("498a"),i("7db0"),i("d3b7"),i("4de4"),new n["a"]),h={name:"PersonContact",components:{},props:{show:{type:Boolean,default:!1},shopId:{type:Number,default:function(){return 0}},listProvinces:{type:Array,default:function(){return[]}},isNew:{type:Boolean,default:!1}},data:function(){var t=Object(o["a"])();return{is_delete:t.is_delete,is_write:t.is_write,is_edit:t.is_edit,data:[],contact_detail:"",loadingTable:!1,isCreate:!1,isUpdate:!1,onShowDialog:!1,fullname:"",email:"",phone:"",position:"",passport:"",sex:0,date_start:"",address:"",disable:!this.isNew,provinceModel:null,provinces:Object(c["a"])(this.listProvinces),provinces_search:Object(c["a"])(this.listProvinces),provice_loading:!1,districtModel:null,district_loading:!1,districts:[],districts_search:[],wardModel:null,wards:[],wards_search:[],ward_loading:!1,list_sex:[{id:0,name:"Nam"},{id:1,name:"Nữ"}],stt:this.isNew?"III":"IV",is_load_data:!1}},watch:{show:function(t){t&&this.requestDetailContact()},provinceModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.districts=[],this.districts_search=[],this.wards_search=[],this.districtModel="",this.wardModel="",this.requestDistricts())},districtModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.wards_search=[],this.wardModel="",this.requestListWard())}},created:function(){console.log("............. shop id ",this.shopId)},methods:{onConfirmPress:function(){this.isCreate?this.requestCreateContact():this.isUpdate&&this.requestUpdateContact()},requestUpdateContact:function(){var t=this,e=this.checkBodyUpdate();if(!e)return this.$msgbox("Các trường có dấu (*) không được để trống");Object.keys(e).length?this.$confirm("Bạn có chắc muốn cập nhật thông tin người liên hệ này không?").then((function(i){d.update_contact_person(e).then((function(e){var i=e.error,s=e.msg;0===i?(t.$msgbox(s),t.disable=!0,t.isUpdate=!1):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){})):(this.disable=!0,this.isUpdate=!1)},requestCreateContact:function(){var t=this;this.$confirm("Bạn có chắc muốn tạo người liên hệ này?").then((function(e){var i=t.getContactInfo();if(!i)return t.$msgbox("Các trường có dấu (*) không được để trống");i.shop_id=t.shopId,d.create_person_contact(i).then((function(e){var i=e.error,s=e.msg;0===i?(t.$msgbox(s),t.disable=!0,t.isCreate=!1):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){}))},onCancelPress:function(){this.resetAllInfo(),this.disable=!0,this.isUpdate=!1,this.isCreate=!1,this.setInfo(this.contact_detail)},resetData:function(){this.isCreate=!1,this.isUpdate=!1,this.fullname="",this.email="",this.phone="",this.position="",this.passport="",this.sex=0,this.date_start="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel="",this.contact_detail=""},resetAllInfo:function(){this.isCreate?(this.fullname="",this.email="",this.phone="",this.position="",this.passport="",this.sex=0,this.date_start="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel=""):this.isUpdate&&this.setInfo(this.contact_detail)},setInfo:function(t){if(t){this.is_load_data=!0;var e=t.address_info,i=e.address,s=e.district,a=e.township,n=e.city,o=e.city_viettel_post_id,r=e.district_viettel_post_id,l=e.township_viettel_post_id;console.log(".......... map dia chir",JSON.stringify(e)),this.fullname=t.fullname,this.email=t.email,this.phone=t.phone,this.position=t.position,this.passport=t.passport,this.sex=t.sex,this.date_start=t.date_start,this.address=i,this.provinceModel=o,this.districtModel=r,this.wardModel=l,this.provinces=[{viettel_id:o,viettel_name:n}],this.provinces_search=Object(c["a"])(this.provinces),this.districts=[{viettel_id:r,viettel_name:s}],this.districts_search=Object(c["a"])(this.districts),this.wards=[{viettel_id:l,viettel_name:a}],this.wards_search=Object(c["a"])(this.wards)}else this.is_load_data=!1},getContactInfo:function(){var t=this;return this.fullname.length&&this.phone.length&&this.provinceModel&&this.districtModel&&this.wardModel&&this.address.trim().length?{fullname:this.fullname,email:this.email,phone:this.phone,position:this.position,passport:this.passport,sex:this.sex,date_start:this.date_start,address:this.address,province:this.provinces.find((function(e){return e.viettel_id===t.provinceModel})),district:this.districts.find((function(e){return e.viettel_id===t.districtModel})),wardModel:this.wards.find((function(e){return e.viettel_id===t.wardModel}))}:null},checkBodyUpdate:function(){var t=this,e=this.contact_detail,i=e.address_info,s=e.id,a={},n={};if(!s){var o=this.provinces.find((function(e){return e.viettel_id===t.provinceModel})),r=this.districts.find((function(e){return e.viettel_id===t.districtModel})),l=this.wards.find((function(e){return e.viettel_id===t.wardModel}));return{fullname:this.fullname.trim(),phone:this.fullname.trim(),email:this.email.trim(),sex:this.sex,shop_id:this.shopId,province:o,district:r,wardModel:l,address:this.address.trim(),date_start:this.date_start,passport:this.passport.trim(),position:this.position}}var c=i.address,d=i.city_viettel_post_id,h=i.district_viettel_post_id,p=i.township_viettel_post_id;if(!this.fullname.trim().length)return null;if(this.fullname.trim()!==this.contact_detail.fullname&&(a.fullname=this.fullname.trim()),this.email.trim()!==this.contact_detail.email&&(a.email=this.email.trim()),!this.phone.trim().length)return null;if(this.phone.trim()!==this.contact_detail.phone&&(a.phone=this.phone.trim()),this.position.trim()!==this.contact_detail.position&&(a.position=this.position.trim()),this.passport.trim()!==this.contact_detail.passport&&(a.passport=this.passport.trim()),this.sex!==this.contact_detail.sex&&(a.sex=this.sex),this.date_start!==this.contact_detail.date_start&&(a.date_start=this.date_start),!this.address.trim().length)return null;if(this.address.trim()!==c&&(n.address=this.address),this.provinceModel!==d){var u=this.provinces.find((function(e){return e.viettel_id===t.provinceModel}));u&&(n.city=u.viettel_name,n.city_viettel_post_code=u.viettel_code,n.city_viettel_post_id=u.viettel_id)}if(this.districtModel!==h){var _=this.districts.find((function(e){return e.viettel_id===t.districtModel}));_&&(n.district=_.viettel_name,n.district_viettel_post_code=_.viettel_code,n.district_viettel_post_id=_.viettel_id)}if(this.wardModel!==p){var f=this.wards.find((function(e){return e.viettel_id===t.wardModel}));f&&(n.township=f.viettel_name,n.township_viettel_post_id=f.viettel_id)}return Object.keys(n).length&&(n.id=i.id,a.address_update=n),Object.keys(a).length&&(a.id=this.contact_detail.id),a},provicesFocus:function(){console.log("............ list tinh/thanh pho ",this.provinces,this.listProvinces),this.provinces.length||this.requestListProvinces(),this.provinces.length<5&&(this.provinces=Object(c["a"])(this.listProvinces),this.provinces_search=Object(c["a"])(this.listProvinces))},requestListProvinces:function(){var t=this;this.provice_loading=!0,d.getProvinceList().then((function(e){console.log("......... list provinces: ",JSON.stringify(e)),t.provice_loading=!1;var i=e.error,s=e.data;0===i&&(t.provinces=s,t.provinces_search=Object(c["a"])(s))})).catch((function(e){console.log("............ list tinh thanh: ",e),t.provice_loading=!1}))},districtFocus:function(){this.districts.length||this.requestDistricts()},requestDistricts:function(){var t=this;this.district_loading=!0,d.getDistrictList({viettel_province_id:this.provinceModel}).then((function(e){t.district_loading=!1;var i=e.error,s=e.data;0===i&&(t.districts=Object(c["a"])(s),t.districts_search=Object(c["a"])(s))})).catch((function(e){console.log("......... list huyen co loi ",e),t.district_loading=!1}))},wardFocus:function(){this.wards.length||this.requestListWard()},requestListWard:function(){var t=this;this.ward_loading=!0,d.getWardsList({viettel_district_id:this.districtModel}).then((function(e){var i=e.error,s=e.data;t.ward_loading=!1,0===i&&(t.wards=Object(c["a"])(s),t.wards_search=Object(c["a"])(s))})).catch((function(e){console.log("........... list ward err ",e),t.ward_loading=!1}))},onEditPress:function(){this.disable=!1,this.isUpdate=!0,this.isCreate=!1,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.provinces_search=Object(c["a"])(this.listProvinces),this.provinces=Object(c["a"])(this.listProvinces)},onCreatePress:function(){this.disable=!1,this.isUpdate=!1,this.isCreate=!0,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.resetAllInfo()},onSearchProvince:function(t){console.log("........... tim kiem thanh pho : ",t),""!==t&&(this.provinces_search=this.provinces.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.provinces_search.length&&(this.provice_loading=!1))},onSearchDistrict:function(t){""!==t&&(this.districts_search=this.districts.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.districts_search.length&&(this.district_loading=!1))},onSearchWard:function(t){""!==t&&(this.wards_search=this.wards.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.wards_search.length&&(this.ward_loading=!1))},requestDetailContact:function(){var t=this;this.loadingTable=!0,d.get_person_contact(this.shopId).then((function(e){var i=e.error,s=e.data;console.log("............. chi tiet nha cung cap : ",JSON.stringify(e)),t.loadingTable=!1,0===i&&(t.contact_detail=s,t.setInfo(s))})).catch((function(e){console.log(".................. co loi ",e),t.loadingTable=!1}))},onShowDialogShopDetail:function(t){this.url_image=t,this.showDialogShopDetail=!0},handleClickButtonDialogDetail:function(t){this.showDialogShopDetail=t.dialog,t.reload&&this.$emit("onClickButtonReload")},handleClickDialogShop:function(t){console.log("--------------------------------dialog",t),this.onShowDialog=t.dialog,t.reload},onResetSearch:function(){}}},p=h,u=(i("b863"),i("2877")),_=Object(u["a"])(p,r,l,!1,null,"6a8c2722",null),f=_.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"id"},[e("el-row",{staticClass:"search-wrapper"},[e("el-row",{attrs:{sm:12}},[e("el-row",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{sm:24}},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:12}},[e("h5",[t._v(t._s(t.stt)+". "+t._s("Thông tin liên hệ lấy hàng (Dùng cho đơn vị vận chuyển)"))])]),e("el-col",{staticStyle:{"padding-right":"20px","justify-content":"flex-end","margin-top":"25px",display:"flex","align-items":"center"},attrs:{sm:12}},[t.isNew?t._e():e("el-button",{staticStyle:{"font-size":"16px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onCreatePress}},[t._v(t._s("Thêm mới"))]),!t.isNew&&t.is_load_data?e("el-button",{staticStyle:{"margin-left":"10px","font-size":"16px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onEditPress}},[t._v(t._s("Chỉnh sửa"))]):t._e()],1)],1)],1),e("el-row",{staticStyle:{display:"flex","justify-content":"right"}},[e("el-col",{attrs:{sm:24}},[e("div",{staticStyle:{display:"flex","justify-content":"right","flex-wrap":"wrap"}},[e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Họ và tên")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập họ tên"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Số điện thoại")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập số điện thoại"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Tỉnh/thành phố")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item-2",attrs:{filterable:"",remote:"",disabled:t.disable,"reserve-keyword":"",placeholder:"Chọn Tỉnh/thành phố","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.provinceModel,callback:function(e){t.provinceModel=e},expression:"provinceModel"}},t._l(t.provinces_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Quận/huyện")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item-2",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Nhập Quận/huyện","remote-method":t.onSearchDistrict,loading:t.district_loading},on:{focus:t.districtFocus},model:{value:t.districtModel,callback:function(e){t.districtModel=e},expression:"districtModel"}},t._l(t.districts_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Phường/xã")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item-2",attrs:{filterable:"",disabled:t.disable,remote:"","reserve-keyword":"",placeholder:"Chọn Phường/xã","remote-method":t.onSearchWard,loading:t.ward_loading},on:{focus:t.wardFocus},model:{value:t.wardModel,callback:function(e){t.wardModel=e},expression:"wardModel"}},t._l(t.wards_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"},[e("label",{staticClass:"item-label"},[t._v(t._s("Địa chỉ cụ thể( Số nhà... )")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập địa chỉ cụ thể"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item-2"})],1)])])],1),(t.isCreate||t.isUpdate)&&t.shopId?e("el-row",{staticClass:"list-shop__header"},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:24}},[e("el-button",{attrs:{type:"warning"},on:{click:t.onCancelPress}},[t._v(t._s("Hủy bỏ"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.onConfirmPress}},[t._v(t._s("Xác nhận"))])],1)],1):t._e()],1)],1)},m=[],g=new n["a"],b={name:"PickupAddress",components:{},props:{show:{type:Boolean,default:!1},shopId:{type:Number,default:function(){return 0}},listProvinces:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){return null}},isNew:{type:Boolean,default:!1}},data:function(){var t=Object(o["a"])();return{is_delete:t.is_delete,is_write:t.is_write,is_edit:t.is_edit,pickup_detail:this.data,loadingTable:!1,isCreate:!1,isUpdate:!1,onShowDialog:!1,name:"",phone:"",address:"",disable:!this.isNew,provinceModel:null,provinces:Object(c["a"])(this.listProvinces),provinces_search:Object(c["a"])(this.listProvinces),provice_loading:!1,districtModel:null,district_loading:!1,districts:[],districts_search:[],wardModel:null,wards:[],wards_search:[],ward_loading:!1,stt:this.isNew?"IV":"V",is_load_data:!1}},watch:{show:function(t){},provinceModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.districts=[],this.districts_search=[],this.wards_search=[],this.districtModel="",this.wardModel="",this.requestDistricts())},districtModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.wards_search=[],this.wardModel="",this.requestListWard())}},created:function(){console.log("............. shop id ",this.shopId),this.setInfo(this.pickup_detail)},methods:{setData:function(t){console.log("............... abc xyz : ",JSON.stringify(t)),this.pickup_detail=t,this.setInfo(this.pickup_detail)},onConfirmPress:function(){this.isCreate?this.requestCreatePickupAddress():this.isUpdate&&this.requestUpdateContact()},requestUpdateContact:function(){var t=this,e=this.checkBodyUpdate();if(!e)return this.$msgbox("Các trường có dấu (*) không được để trống");Object.keys(e).length?this.$confirm("Bạn có chắc muốn cập nhật thông tin người liên hệ này không?").then((function(i){g.update_pickup_address(e).then((function(e){var i=e.error,s=e.msg;0===i?(t.$msgbox(s),t.disable=!0,t.isUpdate=!1):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){})):(this.disable=!0,this.isUpdate=!1)},requestCreatePickupAddress:function(){var t=this;this.$confirm("Bạn có chắc muốn tạo địa chỉ này là địa chỉ lấy hàng không?").then((function(e){var i=t.getPickupInfo();if(!i)return t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!");i.shop_id=t.shopId,g.create_pickup_address(i).then((function(e){var i=e.error,s=e.msg;0===i?(t.$msgbox(s),t.disable=!0,t.isCreate=!1):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){}))},onCancelPress:function(){this.resetAllInfo(),this.disable=!0,this.isUpdate=!1,this.isCreate=!1,this.setInfo(this.pickup_detail)},resetData:function(){this.isCreate=!1,this.isUpdate=!1,this.name="",this.phone="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel=""},resetAllInfo:function(){this.isCreate?(this.name="",this.phone="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel=""):this.isUpdate&&this.setInfo(this.pickup_detail)},setInfo:function(t){if(t){this.is_load_data=!0;var e=t.address,i=t.district,s=t.township,a=t.city,n=t.city_viettel_post_id,o=t.district_viettel_post_id,r=t.township_viettel_post_id;this.name=t.name,this.phone=t.phone,this.address=e,this.provinceModel=n,this.districtModel=o,this.wardModel=r,this.provinces=[{viettel_id:n,viettel_name:a}],this.provinces_search=Object(c["a"])(this.provinces),this.districts=[{viettel_id:o,viettel_name:i}],this.districts_search=Object(c["a"])(this.districts),this.wards=[{viettel_id:r,viettel_name:s}],this.wards_search=Object(c["a"])(this.wards)}else this.is_load_data=!1},getPickupInfo:function(){var t=this;return this.name.length&&this.phone.length&&this.provinceModel&&this.districtModel&&this.wardModel&&this.address.trim().length?{name:this.name,phone:this.phone,address:this.address,province:this.provinces.find((function(e){return e.viettel_id===t.provinceModel})),district:this.districts.find((function(e){return e.viettel_id===t.districtModel})),wardModel:this.wards.find((function(e){return e.viettel_id===t.wardModel}))}:null},checkBodyUpdate:function(){var t=this,e={},i=this.pickup_detail,s=i.name,a=i.phone,n=i.address,o=i.city_viettel_post_id,r=i.district_viettel_post_id,l=i.township_viettel_post_id;if(!this.name.trim().length)return null;if(this.name.trim()!==s&&(e.name=this.name.trim()),!this.phone.trim().length)return null;if(this.phone.trim()!==a&&(e.phone=this.phone.trim()),!this.address.trim().length)return null;if(this.address.trim()!==n&&(e.address=this.address),this.provinceModel!==o){var c=this.provinces.find((function(e){return e.viettel_id===t.provinceModel}));if(!c)return null;e.city=c.viettel_name,e.city_viettel_post_code=c.viettel_code,e.city_viettel_post_id=c.viettel_id}if(this.districtModel!==r){var d=this.districts.find((function(e){return e.viettel_id===t.districtModel}));d&&(e.district=d.viettel_name,e.district_viettel_post_code=d.viettel_code,e.district_viettel_post_id=d.viettel_id)}if(this.wardModel!==l){var h=this.wards.find((function(e){return e.viettel_id===t.wardModel}));h&&(e.township=h.viettel_name,e.township_viettel_post_id=h.viettel_id)}return Object.keys(e).length&&(e.id=this.pickup_detail.id),e},provicesFocus:function(){console.log("............ list tinh/thanh pho ",this.provinces,this.listProvinces),this.provinces.length||this.requestListProvinces(),this.provinces.length<5&&(this.provinces=Object(c["a"])(this.listProvinces),this.provinces_search=Object(c["a"])(this.listProvinces))},requestListProvinces:function(){var t=this;this.provice_loading=!0,g.getProvinceList().then((function(e){console.log("......... list provinces: ",JSON.stringify(e)),t.provice_loading=!1;var i=e.error,s=e.data;0===i&&(t.provinces=s,t.provinces_search=Object(c["a"])(s))})).catch((function(e){console.log("............ list tinh thanh: ",e),t.provice_loading=!1}))},districtFocus:function(){this.districts.length||this.requestDistricts()},requestDistricts:function(){var t=this;this.district_loading=!0,g.getDistrictList({viettel_province_id:this.provinceModel}).then((function(e){t.district_loading=!1;var i=e.error,s=e.data;0===i&&(t.districts=Object(c["a"])(s),t.districts_search=Object(c["a"])(s))})).catch((function(e){console.log("......... list huyen co loi ",e),t.district_loading=!1}))},wardFocus:function(){this.wards.length||this.requestListWard()},requestListWard:function(){var t=this;this.ward_loading=!0,g.getWardsList({viettel_district_id:this.districtModel}).then((function(e){var i=e.error,s=e.data;t.ward_loading=!1,0===i&&(t.wards=Object(c["a"])(s),t.wards_search=Object(c["a"])(s))})).catch((function(e){console.log("........... list ward err ",e),t.ward_loading=!1}))},onEditPress:function(){this.disable=!1,this.isUpdate=!0,this.isCreate=!1,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.provinces_search=Object(c["a"])(this.listProvinces),this.provinces=Object(c["a"])(this.listProvinces)},onCreatePress:function(){this.disable=!1,this.isUpdate=!1,this.isCreate=!0,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.resetAllInfo()},onSearchProvince:function(t){console.log("........... tim kiem thanh pho : ",t),""!==t&&(this.provinces_search=this.provinces.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.provinces_search.length&&(this.provice_loading=!1))},onSearchDistrict:function(t){""!==t&&(this.districts_search=this.districts.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.districts_search.length&&(this.district_loading=!1))},onSearchWard:function(t){""!==t&&(this.wards_search=this.wards.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.wards_search.length&&(this.ward_loading=!1))},requestDetailContact:function(){var t=this;this.loadingTable=!0,g.get_person_contact(this.shopId).then((function(e){var i=e.error,s=e.data;console.log("............. chi tiet nha cung cap : ",JSON.stringify(e)),t.loadingTable=!1,0===i&&(t.pickup_detail=s,t.setInfo(s))})).catch((function(e){console.log(".................. co loi ",e),t.loadingTable=!1}))},handleClickButtonDialogDetail:function(t){this.showDialogShopDetail=t.dialog,t.reload&&this.$emit("onClickButtonReload")},onResetSearch:function(){}}},w=b,y=(i("3bdd"),Object(u["a"])(w,v,m,!1,null,"1eab3b0d",null)),C=y.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"id"},[e("el-row",{staticClass:"search-wrapper"},[e("el-row",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{sm:24}},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:12}},[e("h5",[t._v(t._s(t.stt)+". "+t._s("Thông tin người đại diện"))])]),e("el-col",{staticStyle:{"justify-content":"flex-end","margin-top":"15px",display:"flex","align-items":"center"},attrs:{sm:12}},[t.isNew?t._e():e("el-button",{staticStyle:{"margin-left":"10px","font-size":"16px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onCreatePress}},[t._v(t._s("Thêm mới"))]),!t.isNew&&t.is_load_data?e("el-button",{staticStyle:{"margin-left":"10px","font-size":"16px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onEditPress}},[t._v(t._s("Chỉnh sửa"))]):t._e()],1)],1),e("el-row",{staticStyle:{display:"flex","justify-content":"left"}},[e("el-col",{attrs:{sm:5}},[e("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("label",{staticClass:"text-lable"},[t._v(t._s("Ảnh đại diện(Không bắt buộc)"))])]),e("img",{staticStyle:{width:"170",height:"170px"},attrs:{src:t.user_avatar}}),e("my-upload",{ref:"refCrop",attrs:{"model-value":t.is_show_crop,field:"image",width:300,height:300,"img-format":"jpg/png","lang-type":"en",type:"file",accept:"image/*",url:t.urlBaseApi},on:{"crop-success":t.cropSuccess,"crop-upload-success":t.cropUploadSuccess,"crop-upload-fail":t.cropUploadFail,"update:modelValue":t.offDialogUpload}}),e("el-row",{staticStyle:{"margin-top":"10px"}},[e("el-button",{attrs:{disabled:t.disable},on:{click:t.onUploadAvatar}},[t._v(t._s("Tải lên ảnh đại diện"))])],1)],1),e("el-col",{attrs:{sm:19}},[e("div",{staticStyle:{display:"flex","justify-content":"right","flex-wrap":"wrap"}},[e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Họ và tên")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập họ tên"},model:{value:t.fullname,callback:function(e){t.fullname=e},expression:"fullname"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Số điện thoại")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập số điện thoại"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Chức danh"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập chức danh"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Giới tính")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item",attrs:{placeholder:"Chọn giới tính",disabled:t.disable},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}},t._l(t.list_sex,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Căn cước công dân")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập CCCD"},model:{value:t.passport,callback:function(e){t.passport=e},expression:"passport"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Ngày bắt đầu"))]),e("div",{staticClass:"demo-date-picker"},[e("el-date-picker",{staticStyle:{width:"270px","margin-top":"10px"},attrs:{type:"date",format:"dd/MM/yyyy",placeholder:"Chọn ngày bắt đầu",disabled:t.disable},model:{value:t.time_start,callback:function(e){t.time_start=e},expression:"time_start"}})],1)])],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Tỉnh/Thành phố")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Chọn Tỉnh/Thành phố","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.provinceModel,callback:function(e){t.provinceModel=e},expression:"provinceModel"}},t._l(t.provinces_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Quận/huyện")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Chọn Quận/huyện","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.districtModel,callback:function(e){t.districtModel=e},expression:"districtModel"}},t._l(t.districts_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s(" Phường/xã")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Chọn Phường/xã","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.wardModel,callback:function(e){t.wardModel=e},expression:"wardModel"}},t._l(t.wards_search,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Địa chỉ cụ thể( Số nhà...)")),t.isUpdate||t.isCreate?e("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập địa chỉ cụ thể"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"})],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"})],1)])])],1),(t.isCreate||t.isUpdate)&&t.shopId?e("el-row",{staticClass:"list-shop__header"},[e("el-col",{staticStyle:{"justify-content":"flex-start","margin-top":"25px",display:"flex","align-items":"center"},attrs:{sm:24}},[e("el-button",{attrs:{type:"warning"},on:{click:t.onCancelPress}},[t._v(t._s("Hủy bỏ"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.onConfirmPress}},[t._v(t._s("Xác nhận"))])],1)],1):t._e()],1)],1)},k=[],S=i("4bac"),O=new n["a"],j="https://shop.vcallid.com/api/public",M={name:"PersonRepresentative",components:{MyUpload:S["a"]},props:{show:{type:Boolean,default:!1},shopId:{type:Number,default:function(){return 0}},listProvinces:{type:Array,default:function(){return[]}},isNew:{type:Boolean,default:!1}},data:function(){var t=Object(o["a"])();return{is_delete:t.is_delete,is_write:t.is_write,is_edit:t.is_edit,data:[],detail:"",loadingTable:!1,isCreate:!1,isUpdate:!1,onShowDialog:!1,fullname:"",email:"",phone:"",position:"",passport:"",sex:0,time_start:"",address:"",state:0,disable:!this.isNew,provinceModel:null,provinces:Object(c["a"])(this.listProvinces),provinces_search:Object(c["a"])(this.listProvinces),provice_loading:!1,districtModel:null,district_loading:!1,districts:[],districts_search:[],wardModel:null,wards:[],wards_search:[],ward_loading:!1,id:0,list_sex:[{id:0,name:"Nam"},{id:1,name:"Nữ"}],stt:this.isNew?"II":"III",is_show_crop:!1,contain:"contain",user_avatar:null,urlBaseApi:"".concat(j,"/post_cdn"),avatar:"",is_load_data:!1}},watch:{provinceModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.districts=[],this.districts_search=[],this.wards_search=[],this.districtModel="",this.wardModel="",this.requestDistricts())},districtModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.wards_search=[],this.wardModel="",this.requestListWard())}},created:function(){console.log("............. shop id ",this.shopId)},methods:{offDialogUpload:function(t){console.log("........................off popup",t),this.is_show_crop=t},onUploadAvatar:function(){this.is_show_crop=!this.is_show_crop,console.log(".......................vao day",this.user_avatar)},cropSuccess:function(t,e){console.log("-------- crop success --------",e,t),this.user_avatar=t},cropUploadSuccess:function(t,e){console.log("-------- upload success --------"),console.log("upload"+JSON.stringify(t)),console.log("field: "+e);var i=t.error,s=t.name,a=t.msg;0===i?(this.is_show_crop=!1,this.avatar=s):this.$message.error(a)},cropUploadFail:function(t,e){console.log("-------- upload fail --------"),console.log(t),console.log("field: "+e)},setId:function(t){this.id=parseInt(t)||0,this.requestDetailPersonRepresnetative()},onConfirmPress:function(){this.isCreate?this.requestCreatePersonReprensentative():this.isUpdate&&this.requestUpdatePersionRepresentative()},requestUpdatePersionRepresentative:function(){var t=this,e=this.checkBodyUpdate();if(!e)return this.$msgbox("Các trường có dấu (*) không được để trống");Object.keys(e).length?this.$confirm("Bạn có chắc muốn cập nhật thông tin người đại diện này không?").then((function(i){O.update_representative_person(e).then((function(e){var i=e.error,s=e.msg;0===i?(t.$msgbox(s),t.disable=!0,t.isUpdate=!1):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){})):(this.disable=!0,this.isUpdate=!1)},requestCreatePersonReprensentative:function(){var t=this;this.$confirm("Bạn có chắc muốn tạo thông tin người đại diện này không?").then((function(e){var i=t.getPersonInfo();if(!i)return t.$msgbox("Các trường có dấu (*) không được để trống");i.shop_id=t.shopId,O.create_person_representative(i).then((function(e){var i=e.error,s=e.msg,a=e.data;0===i?(t.$msgbox(s),t.disable=!0,t.isCreate=!1,t.id=a.person_id):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){}))},onCancelPress:function(){this.resetAllInfo(),this.disable=!0,this.isUpdate=!1,this.isCreate=!1,this.setInfo(this.detail)},resetData:function(){this.isCreate=!1,this.isUpdate=!1,this.fullname="",this.email="",this.phone="",this.position="",this.passport="",this.sex=0,this.time_start="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel="",this.avatar=""},resetAllInfo:function(){this.isCreate?(this.fullname="",this.email="",this.phone="",this.position="",this.passport="",this.sex=0,this.time_start="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel=""):this.isUpdate&&this.setInfo(this.detail)},setInfo:function(t){if(t){this.is_load_data=!0;var e=t.address_info,i=e.address,s=e.district,a=e.township,n=e.city,o=e.city_viettel_post_id,r=e.district_viettel_post_id,l=e.township_viettel_post_id;this.fullname=t.fullname,this.user_avatar=t.avatar,this.phone=t.phone,this.position=t.position,this.passport=t.passport,this.sex=t.sex,this.time_start=t.time_start,this.address=i,this.provinceModel=o,this.districtModel=r,this.wardModel=l,this.provinces=[{viettel_id:o,viettel_name:n}],this.provinces_search=Object(c["a"])(this.provinces),this.districts=[{viettel_id:r,viettel_name:s}],this.districts_search=Object(c["a"])(this.districts),this.wards=[{viettel_id:l,viettel_name:a}],this.wards_search=Object(c["a"])(this.wards)}else this.is_load_data=!1},getPersonInfo:function(){var t=this;return this.fullname.length&&this.phone.length&&this.passport.length&&this.provinceModel&&this.districtModel&&this.address.trim().length?{fullname:this.fullname,avatar:this.avatar,phone:this.phone,position:this.position,passport:this.passport,sex:this.sex,time_start:this.time_start,address:this.address,province:this.provinces.find((function(e){return e.viettel_id===t.provinceModel})),district:this.districts.find((function(e){return e.viettel_id===t.districtModel})),wardModel:this.wards.find((function(e){return e.viettel_id===t.wardModel}))}:null},checkBodyUpdate:function(){var t=this,e=this.detail,i=e.address_info,s=e.id,a={},n={};if(!this.fullname.trim().length)return null;if(this.fullname.trim()!==this.detail.fullname&&(a.fullname=this.fullname.trim()),!this.phone.trim().length)return null;if(this.phone.trim()!==this.detail.phone&&(a.phone=this.phone.trim()),this.avatar.length&&this.avatar!==this.detail.avatar&&(a.avatar=this.avatar),this.position.trim()!==this.detail.position&&(a.position=this.position.trim()),!this.passport.trim().length)return null;if(this.passport.trim()!==this.detail.passport&&(a.passport=this.passport.trim()),this.sex!==this.detail.sex&&(a.sex=this.sex),this.time_start!==this.detail.time_start&&(a.time_start=this.time_start),!i||!s){var o=this.provinces.find((function(e){return e.viettel_id===t.provinceModel})),r=this.districts.find((function(e){return e.viettel_id===t.districtModel})),l=this.wards.find((function(e){return e.viettel_id===t.wardModel}));return{shop_id:this.shopId,fullname:this.fullname.trim(),phone:this.phone.trim(),sex:this.sex,position:this.position,province:o,district:r,wardModel:l,address:this.address.trim(),time_start:this.time_start,passport:this.passport,avatar:this.avatar}}var c=i.address,d=i.city_viettel_post_id,h=i.district_viettel_post_id,p=i.township_viettel_post_id;if(this.address.trim()!==c&&(n.address=this.address),this.provinceModel!==d){var u=this.provinces.find((function(e){return e.viettel_id===t.provinceModel}));u&&(n.city=u.viettel_name,n.city_viettel_post_code=u.viettel_code,n.city_viettel_post_id=u.viettel_id)}if(this.districtModel!==h){var _=this.districts.find((function(e){return e.viettel_id===t.districtModel}));_&&(n.district=_.viettel_name,n.district_viettel_post_code=_.viettel_code,n.district_viettel_post_id=_.viettel_id)}if(this.wardModel!==p){var f=this.wards.find((function(e){return e.viettel_id===t.wardModel}));f&&(n.township=f.viettel_name,n.township_viettel_post_id=f.viettel_id)}return Object.keys(n).length&&(n.id=i.id,a.address_update=n),Object.keys(a).length&&(a.id=this.detail.id),a},provicesFocus:function(){console.log("............ list tinh/thanh pho ",this.provinces,this.listProvinces),this.provinces.length||this.requestListProvinces(),this.provinces.length<5&&(this.provinces=Object(c["a"])(this.listProvinces),this.provinces_search=Object(c["a"])(this.listProvinces))},requestListProvinces:function(){var t=this;this.provice_loading=!0,O.getProvinceList().then((function(e){console.log("......... list provinces: ",JSON.stringify(e)),t.provice_loading=!1;var i=e.error,s=e.data;0===i&&(t.provinces=s,t.provinces_search=Object(c["a"])(s))})).catch((function(e){console.log("............ list tinh thanh: ",e),t.provice_loading=!1}))},districtFocus:function(){this.districts.length||this.requestDistricts()},requestDistricts:function(){var t=this;this.district_loading=!0,O.getDistrictList({viettel_province_id:this.provinceModel}).then((function(e){t.district_loading=!1;var i=e.error,s=e.data;0===i&&(t.districts=Object(c["a"])(s),t.districts_search=Object(c["a"])(s))})).catch((function(e){console.log("......... list huyen co loi ",e),t.district_loading=!1}))},wardFocus:function(){this.wards.length||this.requestListWard()},requestListWard:function(){var t=this;this.ward_loading=!0,O.getWardsList({viettel_district_id:this.districtModel}).then((function(e){var i=e.error,s=e.data;t.ward_loading=!1,0===i&&(t.wards=Object(c["a"])(s),t.wards_search=Object(c["a"])(s))})).catch((function(e){console.log("........... list ward err ",e),t.ward_loading=!1}))},onEditPress:function(){this.disable=!1,this.isUpdate=!0,this.isCreate=!1,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.provinces_search=Object(c["a"])(this.listProvinces),this.provinces=Object(c["a"])(this.listProvinces)},onCreatePress:function(){this.disable=!1,this.isUpdate=!1,this.isCreate=!0,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.resetAllInfo()},onSearchProvince:function(t){console.log("........... tim kiem thanh pho : ",t),""!==t&&(this.provinces_search=this.provinces.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.provinces_search.length&&(this.provice_loading=!1))},onSearchDistrict:function(t){""!==t&&(this.districts_search=this.districts.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.districts_search.length&&(this.district_loading=!1))},onSearchWard:function(t){""!==t&&(this.wards_search=this.wards.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.wards_search.length&&(this.ward_loading=!1))},requestDetailPersonRepresnetative:function(){var t=this;this.id&&(this.loadingTable=!0,O.get_person_representative(this.id).then((function(e){var i=e.error,s=e.data;console.log("............. chi tiet nha cung cap : ",JSON.stringify(e)),t.loadingTable=!1,0===i&&(t.detail=s,t.setInfo(s))})).catch((function(e){console.log(".................. co loi ",e),t.loadingTable=!1})))},onShowDialogShopDetail:function(t){this.url_image=t,this.showDialogShopDetail=!0},handleClickButtonDialogDetail:function(t){this.showDialogShopDetail=t.dialog,t.reload&&this.$emit("onClickButtonReload")},handleClickDialogShop:function(t){console.log("--------------------------------dialog",t),this.onShowDialog=t.dialog,t.reload},onResetSearch:function(){}}},D=M,I=(i("8024e"),Object(u["a"])(D,x,k,!1,null,"28f579a7",null)),P=I.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"id"},[e("el-row",{staticClass:"search-wrapper"},[0===t.isApprove?e("el-row",{attrs:{sm:24}},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:24}},[e("h5",[t._v(t._s(t.stt)+". "+t._s("Thông tin hợp đồng"))])]),e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:24}},[e("el-button",{staticStyle:{"margin-bottom":"10px","font-size":"13px","font-weight":"400"},on:{click:t.createContract}},[t._v("+ Thêm mới hợp đồng")])],1)],1):t._e(),e("el-row",{staticStyle:{display:"flex"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{label:"ID",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.onDetailPress(i.row)}}},[t._v(t._s("#".concat(i.row.id)))])]}}])}),e("el-table-column",{attrs:{prop:"name",label:"Tên hợp đồng",align:"center"}}),e("el-table-column",{attrs:{prop:"type_name",label:"Loại hợp đồng",align:"center"}}),e("el-table-column",{attrs:{prop:"date_sign",label:"Ngày ký",align:"center"}}),e("el-table-column",{attrs:{prop:"account_sign_name",label:"Người ký",align:"center"}}),e("el-table-column",{attrs:{label:"Tình trạng",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tag",{attrs:{type:1===i.row.active?"success":"danger"}},[t._v(t._s(1===i.row.active?"Đã kích hoạt":"Đã ẩn"))])]}}])}),e("el-table-column",{attrs:{label:"Trạng thái",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tag",{attrs:{type:1===i.row.approve?"success":"danger"}},[t._v(t._s(1===i.row.approve?"approve":2===i.row.approve?"Từ chối":"Chờ duyệt"))])]}}])}),e("el-table-column",{attrs:{prop:"account_approve_name",label:"Người duyệt",align:"center"}}),e("el-table-column",{attrs:{prop:"approve_date",label:"Ngày duyệt",align:"center"}}),e("el-table-column",{attrs:{label:"Hành động",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"small",title:"Bật bản hợp đồng",type:"primary",icon:"el-icon-check",circle:""},on:{click:function(e){return t.onActivePress(i.row)}}}),e("el-button",{attrs:{size:"small",title:"Tắt bản hợp đồng",type:"danger",icon:"el-icon-close",circle:""},on:{click:function(e){return t.onInActivePress(i.row)}}}),e("el-button",{attrs:{size:"small",title:"Xóa hợp đồng",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.onDeletePress(i.row)}}})]}}])})],1)],1)],1)],1)},N=[],T=(i("99af"),i("c740"),i("a434"),new n["a"]),q={name:"ContractInfo",components:{},props:{show:{type:Boolean,default:!1},shopId:{type:Number,default:function(){return 0}},isNew:{type:Boolean,default:!1},stt:{type:String,default:"II"},isApprove:{type:Number,default:function(){return 0}}},data:function(){var t=Object(o["a"])();return{is_delete:t.is_delete,is_write:t.is_write,is_edit:t.is_edit,loadingTable:!1,isCreate:!1,isUpdate:!1,tableData:[]}},methods:{onActivePress:function(t){this.requestChangeStateContact(t,1)},onInActivePress:function(t){this.requestChangeStateContact(t,0)},onDetailPress:function(t){this.$router.push({path:"/contract?shop_id=".concat(this.shopId,"&id=").concat(t.id)})},createContract:function(){this.$router.push({path:"/contract?shop_id=".concat(this.shopId,"&create=1")})},onDeletePress:function(t){this.requestDeleteContract(t)},requestChangeStateContact:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=1===i?"Bạn có chắc muốn kích hoạt hợp đồng : ".concat(t.name):"Bạn có chắc muốn ẩn hợp đồng: ".concat(t.name);this.$confirm(s).then((function(s){var a={id:t.id,active:i};T.contract_change_state(a).then((function(s){var a=s.error,n=s.msg;if(0===a){e.$message.success(n);var o=e.tableData.find((function(e){return e.id===t.id}));o&&(o.active=i)}else e.$message.error(n)}))})).catch((function(t){}))},requestDeleteContract:function(t){var e=this;this.$confirm("Bạn có chắc muốn xóa hợp đồng: ".concat(t.name)).then((function(i){var s={id:t.id,shop_id:e.shopId};T.delete_contract(s).then((function(i){var s=i.error,a=i.msg;if(0===s){e.$message.success(a);var n=e.tableData.findIndex((function(e){return e.id===t.id}));-1!==n&&e.tableData.splice(n,1)}else e.$message.error(a)}))})).catch((function(t){}))},requestListContractActive:function(){var t=this;this.loadingTable=!0,T.list_contract_active(this.shopId).then((function(e){t.loadingTable=!1;var i=e.error,s=e.data;console.log(".......... list hop dong : ",JSON.stringify(e)),0===i&&(t.tableData=s)})).catch((function(e){t.loadingTable=!1,console.log("............ danh sach nha cung cap : ",e)}))},requestListContactForApprove:function(){var t=this;this.loadingTable=!0,T.list_contact_not_approve().then((function(e){t.loadingTable=!1;var i=e.error,s=e.data;console.log(".......... list hop dong : ",JSON.stringify(e)),0===i&&(t.tableData=s)})).catch((function(e){t.loadingTable=!1,console.log("............ danh sach nha cung cap : ",e)}))},onEditPress:function(){this.disable=!1,this.isUpdate=!0,this.isCreate=!1,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.provinces_search=Object(c["a"])(this.listProvinces),this.provinces=Object(c["a"])(this.listProvinces)},onCreatePress:function(){this.disable=!1,this.isUpdate=!1,this.isCreate=!0,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.resetAllInfo()},onShowDialogShopDetail:function(t){this.url_image=t,this.showDialogShopDetail=!0},handleClickButtonDialogDetail:function(t){this.showDialogShopDetail=t.dialog,t.reload&&this.$emit("onClickButtonReload")},handleClickDialogShop:function(t){console.log("--------------------------------dialog",t),this.onShowDialog=t.dialog,t.reload}}},$=q,L=(i("7f81"),Object(u["a"])($,U,N,!1,null,"8650e91c",null)),B=L.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"id"},[e("el-row",{staticClass:"search-wrapper"},[e("el-row",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{sm:24}},[e("el-col",{staticStyle:{"justify-content":"flex-start",display:"flex","align-items":"center"},attrs:{sm:12}},[e("h5",[t._v(t._s(t.stt)+". "+t._s("Thông tin chung"))])]),e("el-col",{staticStyle:{"justify-content":"flex-end",display:"flex","align-items":"center"},attrs:{sm:12}},[t.isNew?t._e():e("el-button",{staticStyle:{"margin-left":"10px","font-size":"14px","font-weight":"400"},attrs:{type:"primary"},on:{click:t.onEditPress}},[t._v(t._s("Chỉnh sửa"))])],1)],1),e("el-row",{staticStyle:{display:"flex","justify-content":"left"}},[e("el-col",{attrs:{sm:5}},[e("img",{staticStyle:{width:"170",height:"170px"},attrs:{src:t.user_avatar}}),e("my-upload",{ref:"refCrop",attrs:{"model-value":t.is_show_crop,field:"image",width:300,height:300,"img-format":"jpg/png","lang-type":"en",type:"file",accept:"image/*",url:t.urlBaseApi},on:{"crop-success":t.cropSuccess,"crop-upload-success":t.cropUploadSuccess,"crop-upload-fail":t.cropUploadFail,"update:modelValue":t.offDialogUpload}}),e("el-row",{staticStyle:{"margin-top":"10px"}},[e("el-button",{attrs:{disabled:t.disable},on:{click:t.onUploadAvatar}},[t._v(t._s("Tải lên ảnh đại diện"))])],1),e("el-row",{staticStyle:{"margin-top":"10px"}},[e("label",{staticClass:"text-lable"},[t._v(t._s("Trạng thái"))]),e("el-switch",{staticStyle:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},attrs:{disabled:t.disable},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}}),e("label",{staticStyle:{"margin-left":"10px","font-size":"16px","font-weight":"400"}},[t._v(t._s(t.state?"Kích hoạt":"Tạm dừng"))])],1)],1),e("el-col",{attrs:{sm:19}},[e("div",{staticStyle:{display:"flex","justify-content":"right","flex-wrap":"wrap"}},[e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Mã nhà cung cấp")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable||t.isUpdate,placeholder:"Nhập mã nhà cung cấp"},model:{value:t.supplier_code,callback:function(e){t.supplier_code=e},expression:"supplier_code"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Tên nhà cung cấp")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập tên nhà cung cấp"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Số điện thoại")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập số điện thoại"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Fax"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập số Fax"},model:{value:t.business_fax,callback:function(e){t.business_fax=e},expression:"business_fax"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("MST/CCCD")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập MST/CCCD"},model:{value:t.ma_so_thue,callback:function(e){t.ma_so_thue=e},expression:"ma_so_thue"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Thành phố")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm thành phố","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.provinceModel,callback:function(e){t.provinceModel=e},expression:"provinceModel"}},t._l(t.provinces,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Quận/huyện")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-select",{staticClass:"select-item",attrs:{filterable:"",disabled:t.disable,remote:"","reserve-keyword":"",placeholder:"Tìm kiếm Quận/huyện","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.districtModel,callback:function(e){t.districtModel=e},expression:"districtModel"}},t._l(t.districts,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Phường/xã")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable,filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm Phường/xã","remote-method":t.onSearchProvince,loading:t.provice_loading},on:{focus:t.provicesFocus},model:{value:t.wardModel,callback:function(e){t.wardModel=e},expression:"wardModel"}},t._l(t.wards,(function(t){return e("el-option",{key:t.viettel_id,attrs:{label:t.viettel_name,value:t.viettel_id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Địa chỉ cụ thể( Số nhà...)")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập địa chỉ cụ thể"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Loại nhà cung cấp")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable},model:{value:t.supplier_type,callback:function(e){t.supplier_type=e},expression:"supplier_type"}},t._l(t.supplier_types,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Hình thức kinh doanh")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable,placeholder:"Chọn hình thức kinh doanh"},model:{value:t.business_type,callback:function(e){t.business_type=e},expression:"business_type"}},t._l(t.supplier_bussiness,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("div",{staticClass:"div-wrap-info"},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Loại dịch vụ")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-select",{staticClass:"select-item",attrs:{disabled:t.disable},model:{value:t.service_type,callback:function(e){t.service_type=e},expression:"service_type"}},t._l(t.service_types,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)]),t.isUpdate?t._e():e("el-container",[e("el-row",{attrs:{span:24}},t._l(t.property_extend,(function(i){return e("el-col",{key:i[0].id,attrs:{span:24}},[e("el-row",{staticClass:"row-row"},[e("el-col",{staticClass:"mb-10"},[i[0]?e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s(i[0].lable))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable},model:{value:i[0].value,callback:function(e){t.$set(i[0],"value",e)},expression:"item[0].value"}})],1):t._e()],1),e("el-col",{staticClass:"mb-10"},[i[1]?e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s(i[1].lable))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable},model:{value:i[1].value,callback:function(e){t.$set(i[1],"value",e)},expression:"item[1].value"}})],1):t._e()],1),e("el-col",{staticClass:"mb-10"},[i[2]?e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s(i[2].lable))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable},model:{value:i[2].value,callback:function(e){t.$set(i[2],"value",e)},expression:"item[2].value"}})],1):t._e()],1)],1)],1)})),1)],1),e("el-container",[e("el-row",t._l(t.properties_other,(function(i){return e("el-col",{key:i.id,attrs:{span:24}},[e("el-row",{staticClass:"row-row"},[e("el-col",{staticClass:"mb-10",attrs:{span:12}},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Tên thuộc tính"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập tên thuộc tính"},model:{value:i.lable,callback:function(e){t.$set(i,"lable",e)},expression:"item.lable"}})],1)],1),e("el-col",{staticClass:"mb-10",staticStyle:{"padding-left":"20px"},attrs:{span:12}},[e("el-row",{staticClass:"row-item"},[e("label",{staticClass:"item-label"},[t._v(t._s("Giá trị thuộc tính"))]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.disable,placeholder:"Nhập giá trị thuộc tính"},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}})],1)],1),e("el-col",{staticClass:"mb-10"},[e("el-row",{staticClass:"row-item"})],1)],1)],1)})),1)],1),e("el-row",{staticClass:"list-shop__header"},[e("el-col",{staticStyle:{"justify-content":"flex-end",display:"flex","align-items":"center","padding-top":"50px"},attrs:{sm:24}},[e("el-button",{attrs:{type:"primary"},on:{click:t.addMoreProperty}},[t._v(t._s("Thêm thuộc tính"))])],1)],1)],1)],1),(t.isCreate||t.isUpdate)&&t.shopId?e("el-row",{staticClass:"list-shop__header",staticStyle:{"margin-top":"20px"}},[e("el-col",{staticStyle:{"justify-content":"flex-start","margin-top":"25px",display:"flex","align-items":"center"},attrs:{sm:24}},[e("el-button",{attrs:{type:"warning"},on:{click:t.onCancelPress}},[t._v(t._s("Hủy bỏ"))]),e("el-button",{attrs:{type:"primary"},on:{click:t.onConfirmPress}},[t._v(t._s("Xác nhận"))])],1)],1):t._e()],1)],1)},R=[],F=i("b85c"),J=(i("5319"),i("fa7d")),W=new n["a"],z="https://shop.vcallid.com/api/public",E={name:"PersonRepresentative",components:{MyUpload:S["a"]},props:{show:{type:Boolean,default:!1},shopId:{type:Number,default:function(){return 0}},listProvinces:{type:Array,default:function(){return[]}},isNew:{type:Boolean,default:!1},stt:{type:String,default:"I"}},data:function(){var t=Object(o["a"])();return{urlBaseApi:"".concat(z,"/post_cdn"),is_delete:t.is_delete,is_write:t.is_write,is_edit:t.is_edit,edit_id:null,view_id:null,data:[],shopDetail:"",loadingTable:!1,isCreate:!1,isUpdate:!1,onShowDialog:!1,name:"",phone:"",ma_so_thue:"",address:"",state:!0,selectedNumber:"",supplier_code:"",business_fax:"",supplier_type:0,supplier_types:[{id:0,name:"Doanh nghiệp"},{id:1,name:"Cá nhân"}],business_type:1,supplier_bussiness:[],disable:!this.isNew,provinceModel:"",provice_loading:!1,logo:"",districtModel:"",districts:[],wardModel:"",wards:[],fileList:[],provinces:Object(c["a"])(this.listProvinces),provinces_search:Object(c["a"])(this.listProvinces),district_loading:!1,districts_search:[],wards_search:[],ward_loading:!1,id:0,list_sex:[{id:0,name:"nam"},{id:1,name:"nu"}],service_type:1,service_types:[{id:1,name:"Hàng Hóa"},{id:2,name:"Sự kiện - giải đấu"}],properties_other:[],property_extend:[],is_show_crop:!1,contain:"contain",user_avatar:null}},watch:{provinceModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.districts=[],this.districts_search=[],this.wards_search=[],this.districtModel="",this.wardModel="",console.log("........... load list district ",this.provinceModel),this.requestDistricts())},districtModel:function(t){t&&(this.isCreate||this.isUpdate||this.isNew)&&(this.wards_search=[],this.wardModel="",this.requestListWard())}},created:function(){console.log("............. shop id ",this.shopId),this.requestDetail(),this.requestBussinessType()},methods:{offDialogUpload:function(t){console.log("........................off popup",t),this.is_show_crop=t},onUploadAvatar:function(){this.is_show_crop=!this.is_show_crop,console.log(".......................vao day",this.user_avatar)},requestListPermissionMenu:function(){var t=this,e=this.$router.history.current.meta.roles,i=e&&e.length?e[0]:0;i=parseInt(i.replace("NCC",""));var s=Object(o["a"])(),a=s.email;Object(J["a"])(a,i,(function(e){if(console.log("............list data 1",JSON.stringify(e)),e){var i=e.is_supper_admin,s=e.is_add,a=e.is_view,n=e.is_edit,o=e.is_delete,r=e.is_export;i=parseInt(i)||0,s=parseInt(s)||1,a=parseInt(a)||1,n=parseInt(n)||1,o=parseInt(o)||1,r=parseInt(r)||1,t.is_delete=i?1:o-1,t.is_write=i?1:s-1,t.is_edit=i?1:n-1,t.is_export=i?1:r-1,t.is_view=i?1:a-1}}))},cropSuccess:function(t,e){console.log("-------- crop success --------",e,t)},addMoreProperty:function(){this.properties_other.push({lable:"",value:"",is_new:1})},cropUploadSuccess:function(t,e){console.log("-------- upload success --------"),console.log("upload"+JSON.stringify(t)),console.log("field: "+e);var i=t.error,s=t.name,a=t.msg;0===i?(this.is_show_crop=!1,this.user_avatar=s):this.$message.error(a)},cropUploadFail:function(t,e){console.log("-------- upload fail --------"),console.log(t),console.log("field: "+e)},requestBussinessType:function(){var t=this;W.get_bussiness_type().then((function(e){var i=e.error,s=e.data;console.log(".........list bussiness type: ",JSON.stringify(e),t.business_type),0===i&&(t.supplier_bussiness=s)})).catch((function(t){console.log("................ abc ",t)}))},handleUploadImageSuccess:function(t,e,i){this.fileList.push({url:t.name}),console.log(".......... handleUploadImageSuccess : ",t.name,e,i)},handleRemoveImage:function(t,e){this.fileList=[]},setId:function(t){this.id=parseInt(t)||0,this.requestDetailPersonRepresnetative()},handleSetUrlLogo:function(t){Object.keys(t).length>0&&(this.shopDetail.logo_menu=t.name)},handleSetUrlImage:function(t){Object.keys(t).length>0&&(this.shopDetail.logo=t.name)},onConfirmPress:function(){console.log("............ list thuoc tinh them la ",JSON.stringify(this.properties_other)),this.isCreate?this.requestCreatePersonReprensentative():this.isUpdate&&this.requestUpdateSupplierInfo()},checkPhoneNumber:function(t){var e=/([\+84|84|0]+(3|5|7|8|9|1[2|6|8|9]))+([0-9]{8,9})\b/;return e.test(t)},validateCreate:function(){},requestUpdateSupplierInfo:function(){var t=this,e=this.checkBodyUpdate();return console.log("............. body update ",JSON.stringify(e)),e?(console.log(".......... phone number ",e),e.phone&&!this.checkPhoneNumber(e.phone)?this.$msgbox("Số điện thoại không hợp lệ"):void(Object.keys(e).length?this.$confirm("Bạn có chắc muốn cập nhật thông tin nhà cung cấp?").then((function(i){W.update_supplier_info(e).then((function(e){var i=e.error,s=e.msg;0===i?t.$msgbox(s).then((function(e){t.disable=!0,t.isUpdate=!1;var i,s=Object(F["a"])(t.properties_other);try{for(s.s();!(i=s.n()).done;){var a=i.value;delete a.is_new}}catch(n){s.e(n)}finally{s.f()}t.shopDetail.others=Object(c["a"])(t.properties_other),t.properties_other=[]})):(t.$msgbox(s),t.setInfo(t.shopDetail))})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){})):(this.disable=!0,this.isUpdate=!1))):this.$msgbox("Các trường có dấu (*) không được để trống")},requestCreatePersonReprensentative:function(){},onCancelPress:function(){this.resetAllInfo(),this.disable=!0,this.isUpdate=!1,this.isCreate=!1},resetData:function(){this.isCreate=!1,this.isUpdate=!1,this.fullname="",this.email="",this.phone="",this.position="",this.supplier_code="",this.passport="",this.sex=0,this.time_start="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel="",this.shopDetail=""},resetAllInfo:function(){this.isCreate?(this.fullname="",this.email="",this.phone="",this.position="",this.supplier_code="",this.passport="",this.sex=0,this.time_start="",this.address="",this.provinceModel="",this.districtModel="",this.wardModel=""):this.isUpdate&&(this.properties_other=[],this.isUpdate=!1,this.setInfo(this.shopDetail))},setInfo:function(t){if(console.log("..........detail supplier : ",JSON.stringify(t)),t){this.shopDetail=Object.assign({},t);var e=t.address_info,i=t.others;if(this.phone=t.phone,this.name=t.name,this.ma_so_thue=t.ma_so_thue,this.business_fax=t.business_fax,this.supplier_code=t.supplier_code,this.business_type=parseInt(t.business_type)||1,this.supplier_type=parseInt(t.type)||0,this.service_type=parseInt(t.service_type)||1,this.type=t.type,this.state=1===t.active,t.logo&&(this.user_avatar=t.logo),e){var s=e.address,a=e.district,n=e.township,o=e.city,r=e.city_viettel_post_id,l=e.district_viettel_post_id,d=e.township_viettel_post_id;this.address=s,this.provinceModel=r,this.districtModel=l,this.wardModel=d,this.provinces=[{viettel_id:r,viettel_name:o}],this.provinces_search=Object(c["a"])(this.provinces),this.districts=[{viettel_id:l,viettel_name:a}],this.districts_search=Object(c["a"])(this.districts),this.wards=[{viettel_id:d,viettel_name:n}],this.wards_search=Object(c["a"])(this.wards)}if(i&&i.length){var h=[];this.property_extend=[];var p,u=Object(F["a"])(i);try{for(u.s();!(p=u.n()).done;){var _=p.value;h.length<3?h.push(Object.assign({},_)):(this.property_extend.push(Object(c["a"])(h)),h=[_])}}catch(f){u.e(f)}finally{u.f()}h.length&&this.property_extend.push(Object(c["a"])(h)),console.log(".........property extend : ",JSON.stringify(this.property_extend))}}},getInfo:function(){var t=this;return this.name.length&&this.phone.length&&this.supplier_code.length&&this.ma_so_thue.length&&this.provinceModel&&this.districtModel&&this.wardModel&&this.address.trim().length?{name:this.name,phone:this.phone,ma_so_thue:this.ma_so_thue,active:this.state?1:0,business_fax:this.business_fax,business_type:parseInt(this.business_type)||1,service_type:parseInt(this.service_type)||1,type:parseInt(this.type)||0,supplier_code:this.supplier_code,address:this.address,logo:this.user_avatar,province:this.provinces.find((function(e){return e.viettel_id===t.provinceModel})),district:this.districts.find((function(e){return e.viettel_id===t.districtModel})),ward:this.wards.find((function(e){return e.viettel_id===t.wardModel})),others:this.properties_other}:null},checkBodyUpdate:function(){var t,e=this,i=this.shopDetail,s=i.address_info,a=i.others,n={},o={},r=[],l=[];console.log("...........check update ",JSON.stringify(this.property_extend),a);var c,d=Object(F["a"])(this.properties_other);try{var h=function(){var t=c.value,e=t.is_new;if(e=parseInt(e)||0,e)l.push(t);else{var i=a.find((function(e){return e.id===t.id}));console.log("......... tim thay san pham : ",JSON.stringify(i)),i&&(console.log(".........so sanh ket qua ",JSON.stringify(i),JSON.stringify(t)),t.lable===i.lable&&t.value===i.value||r.push(t))}};for(d.s();!(c=d.n()).done;)h()}catch(x){d.e(x)}finally{d.f()}if(r.length&&(n.properties_other_update=r),l.length&&(n.others=l),!this.name.trim().length)return null;if(this.name.trim()!==this.shopDetail.name&&(n.name=this.name.trim()),null!==(t=this.user_avatar)&&void 0!==t&&t.length&&this.user_avatar.trim()!==this.shopDetail.logo&&(n.logo=this.user_avatar.trim()),!this.phone.trim().length)return null;if(this.phone.trim()!==this.shopDetail.phone&&(n.phone=this.phone.trim()),(!this.shopDetail.business_fax||this.business_fax.trim().length&&this.business_fax.trim()!==this.shopDetail.business_fax)&&(n.business_fax=this.business_fax.trim()),(!this.shopDetail.supplier_code||this.supplier_code.trim().length&&this.supplier_code.trim()!==this.shopDetail.supplier_code)&&(n.supplier_code=this.supplier_code.trim()),this.shopDetail.business_type&&this.business_type===this.shopDetail.business_type||(n.business_type=this.business_type),(this.shopDetail.type||this.supplier_type!==this.shopDetail.type)&&(n.type=this.supplier_type),!this.ma_so_thue.trim().length)return null;if(this.ma_so_thue.trim()!==this.shopDetail.ma_so_thue&&(n.ma_so_thue=this.ma_so_thue),this.fileList.length&&this.fileList[0].url!==this.shopDetail.logo&&(n.logo=this.fileList[0].url),s){var p=s.address,u=s.city_viettel_post_id,_=s.district_viettel_post_id,f=s.township_viettel_post_id;if(this.address.trim()!==p&&(o.address=this.address),console.log(".................... thong tin tinh/tp ",this.provinceModel,u,JSON.stringify(this.provinces)),this.provinceModel!==u){var v=this.provinces.find((function(t){return t.viettel_id===e.provinceModel}));if(!v)return null;o.city=v.viettel_name,o.city_viettel_post_code=v.viettel_code,o.city_viettel_post_id=v.viettel_id}if(this.districtModel!==_){var m=this.districts.find((function(t){return t.viettel_id===e.districtModel}));if(!m)return null;o.district=m.viettel_name,o.district_viettel_post_code=m.viettel_code,o.district_viettel_post_id=m.viettel_id}if(this.wardModel!==f){var g=this.wards.find((function(t){return t.viettel_id===e.wardModel}));if(!g)return null;o.township=g.viettel_name,o.township_viettel_post_id=g.viettel_id}}else{o.address=this.address;var b=this.provinces.find((function(t){return t.viettel_id===e.provinceModel}));if(!b)return null;o.city=b.viettel_name,o.city_viettel_post_code=b.viettel_code,o.city_viettel_post_id=b.viettel_id;var w=this.districts.find((function(t){return t.viettel_id===e.districtModel}));if(!w)return null;o.district=w.viettel_name,o.district_viettel_post_code=w.viettel_code,o.district_viettel_post_id=w.viettel_id;var y=this.wards.find((function(t){return t.viettel_id===e.wardModel}));if(!y)return null;o.township=y.viettel_name,o.township_viettel_post_id=y.viettel_id}Object.keys(o).length&&(o.id=s?s.id:0,n.address_update=o);var C=this.state?1:0;return C!==this.shopDetail.active&&(n.active=C),Object.keys(n).length&&(n.id=this.shopDetail.id),n},provicesFocus:function(){console.log("............ list tinh/thanh pho ",this.provinces,this.listProvinces),this.provinces.length||this.requestListProvinces(),this.provinces.length<5&&(this.provinces=Object(c["a"])(this.listProvinces),this.provinces_search=Object(c["a"])(this.listProvinces))},requestListProvinces:function(){var t=this;this.provice_loading=!0,W.getProvinceList().then((function(e){t.provice_loading=!1;var i=e.error,s=e.data;0===i&&(t.provinces=s,t.provinces_search=Object(c["a"])(s))})).catch((function(e){console.log("............ list tinh thanh: ",e),t.provice_loading=!1}))},districtFocus:function(){this.districts.length||this.requestDistricts()},requestDistricts:function(){var t=this;this.district_loading=!0,W.getDistrictList({viettel_province_id:this.provinceModel}).then((function(e){t.district_loading=!1;var i=e.error,s=e.data;0===i&&(t.districts=Object(c["a"])(s),t.districts_search=Object(c["a"])(s),console.log(e,"HUỵen"))})).catch((function(e){console.log("......... list huyen co loi ",e),t.district_loading=!1}))},wardFocus:function(){this.wards.length||this.requestListWard()},requestListWard:function(){var t=this;this.ward_loading=!0,W.getWardsList({viettel_district_id:this.districtModel}).then((function(e){var i=e.error,s=e.data;t.ward_loading=!1,0===i&&(t.wards=Object(c["a"])(s),t.wards_search=Object(c["a"])(s))})).catch((function(e){console.log("........... list ward err ",e),t.ward_loading=!1}))},onEditPress:function(){this.disable=!1,this.isUpdate=!0,this.isCreate=!1,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.provinces_search=Object(c["a"])(this.listProvinces),this.provinces=Object(c["a"])(this.listProvinces);var t=this.shopDetail.others;if(t&&t.length){this.properties_other=[];var e,i=Object(F["a"])(t);try{for(i.s();!(e=i.n()).done;){var s=e.value;this.properties_other.push(Object.assign({},s))}}catch(a){i.e(a)}finally{i.f()}}},onCreatePress:function(){this.disable=!1,this.isUpdate=!1,this.isCreate=!0,this.show_btn=(this.isCreate||this.isUpdate)&&this.shopId,this.resetAllInfo()},onSearchProvince:function(t){console.log("........... tim kiem thanh pho : ",t),""!==t&&(this.provinces_search=this.provinces.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.provinces_search.length&&(this.provice_loading=!1))},onSearchDistrict:function(t){""!==t&&(this.districts_search=this.districts.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.districts_search.length&&(this.district_loading=!1))},onSearchWard:function(t){""!==t&&(this.wards_search=this.wards.filter((function(e){var i=e.viettel_name.toLowerCase();return i.indexOf(t.toLowerCase())>-1})),this.wards_search.length&&(this.ward_loading=!1))},requestDetail:function(){var t=this;this.id&&(this.loadingTable=!0,W.get_supplier_info(this.shopId).then((function(e){var i=e.error,s=e.data;console.log("............. chi tiet nha cung cap : ",JSON.stringify(e)),t.loadingTable=!1,0===i&&(t.detail=s,t.setInfo(s))})).catch((function(e){console.log(".................. co loi ",e),t.loadingTable=!1})))},onShowDialogShopDetail:function(t){this.url_image=t,this.showDialogShopDetail=!0},handleClickButtonDialogDetail:function(t){this.showDialogShopDetail=t.dialog,t.reload&&this.$emit("onClickButtonReload")},handleClickDialogShop:function(t){console.log("--------------------------------dialog",t),this.onShowDialog=t.dialog,t.reload},onResetSearch:function(){}}},V=E,H=(i("b9173"),Object(u["a"])(V,A,R,!1,null,"0977128c",null)),G=H.exports,Q=new n["a"],K={name:"ScreenDetail",components:{PersonContactVue:f,PickupAddress:C,PersonRepresentative:P,ContractInfo:B,SupplierInfoVue:G},props:{show:{type:Boolean,default:!1}},data:function(){var t=Object(o["a"])();return{is_delete:t.is_delete,is_write:t.is_write,is_edit:t.is_edit,data:[],loadingTable:!1,objectShop:{},isAdd:!0,onShowDialog:!1,provinces:[],url_image:"",contain:"contain",showDialogShopDetail:!1,showDialogDetail:!1,shopDetail:{},isNew:!1,shopId:0}},created:function(){var t=this.$route.query;t&&t.shop_id?(this.shopId=parseInt(t.shop_id),this.getRequestDetail(),this.provinces.length||this.requestListProvinces()):this.isNew=!0},methods:{onStatisticalPress:function(){this.$router.push({path:"/detail_statistical?shop_id=".concat(this.shopId)})},onBack:function(){this.$refs.refSupplierInfo&&this.$refs.refSupplierInfo.resetData(),this.$refs.refPickup&&this.$refs.refPickup.resetData(),this.$refs.refContact&&this.$refs.refContact.resetData(),this.$refs.refRepresnetative&&this.$refs.refRepresnetative.resetData(),this.$router.back()},checkPhoneNumber:function(t){var e=/([\+84|84|0]+(3|5|7|8|9|1[2|6|8|9]))+([0-9]{8,9})\b/;return e.test(t)},onConfirmPress:function(){var t=this,e={};if(this.$refs.refSupplierInfo){var i=this.$refs.refSupplierInfo.getInfo();if(!i)return this.$msgbox("Bạn phải nhập đầy đủ thông tin nhà cung cấp");if(!this.checkPhoneNumber(i.phone))return this.$msgbox("Số điện thoại không hợp lệ");e.supplier_info=i}if(this.$refs.refPickup){var s=this.$refs.refPickup.getPickupInfo();s&&(e.pickup_info=s)}if(this.$refs.refContact){var a=this.$refs.refContact.getContactInfo();a&&(e.contact_info=a)}if(this.$refs.refRepresnetative){var n=this.$refs.refRepresnetative.getPersonInfo();n&&(e.representative_info=n)}Object.keys(e).length&&this.$confirm("Bạn có chắc muốn tạo mới nhà cung cấp này?").then((function(i){Q.create_general_supplier(e).then((function(e){var i=e.error,s=e.msg;console.log("........... tao moi nha cung cap ",JSON.stringify(e)),0===i?t.$msgbox(s).then((function(e){t.onBack(!0)})):t.$msgbox(s)})).catch((function(e){console.log(".......... tao don co loi ",e),t.loadingTable=!1,t.$msgbox("Có lỗi xảy ra, vui lòng quay lại sau!")}))})).catch((function(t){}))},onCancelPress:function(){this.onBack()},requestListProvinces:function(){var t=this;this.loadingTable=!0,console.log(".........list tinh/thanh pho"),Q.getProvinceList().then((function(e){t.loadingTable=!1;var i=e.error,s=e.data;0===i&&(t.provinces=s)})).catch((function(e){console.log("............ list tinh thanh: ",e),t.loadingTable=!1}))},getRequestDetail:function(){var t=this;this.shopId&&(this.loadingTable=!0,Q.detail(this.shopId).then((function(e){var i=e.error,s=e.info;console.log("............. chi tiet nha cung cap : ",JSON.stringify(e)),t.loadingTable=!1,0===i&&(t.shopDetail=s,t.$refs.refSupplierInfo&&t.$refs.refSupplierInfo.setInfo(s),t.$refs.refPickup&&t.$refs.refPickup.setData(s.pickup_address),t.$refs.refContact&&t.$refs.refContact.requestDetailContact(),t.$refs.refRepresnetative&&t.$refs.refRepresnetative.setId(s.representative_person_id),t.$refs.refContractInfo&&t.$refs.refContractInfo.requestListContractActive())})).catch((function(e){console.log(".................. co loi ",e),t.loadingTable=!1})))},onShowDialogShopDetail:function(t){this.url_image=t,this.showDialogShopDetail=!0},handleClickButtonDialogDetail:function(t){this.showDialogShopDetail=t.dialog,t.reload&&this.$emit("onClickButtonReload")},onShowDialogCreate:function(){this.isAdd=!0,this.onShowDialog=!0,this.objectShop={}},onResetSearch:function(){}}},X=K,Y=(i("9049"),Object(u["a"])(X,s,a,!1,null,"0df77a99",null));e["default"]=Y.exports},fa7d:function(t,e,i){"use strict";i.d(e,"f",(function(){return a})),i.d(e,"d",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"e",(function(){return l})),i.d(e,"g",(function(){return c})),i.d(e,"a",(function(){return d}));i("99af");var s=i("a27e");function a(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-1);var e=new Date;return e.setHours(23),e.setMinutes(59),e.setSeconds(50),e.setDate(e.getDate()-1),[t.getTime(),e.getTime()]}function n(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=Date.now();return[t.getTime(),e]}function o(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(1);var e=Date.now();return[t.getTime(),e]}function r(){var t=a(),e=new Date(t[0]);e.setDate(e.getDate()-7);var i=new Date(t[1]);return i.setDate(i.getDate()-7),[e.getTime(),i.getTime()]}function l(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-7);var e=Date.now();return[t.getTime(),e]}function c(t){return!isNaN(new Date(t))}function d(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{Object(s["a"])({url:"https://shop.vcallid.com/api/public/supplier/get_permisson_menu?email=".concat(t,"&menu_id=").concat(e),method:"get"}).then((function(t){var e=t.error,s=t.data;0===e&&i&&i(s)})).catch((function(t){a&&a(t)}))}catch(n){}}}}]);