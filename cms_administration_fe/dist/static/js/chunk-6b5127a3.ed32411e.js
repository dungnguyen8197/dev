(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b5127a3"],{"0df4":function(e,t,a){"use strict";a("eac1")},"0eb6":function(e,t,a){"use strict";var n=a("23e7"),r=a("7c37"),o=a("d066"),i=a("d039"),s=a("7c73"),c=a("5c6c"),l=a("9bf2").f,u=a("cb2d"),d=a("edd0"),f=a("1a2d"),h=a("19aa"),m=a("825a"),p=a("aa1f"),g=a("e391"),b=a("cf98"),v=a("0d26"),_=a("69f3"),y=a("83ab"),w=a("c430"),R="DOMException",E="DATA_CLONE_ERR",k=o("Error"),D=o(R)||function(){try{var e=o("MessageChannel")||r("worker_threads").MessageChannel;(new e).port1.postMessage(new WeakMap)}catch(t){if(t.name===E&&25===t.code)return t.constructor}}(),O=D&&D.prototype,T=k.prototype,x=_.set,S=_.getterFor(R),C="stack"in new k(R),A=function(e){return f(b,e)&&b[e].m?b[e].c:0},I=function(){h(this,j);var e=arguments.length,t=g(e<1?void 0:arguments[0]),a=g(e<2?void 0:arguments[1],"Error"),n=A(a);if(x(this,{type:R,name:a,message:t,code:n}),y||(this.name=a,this.message=t,this.code=n),C){var r=new k(t);r.name=R,l(this,"stack",c(1,v(r.stack,1)))}},j=I.prototype=s(T),q=function(e){return{enumerable:!0,configurable:!0,get:e}},N=function(e){return q((function(){return S(this)[e]}))};y&&(d(j,"code",N("code")),d(j,"message",N("message")),d(j,"name",N("name"))),l(j,"constructor",c(1,I));var B=i((function(){return!(new D instanceof k)})),M=B||i((function(){return T.toString!==p||"2: 1"!==String(new D(1,2))})),$=B||i((function(){return 25!==new D(1,"DataCloneError").code})),L=B||25!==D[E]||25!==O[E],F=w?M||$||L:B;n({global:!0,constructor:!0,forced:F},{DOMException:F?I:D});var z=o(R),U=z.prototype;for(var Q in M&&(w||D===z)&&u(U,"toString",p),$&&y&&D===z&&d(U,"code",q((function(){return A(m(this).name)}))),b)if(f(b,Q)){var P=b[Q],H=P.s,G=c(6,P.c);f(z,H)||l(z,H,G),f(U,H)||l(U,H,G)}},"12d6":function(e,t,a){},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function c(e,t,a){var n=s(),r=e-n,c=20,l=0;t="undefined"===typeof t?500:t;var u=function e(){l+=c;var s=Math.easeInOutQuad(l,n,r,t);i(s),l<t?o(e):a&&"function"===typeof a&&a()};u()}var l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,15]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&c(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&c(0,800)}}},u=l,d=(a("0df4"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,"2f2d1216",null);t["a"]=f.exports},"5f88":function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"brand-page"}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"20px","margin-bottom":"10px"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("p",{staticStyle:{"margin-right":"15px","margin-bottom":"0px"},on:{click:e.onBack}},[t("i",{staticClass:"el-icon-back"})]),t("h3",{staticStyle:{margin:"0px"}},[e._v("Quản lý thương hiệu")])]),t("div",[e.is_write?t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",loading:e.loadingAddBrand},on:{click:e.handleAddBrand}},[e._v(" Thêm mới ")]):e._e(),t("el-button",{attrs:{icon:"el-icon-refresh",loading:e.loadingLoadingRefresh},on:{click:e.handleButtonRefresh}},[e._v(" Làm mới ")])],1)]),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-input",{staticStyle:{width:"500px"},attrs:{type:"text",rows:2,placeholder:"Nhập để tìm kiếm"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[t("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t("el-select",{staticStyle:{"margin-left":"10px",width:"500px"},attrs:{placeholder:"Tìm kiếm"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.searchOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchBrand}},[e._v("Tìm kiếm")]),t("el-select",{staticStyle:{"margin-left":"10px",width:"400px"},attrs:{placeholder:"Trạng thái"},model:{value:e.filterState,callback:function(t){e.filterState=t},expression:"filterState"}},e._l(e.stateOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.showAddBrandDialog?t("DialogAddBrand",{key:e.keyAddDialog,attrs:{"show-dialog":e.showAddBrandDialog}}):e._e()],1),t("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"brand-table-id"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,align:"center",border:""}},[t("el-table-column",{attrs:{prop:"code",label:"Mã thương hiệu",width:"180",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"Tên thương hiệu",align:"center"}}),t("el-table-column",{attrs:{prop:"state",label:"Trạng thái",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:1===a.row.active?"success":"danger"}},[e._v(e._s(a.row.state))])]}}])}),t("el-table-column",{attrs:{prop:"action",label:"Hành động",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return e.is_edit?[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.handleEdit(a.row)}}})]:void 0}}],null,!0)})],1),t("el-row",[t("pagination",{attrs:{total:e.total,limit:e.listQuery.limit,page:e.listQuery.page},on:{"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},"update:page":function(t){return e.$set(e.listQuery,"page",t)},pagination:e.getList}})],1),e.showDialog?t("DialogEditBrand",{attrs:{"object-data":e.objectRow,"show-dialog":e.showDialog}}):e._e()],1)])},r=[],o=(a("ac1f"),a("5319"),a("e9c4"),a("d3b7"),a("d81d"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.dialog.titleName,visible:e.showDialog,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.objectData}},[t("el-form-item",[t("label",[e._v(e._s("Tên thương hiệu")),t("span",{staticStyle:{color:"red"}},[e._v("*")])]),t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{prop:"name",placeholder:"Tên thương hiệu"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.name,callback:function(t){e.$set(e.formRequest,"name",t)},expression:"formRequest.name"}})],1)],1),t("el-form-item",{attrs:{label:"Trạng thái"}},[t("el-form-item",{attrs:{prop:"state"}},[t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.formRequest.state,callback:function(t){e.$set(e.formRequest,"state",t)},expression:"formRequest.state"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("Hủy")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:function(t){return e.onSubmitForm("ruleForm")}}},[e._v(e._s(e.dialog.buttonName))])],1)],1)}),i=[],s=a("c7eb"),c=a("1da1"),l=a("61f7"),u=a("d4ec"),d=a("bee2"),f=a("262e"),h=a("2caf"),m=a("6c6e"),p=a("a27e"),g="https://shop.vcallid.com/api/public",b=function(e){Object(f["a"])(a,e);var t=Object(h["a"])(a);function a(){return Object(u["a"])(this,a),t.call(this,"")}return Object(d["a"])(a,[{key:"listBrand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:10};return Object(p["a"])({baseURL:"https://shop.vcallid.com/api/public",url:"".concat(this.uri,"/trademark/list"),method:"get",params:e})}},{key:"uploadImage",value:function(e){return Object(p["a"])({url:g+"/post_cdn",method:"post",data:e})}},{key:"addBrand",value:function(e){return Object(p["a"])({url:g+"/trademark/create",method:"post",data:e})}},{key:"editBrand",value:function(e){return Object(p["a"])({url:g+"/trademark/update",method:"post",data:e})}},{key:"updateActiveBrand",value:function(e){return Object(p["a"])({url:g+"/trademark/change_active",method:"post",data:e})}}]),a}(m["a"]),v=new b,_={name:"DialogAddBrand",components:{},props:{objectData:{type:Object,default:function(){return{}}},showDialog:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1}},data:function(){var e=this;return{rules:{name:[{validator:function(t,a,n){return Object(l["q"])(t,e.formRequest.name,n,"Tên thương hiệu")},trigger:"change"}]},loadingSubmit:!1,dialogLoading:!1,formRequest:{state:!1},request:{},dialog:{titleName:"Thêm mới thương hiệu",buttonName:"Thêm mới"},keyImage:[],isUploadImage:!0,isUploadImageCover:!0}},watch:{showDialog:function(e){console.log(e),e||this.resetformRequest()}},created:function(){},beforeDestroy:function(){this.$root.$off("update_brand_avatar")},methods:{onSubmitForm:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(a){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a&&(t.formRequest.active=t.formRequest.state?1:0,console.log("create brand:",t.formRequest),v.addBrand(t.formRequest).then((function(e){t.$root.$emit("update-brand-and-refresh-table"),t.$message.success("Thêm mới thương hiệu thành công"),t.handleClose()})).catch((function(e){console.log(e),t.$message.error("Thêm mới thương hiệu thất bại")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},resetformRequest:function(){this.formRequest={state:!1}},handleClose:function(){this.showDialog=!1,this.$parent.$emit("hide-add-brand-dialog")}}},y=_,w=(a("7792"),a("2877")),R=Object(w["a"])(y,o,i,!1,null,"6d964708",null),E=R.exports,k=a("5f87"),D=a("fa7d"),O=a("333d"),T=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.dialog.titleName,visible:e.showDialog,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.formRequest}},[t("el-form-item",[t("label",[e._v(e._s("Mã thương hiệu")),t("span",{staticStyle:{color:"red"}},[e._v("*")])]),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{prop:"code",placeholder:"Mã thương hiệu",disabled:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.code,callback:function(t){e.$set(e.formRequest,"code",t)},expression:"formRequest.code"}})],1)],1),t("el-form-item",[t("label",[e._v(e._s("Tên thương hiệu")),t("span",{staticStyle:{color:"red"}},[e._v("*")])]),t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{prop:"name",placeholder:"Tên thương hiệu"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmitForm("ruleForm")}},model:{value:e.formRequest.name,callback:function(t){e.$set(e.formRequest,"name",t)},expression:"formRequest.name"}})],1)],1),t("div",{attrs:{label:"Logo"}},[t("label",[e._v("Logo")]),t("UploadCropImage",{ref:"crop_component",attrs:{"img-default":e.formRequest.image}})],1),t("el-form-item",{attrs:{label:"Trạng thái"}},[t("el-form-item",{attrs:{prop:"state"}},[t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.formRequest.state,callback:function(t){e.$set(e.formRequest,"state",t)},expression:"formRequest.state"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelConfirm}},[e._v("Hủy")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:function(t){return e.onSubmitForm("ruleForm")}}},[e._v(e._s(e.dialog.buttonName))])],1)],1)},x=[],S=a("5530"),C=function(){var e=this,t=e._self._c;return t("div",[t("el-link",{attrs:{underline:!1},on:{click:e.onChangeAvatarClick}},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.brand_avatar,fit:"contain"},on:{error:function(t){t.target.src=e.defaultLogo}}})],1),t("my-upload",{ref:"refCrop",attrs:{"model-value":e.isShowCrop,field:"img",width:300,height:300,"img-format":"png","lang-type":"en",type:"file",accept:"image/*",url:e.urlBaseApi},on:{change:e.selectedFile,"crop-success":e.cropSuccess,"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail,"update:modelValue":e.offDialogUpload}})],1)},A=[],I=(a("99af"),a("81b2"),a("0eb6"),a("b7ef"),a("8bd4"),a("ace4"),a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("986a"),a("1d02"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("6ce5"),a("2834"),a("72f7"),a("4ea1"),a("d9e2"),a("4bac")),j="https://shop.vcallid.com/api/public",q=new b,N=5e6,B=500,M=300,$={name:"UploadCropImage",components:{"my-upload":I["a"]},props:{isShowCrop:{type:Boolean,default:!1},imgDefault:{type:String,default:""}},data:function(){return{brand_avatar:"",is_new_avatar:!1,image:{size:0,width:0,height:0},imageError:"",defaultLogo:"https://vcallid.s3.ap-southeast-1.amazonaws.com/defaul.png",urlBaseApi:"".concat(j,"/post_cdn")}},created:function(){var e=this;this.$on("handle_add_new_brand",(function(){e.handle_update_image_s3()}))},mounted:function(){this.imgDefault&&(this.brand_avatar=this.imgDefault)},methods:{selectedFile:function(){var e=this;this.imageError="";var t=this.$refs.refCrop.files.pop();if(console.log("..............chon file la : ",t),t&&0===t.type.indexOf("image/"))if(this.image.size=t.size,this.image.size>N)this.imageError="The image size (".concat(this.image.size,") is too much (max is ").concat(N,").");else{var a=new FileReader;a.readAsDataURL(t),a.onload=function(t){var a=new Image;a.onload=function(){e.image.width=a.width,e.image.height=a.height,console.log(e.image),e.image.width>B?e.imageError="The image width (".concat(e.image.width,") is too much (max is ").concat(B,")."):e.image.height>M&&(e.imageError="The image height (".concat(e.image.height,") is too much (max is ").concat(M,")."))},a.src=t.target.result},a.onerror=function(e){console.error(e)}}},handleUploadImageSuccess:function(e,t){console.log("..............upload image success",e,t)},onChangeAvatarClick:function(){this.isShowCrop=!0},offDialogUpload:function(e){console.log("........................off popup",e),this.isShowCrop=e},cropSuccess:function(e,t){console.log("-------- crop success --------",t),this.isShowCrop=!1,this.brand_avatar=e,this.is_new_avatar=!0},cropUploadSuccess:function(e,t){console.log("-------- upload success --------"),console.log(e),console.log("field: "+t)},cropUploadFail:function(e,t){console.log("-------- upload fail --------"),console.log(e),console.log("field: "+t)},trigger_error:function(e){this.$message({showClose:!0,message:e,type:"error"})},convert_base64:function(e){for(var t=e.replace(/^data:image\/\w+;base64,/,""),a=atob(t),n=new Array(a.length),r=0;r<a.length;r++)n[r]=a.charCodeAt(r);var o=new Uint8Array(n);return o},handle_update_image_s3:function(){var e=this;if(this.is_new_avatar){var t=new Blob([this.convert_base64(this.brand_avatar)],{type:"image/jpeg"}),a=new FormData;a.append("image",t,"image.jpg"),q.uploadImage(a).then((function(e){if(console.log(e,"............upload image"),0===e.error)return e.name;throw new Error("Failed to upload image")})).then((function(t){console.log("emitting update_brand_avatar",t),e.$root.$emit("update_brand_avatar",t),e.brand_avatar=t})).catch((function(t){console.error("Error uploading image:",t),e.trigger_error("An error occur"),e.$root.$emit("update_brand_avatar",e.imgDefault?e.imgDefault:null)}))}else this.$root.$emit("update_brand_avatar",this.imgDefault?this.imgDefault:null)}}},L=$,F=(a("a2c3"),Object(w["a"])(L,C,A,!1,null,"129ea932",null)),z=F.exports,U=new b,Q={name:"DialogEditBrand",components:{UploadCropImage:z},props:{objectData:{type:Object,default:function(){return{}}},showDialog:{type:Boolean,default:!0}},data:function(){var e=this;return{rules:{name:[{validator:function(t,a,n){return Object(l["q"])(t,e.formRequest.name,n,"Tên thương hiệu")},trigger:"change"}]},loadingSubmit:!1,dialogLoading:!1,formRequest:{},request:{},dialog:{titleName:"Cập nhật thông tin thương hiệu",buttonName:"Cập nhật"},listImage:[],keyImage:[],isUploadImage:!0,isUploadImageCover:!0}},watch:{},mounted:function(){this.formRequest=Object(S["a"])({},this.objectData),this.formRequest.state=!!this.objectData.active,console.log(this.formRequest,"formRequest")},created:function(){var e=this;this.$root.$on("update_brand_avatar",(function(t){e.formRequest.image=t||null,e.formRequest.active=e.formRequest.state?1:0,U.updateActiveBrand(e.formRequest).then((function(t){U.editBrand(e.formRequest).then((function(t){console.log(e.formRequest,"formRequest"),e.$message.success("Cập nhật thương hiệu thành công"),e.handleClose(),e.$root.$emit("update-brand-and-refresh-table")}))})).catch((function(t){console.log(t),e.handleClose(),e.$message.error("Cập nhật thương hiệu thất bại")}))}))},beforeDestroy:function(){this.$root.$off("update_brand_avatar")},methods:{onSubmitForm:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(a){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a&&t.editConfirm();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},handleClose:function(){this.showDialog=!1,this.$parent.$emit("hide-edit-brand-dialog")},cancelConfirm:function(){var e=this;this.$confirm("Các chỉnh sửa sẽ không được lưu. Bạn có chắc chắn muốn tiếp tục ?","Xác nhận hủy chỉnh sửa?",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy",type:"warning"}).then((function(){e.handleClose()})).catch((function(){console.log("cancel")}))},editConfirm:function(){var e=this;this.$confirm("Các thông tin sẽ được cập nhật. Bạn có chắc chắn muốn lưu các thay đổi ?","Xác nhận thay đổi thông tin?",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy",type:"warning"}).then((function(){e.$refs["crop_component"].$emit("handle_add_new_brand")})).catch((function(){console.log("cancel")}))}}},P=Q,H=(a("f864"),Object(w["a"])(P,T,x,!1,null,"7ac1d921",null)),G=H.exports,V=new b,W={components:{DialogAddBrand:E,Pagination:O["a"],DialogEditBrand:G},data:function(){return{loadingLoadingRefresh:!1,loadingAddBrand:!1,refreshTimes:0,dataSearch:"",showAddBrandDialog:!1,keyAddDialog:0,is_write:0,is_edit:0,is_delete:0,is_view:0,defaultLogo:"https://vcallid.s3.ap-southeast-1.amazonaws.com/defaul.png",loading:!1,total:1,listQuery:{page:1,limit:10,q:"",active:0},tableData:[],showDialog:!1,objectRow:{},contain:"contain",filterState:0,filterOject:{state:0,searchType:2,searchText:""},stateOption:[{id:0,name:"Trạng thái(Tất cả)"},{id:2,name:"Hoạt động"},{id:1,name:"Tạm dừng"}],searchOption:[{id:2,name:"Tìm theo tên thương hiệu"},{id:1,name:"Tìm theo mã thương hiệu"}],searchText:"",searchType:1}},watch:{filterState:function(e){console.log(".............thay doi trang thai ",e),this.listQuery.active=e,this.getList()}},created:function(){var e=this;this.$on("hide-edit-brand-dialog",(function(){e.showDialog=!1})),this.$root.$on("update-brand-and-refresh-table",(function(){e.getList()})),this.$on("loading-table",(function(t){e.loadingLoadingRefresh=t})),this.$on("hide-add-brand-dialog",(function(){e.keyAddDialog+=1,e.showAddBrandDialog=!1})),this.requestListPermissionMenu()},methods:{onBack:function(){window.history.back()},requestListPermissionMenu:function(){var e=this,t=this.$router.history.current.meta.roles,a=t&&t.length?t[0]:0;a=parseInt(a.replace("NCC",""));var n=Object(k["a"])(),r=n.email;Object(D["a"])(r,a,(function(t){if(console.log("............list data 1",JSON.stringify(t)),t){var a=t.is_supper_admin,n=t.is_add,r=t.is_view,o=t.is_edit,i=t.is_delete,s=t.is_export;a=parseInt(a)||0,n=parseInt(n)||1,r=parseInt(r)||1,o=parseInt(o)||1,i=parseInt(i)||1,s=parseInt(s)||1,e.is_delete=a?1:i-1,e.is_write=a?1:n-1,e.is_edit=a?1:o-1,e.is_export=a?1:s-1,e.is_view=a?1:r-1,e.getList()}}))},searchBrand:function(){this.listQuery.q=this.searchText,this.listQuery.type_filter=this.searchType,this.getList()},getList:function(){var e=this;this.is_view&&(this.loading=!0,V.listBrand(this.listQuery).then((function(t){var a=t.error,n=t.list;0===a&&(1===e.listQuery.page&&(e.total=t.total),e.tableData=n.map((function(e){return{id:e.id,showImage:e.image,code:"TH"+e.id,image:e.image,name:e.name,active:e.active,state:e.active?"Hoạt động":"Tạm dừng"}})))})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1,e.$parent.$emit("loading-table",!1)})))},handleImageError:function(e){e.showImage=!1},handleEdit:function(e){this.showDialog=!0,this.objectRow=e},handleButton:function(){console.log("handleButton")},handleButtonRefresh:function(){this.listQuery.page=1,this.listQuery.active=0,this.listQuery.q="",this.searchText="",this.searchType=1,this.filterState=0,this.getList()},handleAddBrand:function(){this.showAddBrandDialog=!0}}},X=W,K=(a("6c0f"),Object(w["a"])(X,n,r,!1,null,"71e9bf4f",null));t["default"]=K.exports},"6c0f":function(e,t,a){"use strict";a("12d6")},"6c6e":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("d4ec"),r=a("bee2"),o=a("b775"),i=function(){function e(t){Object(n["a"])(this,e),this.uri=t}return Object(r["a"])(e,[{key:"list",value:function(e){return Object(o["a"])({url:"/"+this.uri,method:"get",params:e})}},{key:"get",value:function(e){return Object(o["a"])({url:"/"+this.uri+"/"+e,method:"get"})}},{key:"store",value:function(e){return Object(o["a"])({url:"/"+this.uri,method:"post",data:e})}},{key:"update",value:function(e,t){return Object(o["a"])({url:"/"+this.uri+"/"+e,method:"put",data:t})}},{key:"destroy",value:function(e){return Object(o["a"])({url:"/"+this.uri+"/"+e,method:"delete"})}}]),e}()},"738e":function(e,t,a){},7792:function(e,t,a){"use strict";a("b3aa")},"7c37":function(e,t,a){"use strict";var n=a("605d");e.exports=function(e){try{if(n)return Function('return require("'+e+'")')()}catch(t){}}},"81b2":function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),o=a("d066"),i=a("e330"),s=a("c65b"),c=a("d039"),l=a("577e"),u=a("1a2d"),d=a("d6d6"),f=a("b917").ctoi,h=/[^\d+/a-z]/i,m=/[\t\n\f\r ]+/g,p=/[=]{1,2}$/,g=o("atob"),b=String.fromCharCode,v=i("".charAt),_=i("".replace),y=i(h.exec),w=c((function(){return""!==g(" ")})),R=!c((function(){g("a")})),E=!w&&!R&&!c((function(){g()})),k=!w&&!R&&1!==g.length;n({global:!0,bind:!0,enumerable:!0,forced:w||R||E||k},{atob:function(e){if(d(arguments.length,1),E||k)return s(g,r,e);var t,a,n=_(l(e),m,""),i="",c=0,w=0;if(n.length%4===0&&(n=_(n,p,"")),n.length%4===1||y(h,n))throw new(o("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(t=v(n,c++))u(f,t)&&(a=w%4?64*a+f[t]:f[t],w++%4&&(i+=b(255&a>>(-2*w&6))));return i}})},"8bd4":function(e,t,a){"use strict";var n=a("d066"),r=a("d44e"),o="DOMException";r(n(o),o)},a27e:function(e,t,a){"use strict";var n=a("c7eb"),r=a("1da1"),o=(a("d3b7"),a("bc3a")),i=a.n(o),s=a("5c96"),c=a("4360"),l=a("5f87"),u="https://prod-wap-wghn-beta.vcallid.com",d=i.a.create({baseURL:u,headers:{Authorization:Object(l["f"])(),auththor:Object(l["d"])(),"X-Token":Object(l["d"])(),"Access-Control-Allow-Origin":"*"},timeout:18e4});d.interceptors.request.use((function(e){e.headers.Authorization=Object(l["f"])(),e.headers["X-Token"]=Object(l["d"])();var t="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaWF0IjoxNjc4MzMzNDY4fQ.d5WWQAGWF_TCPkvWa0ieclauQAlLierkNKGDCDfbDk5Cd-X98bLV7usneU2jXEu_cqjbJFerDRCky255aLElQLpxHmn_66tcgbTZqa5GRumTDqO4JOmgWd5vE0zRPx3xdfFPG0fILPEAA2_5bIGc4Mzd_FHMr9hqTKOn4TKxgBsCW0z9KNfO-2xevEP_gFi7xauUkdG5KUbG3UAr4sEr1s9Kfhz7H5F_lyIR99TfqV-45E4x4Av0tao2nxt5Nc16z201zjpd9OaHibpIGI1pcCkwORYQpH5pqoanO9alsYkNwyEPZbMCfenY95pD16GTswQwNlCGVmGHnSkkXF1SkBV4_rWt-J6fX1VGjq61nqr6yGm_JXvK3R_DMUN5GIZ_xC4BE6WOZQcF1SseMJalbBJKdFlRz0DpW4rsblr5Ge7KVI4ugPQFRV5PaEL6y_wx65-K8DyFYWwbFVG_YZJqzt7mVgSVZftx1yTaSYoUoAeD8FJ-zVPupv93ZM3y7Q3ybwvwZBj6KI-R9VuXlsLFWAqt7bWcUMXExhDeENGWMbgwF3YdJzG947_KzSkRsEsXK7ZOUKp7ihE3wLxQIueIyITQfmgvuG-AvtDqiffFfjbTP5e8DOLvloP2keIS1v252nZyr3i9pEBqm10KEmCx0krhQHjz5sdJStIenVtKospeB8tBjSbyCW5t0-RRo8vQOg40Jn-ySKnnBGW_jYMTy3hadbAxAQc4IprphQmvuFuVaO4YK4wNB_dEtbzAYSLpfm9vTk9eX0f95tleguH6QjEG8siA4znsMUf2SLdQNKcTniOEHp5hGcKV0gRX63zIC7X9dClOINwg3wYh6ecyXg";return e.headers.token=t,c["a"].getters.token,e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use(function(){var e=Object(r["a"])(Object(n["a"])().mark((function e(t){var a,r,o,c;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.data,0===a.error_code){e.next=26;break}if(console.log(a.error_code),403!==a.error_code){e.next=6;break}return s["Message"].error(a.error_msg||"Có lỗi xảy ra vui lòng thử lại sau"),e.abrupt("return");case 6:if(498!==a.error_code){e.next=9;break}return f(),e.abrupt("return");case 9:if(401!==a.error_code){e.next=23;break}return r=Object(l["d"])(),e.next=13,d.post("/admin/token",{refresh_token:r});case 13:if(o=e.sent,0!==o.error_code){e.next=22;break}return c=t.config,c._retry=!0,i.a.defaults.headers.common["Authorization"]="Bearer "+o.data.token,Object(l["q"])(o.data.token),e.abrupt("return",d(c));case 22:f();case 23:return e.abrupt("return",a);case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return s["Message"].error(e.message||"Có lỗi xảy ra vui lòng thử lại sau"),Promise.reject(e)}));var f=function(){s["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){return c["a"].dispatch("user/resetToken").then((function(){return location.reload()}))}))};t["a"]=d},a2c3:function(e,t,a){"use strict";a("738e")},aa1f:function(e,t,a){"use strict";var n=a("83ab"),r=a("d039"),o=a("825a"),i=a("7c73"),s=a("e391"),c=Error.prototype.toString,l=r((function(){if(n){var e=i(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==c.call(e))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));e.exports=l?function(){var e=o(this),t=s(e.name,"Error"),a=s(e.message);return t?a?t+": "+a:t:a}:c},b3aa:function(e,t,a){},b7ef:function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),o=a("d066"),i=a("5c6c"),s=a("9bf2").f,c=a("1a2d"),l=a("19aa"),u=a("7156"),d=a("e391"),f=a("cf98"),h=a("0d26"),m=a("83ab"),p=a("c430"),g="DOMException",b=o("Error"),v=o(g),_=function(){l(this,y);var e=arguments.length,t=d(e<1?void 0:arguments[0]),a=d(e<2?void 0:arguments[1],"Error"),n=new v(t,a),r=new b(t);return r.name=g,s(n,"stack",i(1,h(r.stack,1))),u(n,this,_),n},y=_.prototype=v.prototype,w="stack"in new b(g),R="stack"in new v(1,2),E=v&&m&&Object.getOwnPropertyDescriptor(r,g),k=!!E&&!(E.writable&&E.configurable),D=w&&!k&&!R;n({global:!0,constructor:!0,forced:p||D},{DOMException:D?_:v});var O=o(g),T=O.prototype;if(T.constructor!==O)for(var x in p||s(T,"constructor",i(1,O)),f)if(c(f,x)){var S=f[x],C=S.s;c(O,C)||s(O,C,i(6,S.c))}},b917:function(e,t,a){"use strict";for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={},o=0;o<66;o++)r[n.charAt(o)]=o;e.exports={itoc:n,ctoi:r}},cf98:function(e,t,a){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e8ea:function(e,t,a){},eac1:function(e,t,a){},f748:function(e,t,a){"use strict";e.exports=Math.sign||function(e){var t=+e;return 0===t||t!==t?t:t<0?-1:1}},f864:function(e,t,a){"use strict";a("e8ea")},fa7d:function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return u}));a("99af");var n=a("a27e");function r(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setDate(e.getDate()-1);var t=new Date;return t.setHours(23),t.setMinutes(59),t.setSeconds(50),t.setDate(t.getDate()-1),[e.getTime(),t.getTime()]}function o(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0);var t=Date.now();return[e.getTime(),t]}function i(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setDate(1);var t=Date.now();return[e.getTime(),t]}function s(){var e=r(),t=new Date(e[0]);t.setDate(t.getDate()-7);var a=new Date(e[1]);return a.setDate(a.getDate()-7),[t.getTime(),a.getTime()]}function c(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setDate(e.getDate()-7);var t=Date.now();return[e.getTime(),t]}function l(e){return!isNaN(new Date(e))}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{Object(n["a"])({url:"https://shop.vcallid.com/api/public/supplier/get_permisson_menu?email=".concat(e,"&menu_id=").concat(t),method:"get"}).then((function(e){var t=e.error,n=e.data;0===t&&a&&a(n)})).catch((function(e){r&&r(e)}))}catch(o){}}}}]);