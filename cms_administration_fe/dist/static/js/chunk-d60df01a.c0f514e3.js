(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d60df01a"],{"0419":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=(a("99af"),a("6c6e")),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u="https://parter_dev.vcallid.com/api/v1/cms-stb",d="https://api-payment-prod.vcallid.com/api/v1/paymenthub";console.log("URL_API_PAYMENT_HUB_________",d);var p=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"booking-pax")}return Object(l["a"])(a,[{key:"listBill",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/list-bill"),method:"post",data:e})}},{key:"detailBill",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/detail-bill"),method:"post",data:e})}},{key:"searchTeeTime",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/search-tee"),method:"post",data:e})}},{key:"listTeeTime",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/list-tee"),method:"post",data:e})}},{key:"createBooking",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/create-booking"),method:"post",data:e})}},{key:"updateBooking",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-bill"),method:"post",data:e})}},{key:"removeBooking",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/remove-bill"),method:"post",data:e})}},{key:"updateLockPax",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-lock-pax"),method:"post",data:e})}},{key:"updateLockPaxMultiple",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/updateLockPaxMultiple"),method:"post",data:e})}},{key:"searchOtherService",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/search-product"),method:"get",params:e})}},{key:"detailProduct",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/detail-product"),method:"get",params:e})}},{key:"searchInsurance",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/get-list-insurance"),method:"get",params:e})}},{key:"checkTimeMoneyInsurance",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/check-time-money-insurance"),method:"post",data:e})}},{key:"billConfirm",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/confirm-bill"),method:"post",data:e})}},{key:"mapUserByPhone",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/map-user-by-phone"),method:"post",data:e})}},{key:"createMiSaVoucher",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/create-misa-voucher"),method:"post",data:e})}},{key:"confirmPaymentBill",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/comfirm-payment-general-bill"),method:"post",data:e})}},{key:"updatePricePax",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/sale-pax"),method:"post",data:e})}},{key:"getCardByUser",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/get-card-by-user"),method:"post",data:e})}},{key:"getBookingDayDebt",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/check-day-debt-by-admin"),method:"post",data:e})}},{key:"getWarningBookingDayDebt",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/warning-day-debt-by-admin"),method:"post",data:e})}},{key:"updateAccountant",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-accountant"),method:"post",data:e})}},{key:"sendMailFacility",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/send-mail-facility"),method:"post",data:e})}},{key:"sendMailSacombank",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/send-mail-sacombank"),method:"post",data:e})}},{key:"exportBill",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/export-bill"),method:"post",data:e})}},{key:"getDetailCodePaymentBooking",value:function(e){return Object(r["a"])({url:"https://api-other-services.vcallid.com/api/v1/other_services/list_transaction_booking_by_pax",method:"post",data:e})}},{key:"createCodePaymentBooking",value:function(e,t){return Object(r["a"])({url:"https://api-booking-v2.vcallid.com/api/v1/payment_booking/create_payment_booking_for_cms?"+t,method:"post",data:e})}},{key:"listCategory",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/list-category"),method:"get",params:e})}},{key:"updateCategory",value:function(e,t){return Object(r["a"])({url:"".concat(this.uri,"/update-category/").concat(t),method:"post",data:e})}},{key:"createCategory",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/create-category"),method:"post",data:e})}},{key:"listDataUser",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/list-data-user"),method:"get",params:e})}},{key:"listRequestOrder",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/list-request-order"),method:"get",params:e})}},{key:"updateStatusConfirmRequest",value:function(e,t){return Object(r["a"])({url:"".concat(this.uri,"/update-status-confirm-request/").concat(t),method:"post",data:e})}},{key:"listHistoryLog",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/list-history-log"),method:"get",params:e})}},{key:"detailHistoryLog",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/detail-history-log"),method:"get",params:e})}},{key:"listPaymentPoint",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/list-payment-point"),method:"post",data:e})}},{key:"updateStatisticBill",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-statistic-bill"),method:"post",data:e})}},{key:"updateBookedSurchargeEntryPrice",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-booked-surcharge-entry-price"),method:"post",data:e})}},{key:"updateSuplierBill",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-supplier-bill"),method:"post",data:e})}},{key:"confirmExpense",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/confirm-expense"),method:"post",data:e})}},{key:"updatePaymentServiceChildStatistic",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-payment-service-child-statistic"),method:"post",data:e})}},{key:"updatePaymentBillCodePaymnet",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-payment-bill-code-payment"),method:"post",data:e})}},{key:"updateDataJson",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update-data-json"),method:"post",data:e})}},{key:"searchAgentNew",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/search-agent"),method:"get",params:e})}},{key:"createInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/create-insurance"),method:"post",data:e})}},{key:"getFacilityCanBuyInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-facility-can-buy-insurance"),method:"get",params:e})}},{key:"getListsPriceByHoleInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-list-price-by-hole-insurance"),method:"get",params:e})}},{key:"getGolferByIdInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-golfer-by-id-insurance"),method:"get",params:e})}},{key:"onCheckGolferId",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/check-golfer-id-cms"),method:"post",data:e})}},{key:"onCheckGolferPassport",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/check-golfer-passport-cms"),method:"post",data:e})}},{key:"onCheckGolferSoldInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/check-golfer-sold-insurance"),method:"post",data:e})}},{key:"getListsOptionsMember",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-list-option-member"),method:"get",params:e})}},{key:"getDetailInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-detail-insurance-cms"),method:"get",params:e})}},{key:"onGetHoleSelectInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-hole-insurance-cms"),method:"get",params:e})}},{key:"onUpdateOrCreateMember",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/create-member-insurance-cms"),method:"post",data:e})}},{key:"onDeleteMemberInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/delete-member-insurance-cms"),method:"post",data:e})}},{key:"onCreateUserNameInsuranceOut",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/create-member-insurance-out-cms"),method:"post",data:e})}},{key:"onGetMemberInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-member-insurance-cms"),method:"get",params:e})}},{key:"updateInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/update-insurance"),method:"post",data:e})}},{key:"viewCertificateInsurance",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-certificate-cms"),method:"get",params:e})}},{key:"getDetailBillCore",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/get-detail-bill-core"),method:"get",params:e})}},{key:"getCardByUserSTB",value:function(e){return Object(r["a"])({url:"".concat(u,"/get_list_free_golf"),method:"get",params:e})}},{key:"createCodePaymentGeneralBill",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/create-code-payment-general-bill"),method:"post",data:e})}},{key:"getDetailCodePaymentGeneralBill",value:function(e){return Object(r["a"])({url:"https://api-payment-prod.vcallid.com/api/v1/paymenthub/get_code_payment_by_bill",method:"post",data:e})}},{key:"getFacilitySTB",value:function(e){return Object(r["a"])({url:"".concat(u,"/get_location_id"),method:"get",params:e})}},{key:"listBillSearchArrayGB",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/list-bill-search-array-GB"),method:"post",data:e})}},{key:"addProviderToTransactionMoneyIn",value:function(e){return Object(r["a"])({url:"".concat(this.uri,"/add-provider-to-transaction-money-in"),method:"post",data:e})}},{key:"clearCodePaymentStatus",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/clear-code-payment-status"),method:"post",data:e})}},{key:"getRevenueBillBySale",value:function(e){return Object(r["a"])({url:d+"/get_revenue_bill",method:"post",data:e})}},{key:"getDataCompanyByTaxCode",value:function(e){return Object(r["a"])({url:"https://api-payment-prod.vcallid.com/api/v1/misa/get_data_company_by_tax_code",method:"post",data:e})}},{key:"get_account_object",value:function(e){return Object(r["a"])({url:"https://api-payment-prod.vcallid.com/api/v1/misa/get_account_object",method:"post",data:e})}},{key:"warningTeetimeByAdmin",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/warning-teetime-by-admin"),method:"post",data:e})}},{key:"updateDateDebt",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/update_date_debt"),method:"post",data:e})}}]),a}(s["a"])},"097c":function(e,t,a){"use strict";a("6b5b")},"0abd":function(e,t,a){},1:function(e,t){},10:function(e,t){},11:function(e,t){},1122:function(e,t,a){"use strict";a("13fe")},12:function(e,t){},13:function(e,t){},"13fe":function(e,t,a){},14:function(e,t){},15:function(e,t){},"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("a4d3"),a("b64b");function i(e,t){if(null==e)return{};var a,i,l={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(l[a]=e[a]);return l}function l(e,t){if(null==e)return{};var a,l,n=i(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}},16:function(e,t){},17:function(e,t){},2:function(e,t){},"26ed":function(e,t,a){var i=a("7ec2").default,l=a("7037").default,n=a("c973").default,o=a("63748").default;a("4e82"),a("b64b"),a("a15b"),a("14d9"),a("e9c4"),a("d3b7"),a("25f0");var s=a("1c46"),r="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAvxHbc0hp99ruk6JnHBI97c7xDefM206eV7kOVHofNHvT/pJr\n+bQxtjD6M1OI56MT4ytgY8x0M/ecq3Gc1JtMWzv2VK6fa9OGtR105LaDxhndV7Ss\nJTErbVpzlIR/X6W8VSZ/ujCSQt5GXznJXP/avrQM+o8thTVDDEBEmfEv5h38juz1\nL//lCBrL4KXRCvyb1nk1GvGBcA+mHCKRSGv22a9PsWRNjveTveY8VBFBlj8jkrL1\nOQ0QCl+tRajIaFOadNYx3S+KTxAYSjYS+vUQuKh7qufNWQmwpAcbDsGHLvuyNNGA\nDMMLG8jqJ22H/WY0MEjd4Rf+CTvNlRx3UryKywIDAQABAoIBAHlVy7hP2gtt2mei\nkDwBUZZ8/hNIio0SRfeLKxB2ZO6dXCijrzHpPlBmldyWRbBjnTN7zkBSC9Ecgz9U\nbLWO0VR2pZ1tLwv4TekiBaNgTBo3Ppp9v3v2148gC5na8lA5HXotcps4UQlpweKi\n/b6zM6Q7Dqrm1Y9sHWHgRjBEO5izg6148yd8u4zosLgtTW9A02R3qfhxojNcKKkj\nFHINkPXljhWbHVPCu+Gtf6EbIipUTlI5ZzdsRf4pFrAuzlBSljDuj5g1GXppQl0o\nnbAl+nH/AYkMcXig5Wy8GiNQWeTOJI+IlYkmDEgeNa7dZiWyUEzsw/y068NquyXV\naNeObaECgYEA9nQFE9JpH6MduXkybfhcPqe2XEetW6vf6G6lzbag2CFf9NHruIbO\n6MQ1fs7hUgsYV+uyPyPckZdwy5rGLVSrVYg7xAy3vK6hGKLFzHMqbpZulIpdoQ6h\nEXfFSaV47W8PbSQcQtW2OS82RsNmnyYgBmwgR3Or91LJgfgF1WFuiukCgYEAxnif\nEjDlJ8dbWOQvL1/x+VQkOtZrBOBCHtvCFyHtjFARny5MF07+2rS9SwGPO/5o18qh\n05dQkd8pqDIBVYMixee9OqgGnG66PDQoyyUwqmBea02tYRLTBk5QHsv4XpF0519W\ncVqn26RXsuW8jDv3WF/AmjUe6X4S76yvM9FyL5MCgYAQfWjNj7mK7V4Sx+Iw63o4\nkv4npIAb7x8XLTgY0Ixoiasi9VzBRvvXJTGzH2KCG83wLAwMH3kloK1iYiO6arzg\nBzKAhp1QmZqbzGBRsq73IUea1rs3CISMZ6giqliyAklU8yKU8jm0D82g5HgcU++2\nnkt2nG24Kajj8lVplpBP6QKBgGfNBkUZVYBsf5YKIbOBVqi0HQ64vdgbAfnpraUz\nlW3hIpZCPIGkSx5PkQD9m9AgyuyxidmENhtUwBC7tn7myvT+srVO08ZVEwoRrZQx\nqzYwmLE+OwOeOMf/hV/WBdxP7vhjoG5An7H8TfG+vdIKOt75lV4Rkk1EJts7UZak\nYDgJAoGBAIG/jcoAOzOUCubRDZ/1aAfyBMiP9DFMz1ql4bKMgsWo83EIo/GEtHyC\n4E7P4vVSDAGI8BuZClil8J4Vv4HplBVo3Kb3BomsRWeJnQ4H2G0k0fScowAK/0+F\nqmomlkPn8kh86SqqE3R0EiNTVIvJ56Fs6i4EG208Z/BijY3AShwm\n-----END RSA PRIVATE KEY-----",c="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAgwEoTCHm3dqxZDAQj07GNszIHW+M1Ec5kXjB7f8nBrCB1SQh\nBpNofq/Han7rz/cUrvYA6m55BYf589IVnt5E7hmLFlz/q0PY6JHDywDPWjibuWKx\n8LVYYM6yo7mP/oOIW2Kjpc29jZVwAaEuBZq7QIL1c4oFXkO3LOP78f2//rNdEj3M\nhCsKaMIDPsXddw2dCVAzxBGrp4Eqkz3pr0iNLLLXHa66ZOfvtXLi3ejBvuqgHxhF\n7aZUW87OOSDVA69fNXBqQKi7M9gXMFT6qj5qdz7gLEZNS0cHeCpwLiZbPoVCHcow\nRU5kwLIZUfQa/d+QlSQK5BtrwNE2EftYlUwmPwIDAQABAoIBAAvCf9aNuIazyfa/\nZc0neh2TNmeGCvNHTYCkgWwW2m78SztR2fEYLGoq51DFAfASMvYduSlSL2TyttpP\nQoeXVkK1YknooT7DgWYnJ5dChFqJ+Fik5mpALSXLiDewQZ/MOOJTMXOBy4E5J+vN\nhy8Tm7mHx/bOLfsvQvMxp/0qFSEM4ahKo7zdF7FYf7Wlcvu/hxKxspz4S9jrEzjA\nEtvTHfo3o9wSxSDAl54CREaL9yDWCdqSuPk8P/thw/ygeh3alkMTRoBvZApDbpJw\nLxBbiiRYBcm5D0P2rZHWA/cS1wgmtgr40FhBIleaCJwNn58iBdyuEcWEfDpLLYGV\n+FSR2IkCgYEA0EY9V/O27gwkH3LMxSDII6FpgnK+dkevyhFTT12/7npE6J55FZ0L\ncflC1IR1d/rYU/YTHrpa3ijZI8GGaJ+dEejjD37EmWI3uYiT85Q/JK+z5T8CUEBQ\nzCEUjm1TuRNYq1RtpUsI32owB8y1IH9qPgc9qWnEdH3P1ut1BB7PwR0CgYEAoQYg\nC80fA6tqGrTnLtNmHlGhnuG2YzrgeH3xlQ69JsEneiZS9tPiOBWo+PKzUCvZFqdG\ntO5mhMrs/YVKUrPZB+guxVa3xPjxkogsLw2HaPHgQ6bdVik1FowmCN6YfhhMvQG4\nTXzXAn/JpEskn1cXrY66zWnhOYuHDyLkadlNIgsCgYEAhHRXKOsu6F9CTdnFjoyV\nm8tYfYSZykE288xm7i+SE4kg78tw+CTjFX3PWbZPupkGIQd7C2y6w1S5G3tFDp6L\n1ssENGOLhnynMdBBP4SFT8CKKP4Ua5Mrj1Zua1HuD+LU3kkYXinFH8i5eQxgGKXP\nnFkghvBj5y3oEye1SISL3aUCgYA+LntZk1CSvjMvNQTBlGku9B8Rl+Ay2Z2tahVM\nlnB88sIn7XzETHZjahniaPbN0uD2Wop3fEiipyp1jG9zGHiLESJemmpE6k1/ZI6L\nbRIJeL494cY/a5JQrrZRXoRMzV1076EYa0ksceSQSWRPE/bU0vVYNbb/3d29/p9u\nMLgUmQKBgFwh52FzBNY48qCJQsidzgdDv5IOfLIi7ydeAcba6D5yDeSImBHj9oA5\nRYiAjCcGHJ2zq1j4LnAa3QNDBaAUkwYGqmEMxljZhMBBIH3aOLastaFQTuT5v1fA\nr1trm3HRrPlqKZridvZgdhf8hNeEjoaSc1GE56oPABxafBO23Nty\n-----END RSA PRIVATE KEY-----";function u(e){try{var t,a=Object.keys(e).sort(),i=[],l=o(a);try{for(l.s();!(t=l.n()).done;){var n=t.value;i.push(e[n])}}catch(d){l.e(d)}finally{l.f()}var c=i.join("|");console.log(c);var u=s.createSign("RSA-SHA256").update(c);return u.sign(r,"base64")}catch(p){return console.log(p.message),null}}function d(e){return p.apply(this,arguments)}function p(){return p=n(i().mark((function e(t){var a,n,r,u,d,p,h,_,m;return i().wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,t=JSON.parse(JSON.stringify(t)),a=Object.keys(t).sort(),n=[],r=o(a);try{for(r.s();!(u=r.n()).done;)d=u.value,"object"===l(t[d])&&t[d]?n.push(JSON.stringify(t[d])):n.push(t[d])}catch(i){r.e(i)}finally{r.f()}return p=n.join("|"),h=s.createSign("RSA-SHA256").update(p),_=h.sign(c),m=_.toString("base64"),e.abrupt("return",m);case 13:return e.prev=13,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),p.apply(this,arguments)}e.exports={create_signature:u,create_signature_hub:d}},3:function(e,t){},"3c5e":function(e,t,a){"use strict";a("43d0")},4:function(e,t){},"43d0":function(e,t,a){},"4ec9":function(e,t,a){"use strict";a("6f48")},5:function(e,t){},"51b1":function(e,t,a){"use strict";a("7255")},"524b":function(e,t,a){},"536c":function(e,t,a){"use strict";a.r(t);a("b64b");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reservation_booking app-container"},[t("div",{staticClass:"col-md-12"},[t("el-row",{staticClass:"list-account__header mb-10"},[t("el-col",{attrs:{sm:24}},[t("h3",{staticClass:"title"},[e._v("Quản lý doanh thu sale")]),t("h5",{staticStyle:{margin:"0","text-align":"center",width:"100%",padding:"10px",color:"red"}},[e._v(" "+e._s("TỔNG TIỀN THEO THÁNG: ".concat(e.formatNumber(e.total_money)," VNĐ"))+" ")])])],1),t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",{staticClass:"mr-10",attrs:{sm:12,md:4,lg:4}},[t("label",{staticClass:"w-100"},[e._v("Mã bill")]),t("el-input",{staticClass:"w-100",attrs:{clearable:"",placeholder:"Nhập mã bill hoặc mã thanh toán"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.listQuery.code_key,callback:function(t){e.$set(e.listQuery,"code_key",t)},expression:"listQuery.code_key"}})],1),t("el-col",{staticClass:"mr-10",attrs:{sm:22,md:6,lg:6}},[t("label",{staticClass:"w-100"},[e._v("Ngày tạo")]),t("el-date-picker",{staticClass:"daterange",attrs:{format:"dd/MM/yyyy HH:mm:ss",type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},model:{value:e.DateRangeCreated,callback:function(t){e.DateRangeCreated=t},expression:"DateRangeCreated"}})],1)],1),t("el-row",[t("el-col",{staticClass:"pt-10",attrs:{sm:5}},[t("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" Tìm kiếm ")])],1),t("el-col",{staticClass:"pt-10",attrs:{sm:5}},[t("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download",loading:e.loadingExportExcel},on:{click:e.handleExportExcel}},[e._v(" Xuất Excel ")])],1)],1)],1),t("div",{staticClass:"clearfix-20"}),t("el-row",{staticClass:"list-account__data"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:"STT",width:"50",align:"center",type:"index",index:e.handleIndexMethod}}),t("el-table-column",{attrs:{width:"100",prop:"bill_code",label:"Mã bill",align:"center"}}),t("el-table-column",{attrs:{width:"100",prop:"general_bill_id",label:"Code",align:"center"}}),t("el-table-column",{attrs:{width:"100",label:"Code Booking",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.key?a.key.codeBooking:"")+" ")]}}])}),t("el-table-column",{attrs:{width:"100",label:"Sân",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.key?a.key.facility_name:"")+" ")]}}])}),t("el-table-column",{attrs:{width:"100",label:"HIO",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return e._l(i.hio,(function(a,i){return t("el-tag",{key:i},[e._v(" "+e._s(a)+" ")])}))}}])}),t("el-table-column",{attrs:{width:"100",label:"OUT",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return e._l(i.out,(function(a,i){return t("el-tag",{key:i},[e._v(" "+e._s(a)+" ")])}))}}])}),t("el-table-column",{attrs:{width:"100",label:"Tổng tiền",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.formatNumber(a.payment_amount))+" đ ")]}}])}),t("el-table-column",{attrs:{width:"100",label:"VID Thanh toán",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" VID"+e._s(a.user_id)+" ")]}}])}),t("el-table-column",{attrs:{width:"100",label:"Admin tạo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.handleAdmin(a.admin_id))+" ")]}}])}),t("el-table-column",{attrs:{width:"100",prop:"created_at",label:"Ngày tạo",align:"center"}}),t("el-table-column",{attrs:{width:"100",label:"Ngày chơi",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i,l,n=a.row;return[null!==(i=JSON.parse(n.data_json))&&void 0!==i&&i.pax?t("span",[e._v(" "+e._s(e.formatDate(null===(l=JSON.parse(n.data_json))||void 0===l||null===(l=l.pax)||void 0===l?void 0:l.date_played,"HH:mm:ss, DD-MM-YYYY"))+" ")]):e._e()]}}])}),t("el-table-column",{attrs:{width:"150",label:"TT xuất chứng từ",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-tag",{attrs:{type:e.color_status[i.misa_voucher_status]}},[e._v(e._s(e.voucher_status[i.misa_voucher_status]))])]}}])}),t("el-table-column",{attrs:{width:"150",prop:"status",label:"Trạng thái thanh toán",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[[1!==i.is_cancel?t("el-tag",{attrs:{type:e.color_status[i.status]}},[e._v(" "+e._s(e.status_bill[i.status])+" ")]):1===i.is_cancel?t("el-tag",{attrs:{type:"danger"}},[e._v(" Đã hủy ")]):e._e()]]}}])}),t("el-table-column",{attrs:{label:"Hành động"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[1!==(null===i||void 0===i?void 0:i.is_cancel)&&0!=i.status?t("el-button",{attrs:{type:"success",icon:"el-icon-info",round:"",size:"mini"},on:{click:function(t){return e.onShowStatistic(i)}}},[e._v("Quản lý thu ")]):e._e(),t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",round:"",size:"mini"},on:{click:function(t){return e.onShowDetail(i)}}},[e._v("Chi tiết ")])]}}])})],1),t("el-row",{staticClass:"list-shop__footer"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>e.listQuery.limit,expression:"total > listQuery.limit"}],attrs:{total:e.total,limit:e.listQuery.limit,"page-sizes":[10,20,30,50,100,200,300,500],page:e.listQuery.page},on:{"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},"update:page":function(t){return e.$set(e.listQuery,"page",t)},pagination:e.onGetLists}}),t("dialog-detail-bill",{attrs:{"list-agency":e.listAgency,"show-dialog":e.showDialogDetail,"list-insurrance":e.listInsurrance,"object-data":e.objectData},on:{clickButtonDialogDetail:e.handleClickDialogDetail}}),t("dialog-detail-other-service",{attrs:{"show-dialog":e.showDialogDetailService,"service-id":e.serviceId},on:{clickButtonDialogDetailService:e.handleClickDialogDetailService}}),t("export-voucher",{attrs:{"list-bill-export":e.multipleSelection,"dialog-visible":e.showVoucher},on:{onRemoveBillExport:e.handleRemoveBillExport,onClickButtonExportVoucher:e.handleClickButtonExportVoucher}}),t("dialog-confirm-payment",{attrs:{"dialog-visible":e.showDialogConfirmPayment,"object-data":e.objectDataV2},on:{onClickButtonConfirmPayment:e.handleClickButtonConfirmPayment}}),t("dialog-statistic",{attrs:{"show-dialog":e.showDialogStatistic,"object-data":e.objectDataStatistic,"list-insurrance":e.listInsurrance},on:{closeDialog:e.handleCloseDialog,openDialogDetailProduct:e.handleOpenDialogDetailProduct}}),t("dialog-input-price-bill",{attrs:{"show-dialog":e.showPriceInput,"object-data":e.objectDataPriceInput},on:{handleCloseDialog:e.handleCloseDialog}}),t("dialog-update-supplier",{attrs:{"show-dialog":e.showUpdateSupplier,"object-data":e.objectDataUpdateSupplier},on:{handleCloseDialog:e.handleCloseDialog}})],1)],1)],1)])},l=[],n=a("2909"),o=a("5530"),s=a("15fd"),r=(a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("14d9"),a("4de4"),a("caad"),a("2532"),a("99af"),a("7db0"),a("9911"),a("c1df")),c=a.n(r),u=a("333d"),d=function(){var e,t,a=this,i=a._self._c;return i("el-dialog",{attrs:{title:"Thông tin chi tiết",visible:a.showDialog,width:"95%","before-close":a.handleClose},on:{"update:visible":function(e){a.showDialog=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loadingDialog,expression:"loadingDialog"}],attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("el-row",{staticClass:"p-10 border-1 pb-10 mb-10"},[i("el-row",[i("el-col",{attrs:{xs:24,sm:16,md:12,lg:10,xl:10}},[i("el-radio-group",{model:{value:a.typeChooseBillSelect,callback:function(e){a.typeChooseBillSelect=e},expression:"typeChooseBillSelect"}},[i("el-radio",{attrs:{label:0}},[a._v(" Đơn bảo hiểm lẻ")]),i("el-radio",{attrs:{label:1}},[a._v(" Đơn booking")])],1)],1)],1),1===a.typeChooseBillSelect?i("el-row",[i("el-row",{staticClass:"dialog-add-golfer pb-10"},[i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Loại đơn")]),i("br"),i("el-select",{attrs:{disabled:"",label:"Loại đơn",placeholder:"Loại Đơn"},on:{change:a.changeOrderType},model:{value:a.postForm.order_type,callback:function(e){a.$set(a.postForm,"order_type",e)},expression:"postForm.order_type"}},a._l(a.order_type,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Người nhận hoàn tiền")]),i("br"),i("el-select",{attrs:{label:"Loại hoàn tiền",placeholder:"Loại hoàn tiền"},model:{value:a.postForm.type_refund,callback:function(e){a.$set(a.postForm,"type_refund",e)},expression:"postForm.type_refund"}},a._l(a.types,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),2===+a.postForm.order_type?i("div",{staticClass:"mt-10"},[i("search-user",{attrs:{"data-model":a.postForm.host_user_id>0?{_id:null===(e=a.postForm)||void 0===e?void 0:e.host_user_id,fullname:null===(t=a.postForm)||void 0===t||null===(t=t.host_user)||void 0===t?void 0:t.fullname}:{}},on:{"selection-changed-user":a.handleSelectionChangedUser}})],1):a._e()],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Loại hố")]),i("br"),i("el-select",{attrs:{disabled:"",placeholder:"Loại hố"},model:{value:a.postForm.type_hole,callback:function(e){a.$set(a.postForm,"type_hole",e)},expression:"postForm.type_hole"}},a._l(a.typeHole,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Sân")]),i("br"),i("el-select",{staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm sân golf","remote-method":a.onSearchFacility,loading:a.loadingSearchFacility},model:{value:a.facilityModel,callback:function(e){a.facilityModel=e},expression:"facilityModel"}},a._l(a.facilities,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Đường")]),i("br"),i("el-select",{attrs:{disabled:"",placeholder:"Chọn đường"},model:{value:a.postForm.path_id,callback:function(e){a.$set(a.postForm,"path_id",e)},expression:"postForm.path_id"}},a._l(a.paths,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Ngày")]),i("br"),i("el-date-picker",{attrs:{disabled:"","picker-options":a.pickerOption,type:"date",format:"dd/MM/yyyy","value-format":"dd-MM-yyyy",placeholder:"Chọn ngày"},model:{value:a.dayPlayedModel,callback:function(e){a.dayPlayedModel=e},expression:"dayPlayedModel"}})],1),a.isShowHIO?i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Bảo hiểm giải đấu")]),i("br"),i("el-select",{attrs:{disabled:"",clearable:"",placeholder:"Chọn bảo hiểm"},model:{value:a.postForm.insurance_pax,callback:function(e){a.$set(a.postForm,"insurance_pax",e)},expression:"postForm.insurance_pax"}},a._l(a.listInsurrance,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):a._e(),i("el-col",{staticClass:"p-10"},[i("el-button",{attrs:{disabled:"",type:"primary",size:"mini"},on:{click:a.searchTeeTime}},[a._v("Tìm Tee Time")])],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Teetime")]),i("br"),i("el-select",{ref:"selectPax",staticStyle:{width:"100%"},attrs:{disabled:"",clearable:"",filterable:"",placeholder:"Chọn Teetime"},on:{change:a.changePax},model:{value:a.postForm.pax_id,callback:function(e){a.$set(a.postForm,"pax_id",e)},expression:"postForm.pax_id"}},a._l(a.listPax,(function(e){return i("el-option",{key:e.id,class:[1==e.is_lock?"is-lock":""],attrs:{disabled:"",label:a.convertTimestampToDateTime(e.date_played,"HH:mm")+" - "+a.formatNumber(a.convertPriceHole(e,a.postForm.type_hole))+" đ/pax",value:e.id}},[i("span",{staticStyle:{float:"left"}},[a._v(a._s(a.convertTimestampToDateTime(e.date_played,"HH:mm")+" - "+a.formatNumber(a.convertPriceHole(e,a.postForm.type_hole))+" đ/pax"))]),1==e.is_lock&&e.booked.length<1?i("i",{staticClass:"el-icon-lock"}):a._e(),e.booked.length>0?i("span",{staticStyle:{"margin-left":"20px"}},[a._v(" Đã booked")]):a._e()])})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Đơn bill tổng cha")]),i("br"),i("el-select",{staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm mã Bill"},model:{value:a.postForm.parent_id,callback:function(e){a.$set(a.postForm,"parent_id",e)},expression:"postForm.parent_id"}},a._l(a.billSearch,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Tên Outing")]),i("br"),i("el-input",{attrs:{disabled:"",clearable:"",placeholder:"Nhập tên outing"},model:{value:a.postForm.bill_name,callback:function(e){a.$set(a.postForm,"bill_name",e)},expression:"postForm.bill_name"}})],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Code Booking liên quan")]),i("br"),i("el-input",{attrs:{disabled:"",clearable:"",placeholder:"Nhập code booking liên quan"},model:{value:a.postForm.code_booking_relate,callback:function(e){a.$set(a.postForm,"code_booking_relate",e)},expression:"postForm.code_booking_relate"}})],1)],1)],1):i("el-row",[i("el-row",{staticClass:"dialog-add-golfer pb-10"},[i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Tên giải đấu:")]),i("div",{staticClass:"clearfix-5"}),i("el-input",{staticClass:"w-100",attrs:{disabled:"",placeholder:"Nhập tên giải đấu"},model:{value:a.postForm.name_tour,callback:function(e){a.$set(a.postForm,"name_tour",e)},expression:"postForm.name_tour"}})],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v(" Chọn sân đánh ")]),i("br"),i("el-select",{staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Nhập tên sân","remote-method":a.onGetListFacilities,loading:a.loadingSearchFacility},model:{value:a.facilityModelHIO,callback:function(e){a.facilityModelHIO=e},expression:"facilityModelHIO"}},a._l(a.facilitiesHIO,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),1)],1),a.paths.length>0?[i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Chọn gói bảo hiểm muốn mua: "),i("span",{staticClass:"required"},[a._v("*")])]),i("div",{staticClass:"clearfix-5"}),i("el-select",{staticClass:"w-100",attrs:{disabled:"",placeholder:"Chọn gói bảo hiểm muốn mua"},model:{value:a.optionPricePackage,callback:function(e){a.optionPricePackage=e},expression:"optionPricePackage"}},a._l(a.prices,(function(e){return i("el-option",{key:e.value,staticClass:"option-insurance-prices",attrs:{label:e.label,value:e.value}})})),1)],1)]:a._e(),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:8}},[i("label",[a._v("Chọn Teetime: "),i("span",{staticClass:"required"},[a._v("*")])]),i("div",{staticClass:"clearfix-5"}),i("el-row",[i("el-col",{attrs:{sm:12}},[i("el-date-picker",{staticClass:"w-100",attrs:{disabled:"",type:"date",placeholder:"Chọn ngày chơi"},model:{value:a.datePlayed,callback:function(e){a.datePlayed=e},expression:"datePlayed"}})],1),i("el-col",{attrs:{sm:12}},[i("el-time-select",{staticClass:"w-100",attrs:{disabled:"","picker-options":a.timePickerOptions,placeholder:"Chọn giờ chơi"},model:{value:a.timePlayedHio,callback:function(e){a.timePlayedHio=e},expression:"timePlayedHio"}})],1)],1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Trạng thái gửi đơn PVI : "),i("span",{staticClass:"required"},[a._v("*")])]),i("div",{staticClass:"clearfix-5"}),i("el-select",{staticClass:"w-100",attrs:{disabled:"",placeholder:"Chọn trạng thái gửi đơn PVI"},model:{value:a.typeChoosePay,callback:function(e){a.typeChoosePay=e},expression:"typeChoosePay"}},a._l(a.optionsPay,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Chọn đại lý bán BH:")]),i("div",{staticClass:"clearfix-5"}),i("el-select",{staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"",placeholder:"Chọn đại lý","remote-method":a.onSearchAgent,loading:a.loadingSearchAgent},model:{value:a.agent,callback:function(e){a.agent=e},expression:"agent"}},a._l(a.agentInsurance,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Số lượng người tham gia giải đấu:")]),i("div",{staticClass:"clearfix-5"}),i("el-input",{staticClass:"w-100",attrs:{placeholder:"Số người tham gia",disabled:""},model:{value:a.number_user,callback:function(e){a.number_user=e},expression:"number_user"}})],1),i("el-col",{staticClass:"p-10",attrs:{xs:24,sm:12,md:8,lg:4,xl:4}},[i("label",[a._v("Xác nhận giải outing:")]),i("div",{staticClass:"clearfix-5"}),i("el-checkbox",{attrs:{disabled:"",label:"1"},model:{value:a.checked,callback:function(e){a.checked=e},expression:"checked"}},[a._v("Outing")])],1)],2)],1)],1),0===a.typeChooseBillSelect?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",{staticClass:"p-10 border-1 mb-10"},[i("el-row",{staticClass:"dialog-add-golfer"},[i("el-col",{attrs:{xs:24,sm:16,md:12,lg:10,xl:10}},[i("el-radio-group",{model:{value:a.isInsideVhandicap,callback:function(e){a.isInsideVhandicap=e},expression:"isInsideVhandicap"}},[i("el-radio",{attrs:{label:1}},[a._v(" Người chơi có mã VID")]),i("el-radio",{attrs:{label:0}},[a._v(" Người chơi ngoài hệ thống")])],1)],1),1===a.isInsideVhandicap?i("el-col",{staticClass:"mb-2"},[i("div",{staticClass:"clearfix-5"}),i("div",{staticClass:"search-golfer"},[i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm mã VID","remote-method":a.handleSearchGolfers,loading:a.loadingSearchUser},on:{change:a.onChangeGolferCreate},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onKeydownEnter.apply(null,arguments)}},model:{value:a.postFormHio.user_id,callback:function(e){a.$set(a.postFormHio,"user_id",e)},expression:"postFormHio.user_id"}},a._l(a.golferByInsurances,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]):a._e(),0===a.isInsideVhandicap?i("el-col",{staticClass:"mb-2"},[i("div",{staticClass:"clearfix-5"}),i("el-row",{staticStyle:{"padding-bottom":"10px"}},[i("el-col",{attrs:{sm:24}},[i("el-input",{attrs:{type:"text",placeholder:"Nhập họ và tên"},model:{value:a.postFormHio.name,callback:function(e){a.$set(a.postFormHio,"name",e)},expression:"postFormHio.name"}})],1)],1),i("el-row",{staticStyle:{"padding-bottom":"10px"}},[i("el-col",{attrs:{sm:24}},[i("el-input",{attrs:{type:"text",placeholder:"Nhập ID CCCD/Passport hoặc Ngày sinh"},model:{value:a.postFormHio.value_user,callback:function(e){a.$set(a.postFormHio,"value_user",e)},expression:"postFormHio.value_user"}})],1)],1),i("el-row",[i("el-col",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.getValuePass()}}},[a._v("Xác nhận thông tin")])],1)],1)],1):a._e()],1)],1),i("el-row",{staticClass:"lists-data-passport",staticStyle:{"padding-top":"20px","padding-left":"10px","padding-bottom":"20px"}},[i("label",[a._v("Danh sách golfer tham gia giải: "),i("span",{staticClass:"required"},[a._v("*")])]),i("div",{staticClass:"clearfix-5",staticStyle:{"padding-top":"20px"}}),a._l(a.listsPassports,(function(e){return i("el-col",{key:e.passport,staticClass:"pr-lg-5",attrs:{lg:8,md:8,sm:8}},[i("div",{staticClass:"block"},[i("el-row",{staticClass:"position-relative"},[i("el-col",{staticClass:"font-11",attrs:{sm:20,xs:22}},[i("el-col",{staticClass:"mb-1",staticStyle:{"padding-bottom":"10px"}},[a._v("KH: "),i("strong",[a._v(a._s(e.name))]),a._v(" - Cccd/Passport:"),i("strong",[a._v(a._s(e.passport))])])],1),i("div",{staticClass:"btn-remove-golfer"},[i("i",{staticClass:"el-icon-delete",on:{click:function(t){return a.onRemovePassport(e)}}})])],1)],1)])}))],2),i("el-row",{staticClass:"lists-data-golfer"},a._l(a.listsGolfers,(function(e){return i("el-col",{key:e.value,staticClass:"pr-lg-5",attrs:{lg:6,md:8,sm:8}},[i("div",{staticClass:"block"},[i("el-row",{staticClass:"position-relative"},[i("el-col",{attrs:{sm:6,xs:6}},[i("el-avatar-custom",{attrs:{"avatar-path":e.golfer.system_avatar_path,"avatar-path-default":e.golfer.system_avatar_default}})],1),i("el-col",{staticClass:"font-11",attrs:{sm:14,xs:16}},[i("el-col",{staticClass:"mb-1"},[i("strong",[a._v("Mã:")]),a._v(" VID"+a._s(e.golfer.id))]),i("el-col",{staticClass:"mb-1"},[i("strong",[a._v("Họ tên:")]),a._v(a._s(e.golfer.fullname))]),i("el-col",{staticClass:"mb-1"},[i("strong",[a._v("Nickname:")]),a._v(" "+a._s(e.golfer.nickname)+" ")])],1),i("div",{staticClass:"btn-remove-golfer"},[i("i",{staticClass:"el-icon-delete",on:{click:function(t){return a.onRemoveGofer(e)}}})])],1)],1)])})),1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:a.total>0,expression:"total>0"}],attrs:{total:a.total,page:a.listQuery.page,limit:a.listQuery.limit},on:{"update:page":function(e){return a.$set(a.listQuery,"page",e)},"update:limit":function(e){return a.$set(a.listQuery,"limit",e)},pagination:a.onGetList}}),a.listsGolferError.length>0?i("el-row",[i("el-col",{staticClass:"mb-5"},[i("label",{staticClass:"text-center"},[a._v("Danh sách golfer import lỗi")])]),a._l(a.listsGolferError,(function(e){return i("el-col",{key:e.value,staticClass:"pr-lg-5"},[i("el-col",{staticClass:"mb-1"},[i("strong",[a._v("Mã:")]),a._v(" vID"+a._s(e.golfer.id))])],1)}))],2):a._e(),i("el-row",{staticClass:"p-10 mb-10"},[i("el-col",{staticClass:"pr-10",attrs:{span:12}},[i("label",[a._v("Note:")]),i("el-input",{attrs:{type:"textarea",placeholder:"Note"},model:{value:a.postFormHio.note,callback:function(e){a.$set(a.postFormHio,"note",e)},expression:"postFormHio.note"}})],1)],1),i("el-button",{on:{click:a.handleClose}},[a._v("Hủy bỏ")]),i("el-button",{attrs:{type:"primary"},on:{click:a.onSubmitCreateHIO}},[a._v(" Tạo bảo hiểm ")])],1):i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",{staticClass:"p-10 border-1 mb-10"},[i("el-row",{staticClass:"dialog-add-golfer"},[i("el-col",{attrs:{xs:24,sm:16,md:12,lg:10,xl:10}},[i("el-radio-group",{model:{value:a.isInsideVhandicap,callback:function(e){a.isInsideVhandicap=e},expression:"isInsideVhandicap"}},[i("el-radio",{attrs:{label:1}},[a._v(" Người chơi có mã VID")]),i("el-radio",{attrs:{label:0}},[a._v(" Người chơi ngoài hệ thống")])],1)],1),i("el-col",{attrs:{xs:24,sm:{span:2,offset:4},md:{span:2,offset:6},lg:{span:2,offset:10},xl:{span:2,offset:14}}},[i("el-button",{attrs:{type:"primary"},on:{click:a.downloadTemplate}},[a._v("Tải file mẫu"),i("i",{staticClass:"el-icon-download el-icon-right"})])],1),i("el-col",{attrs:{xs:24,sm:2}},[i("el-upload",{ref:"upload",attrs:{action:"uploadURL","on-change":a.onChangeFileExcel,"auto-upload":!1,limit:1}},[i("el-button",{attrs:{type:"primary"}},[a._v("Import Golfer")])],1)],1),i("div",{staticClass:"clearfix-10"}),i("el-col",{directives:[{name:"show",rawName:"v-show",value:a.listGolfers.length>0,expression:"listGolfers.length > 0"}]},[i("el-col",[i("label",[a._v("Danh sách người chơi: ")])]),i("el-col",a._l(a.listGolfers,(function(e,t){return i("el-tag",{key:t,attrs:{"disable-transitions":!1}},[a._v(" "+a._s(-1==e.user_id?"(OUT) "+e.name_out_system:"VID".concat(e.user_id," - ")+e.name_out_system)+" ")])})),1)],1),i("div",{staticClass:"mb-10"}),i("el-col",[i("el-row",[0===a.isInsideVhandicap?i("el-col",[i("label",[a._v("Họ và tên:")]),i("el-col",[a.inputVisible?i("el-input",{ref:"saveTagInput",attrs:{placeholder:"Tên người chơi"},on:{blur:a.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleInputConfirm.apply(null,arguments)}},model:{value:a.inputValue,callback:function(e){a.inputValue=e},expression:"inputValue"}}):a._e()],1)],1):i("el-col",[i("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm mã VID","remote-method":a.onSearchGolfer,loading:a.loadingSearchUser},model:{value:a.golferModel,callback:function(e){a.golferModel=e},expression:"golferModel"}},a._l(a.users,(function(e){return i("el-option",{key:e.value,attrs:{label:"VID".concat(e.value," - ").concat(e.label),value:e}})})),1)],1)],1)],1),i("div",{staticClass:"clearfix-10"}),i("div",{staticClass:"clearfix-10"}),i("el-col",{directives:[{name:"show",rawName:"v-show",value:0===a.isBooking,expression:"isBooking === 0"}]},[i("el-col",{staticClass:"text-center"},[i("el-tag",{attrs:{type:"warning"}},[i("i",[a._v("Sân này hiện tại chưa mở bán gói tee time nào, vui lòng chọn sân khác")])])],1)],1)],1),a.listGolfers.length>0?i("el-row",{staticClass:"data-table-content table-responsive"},[i("span",{staticClass:"mb-20"},[i("b",[a._v("Danh sách Golfer: ")])]),i("table",{staticClass:"table table-bordered",staticStyle:{"vertical-align":"center"}},[i("thead",[i("tr",[i("th",{staticClass:"text-center col-3 vertical-middle",staticStyle:{"min-width":"180px"}},[a._v("Tên")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("SĐT")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("CCCD / Tên Trên CCCD")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Bảo hiểm")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Bảo hiểm giải")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Đại lý")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Loại thẻ SCB / Tặng bạn")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Phụ phí")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Thành tiền")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Hành động")])])]),i("tbody",a._l(a.listGolfers,(function(e,t){return i("tr",{key:t},[i("th",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a._v(" "+a._s("".concat(-1==e.user_id?"(OUT) "+e.name_out_system:"VID".concat(e.user_id," - ")+e.name_out_system))+" "),Boolean(e.is_deleted)?i("p",{staticStyle:{color:"red"}},[a._v("(Đã xóa - BH đã gửi PVI)")]):i("p",{staticStyle:{color:"red"}},[a._v(a._s(1===e.is_cancel?"(Đã hủy)":""))])]),i("td",[i("el-input",{attrs:{size:"mini",disabled:""},model:{value:a.listGolfers[t].phone,callback:function(e){a.$set(a.listGolfers[t],"phone",e)},expression:"listGolfers[key].phone"}})],1),i("td",[i("div",{staticClass:"mb-1"},[i("el-input",{attrs:{placeholder:"Nhập CCCD",size:"mini",disabled:""},model:{value:a.listGolfers[t].cccd,callback:function(e){a.$set(a.listGolfers[t],"cccd",e)},expression:"listGolfers[key].cccd"}})],1),i("div",[i("el-input",{attrs:{placeholder:"Tên trên CCCD",size:"mini",disabled:""},model:{value:a.listGolfers[t].name_cccd,callback:function(e){a.$set(a.listGolfers[t],"name_cccd",e)},expression:"listGolfers[key].name_cccd"}})],1)]),i("td",[i("el-select",{attrs:{disabled:"",clearable:"",multiple:"",filterable:"",placeholder:"Chọn Bảo hiểm",size:"mini"},model:{value:a.listGolfers[t].insurance_pax,callback:function(e){a.$set(a.listGolfers[t],"insurance_pax",e)},expression:"listGolfers[key].insurance_pax"}},a._l(a.listInsurrance,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("td",[i("el-select",{attrs:{disabled:"",placeholder:"Bảo hiểm giải",size:"mini"},model:{value:a.postForm.insurance_pax,callback:function(e){a.$set(a.postForm,"insurance_pax",e)},expression:"postForm.insurance_pax"}},a._l(a.listInsurrance,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("td",{staticClass:"col-3"},[i("el-select",{attrs:{size:"mini",disabled:"",clearable:"",filterable:"",placeholder:"Chọn Đại lý"},on:{change:function(e){return a.handleAgency(t)}},model:{value:a.listGolfers[t].agency_id,callback:function(e){a.$set(a.listGolfers[t],"agency_id",e)},expression:"listGolfers[key].agency_id"}},a._l(a.listAgency,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a.listGolfers[t].price_angency?i("div",{staticClass:"mt-1 word-break",staticStyle:{"font-style":"italic","font-size":"12px"}},[a._v(" Giá sân theo đại lý: "+a._s(a.formatNumber(a.listGolfers[t].price_angency))+" VND ")]):a._e()],1),i("td",{staticClass:"col-3"},[i("div",{staticClass:"mb-1"},[i("el-select",{attrs:{size:"mini",disabled:"",clearable:"",filterable:"",placeholder:"Chọn loại thẻ"},model:{value:a.listGolfers[t].type_card,callback:function(e){a.$set(a.listGolfers[t],"type_card",e)},expression:"listGolfers[key].type_card"}},a._l(a.listTypeCardSCB,(function(e){return i("el-option",{key:e.value+"-"+t+"-"+e.label,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"mb-1"},[i("el-input",{attrs:{disabled:"",size:"mini",placeholder:"Tặng bạn SCB"},model:{value:a.listGolfers[t].partner_number,callback:function(e){a.$set(a.listGolfers[t],"partner_number",e)},expression:"listGolfers[key].partner_number"}})],1),i("div",[i("el-input",{attrs:{disabled:"",size:"mini",placeholder:"Tên người đi cùng"},model:{value:a.listGolfers[t].note,callback:function(e){a.$set(a.listGolfers[t],"note",e)},expression:"listGolfers[key].note"}})],1)]),i("td",[i("el-select",{attrs:{size:"mini",disabled:"",clearable:"",multiple:"",filterable:"",placeholder:"Chọn Phụ phí"},model:{value:a.listGolfers[t].surcharge_facility_id,callback:function(e){a.$set(a.listGolfers[t],"surcharge_facility_id",e)},expression:"listGolfers[key].surcharge_facility_id"}},a._l(a.listSurcharge,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),i("td",{staticClass:"vertical-middle",staticStyle:{"text-align":"center"}},[i("span",[a._v(a._s(a.handlePriceByGolfer(t))+" đ")])]),i("td",{staticClass:"vertical-middle",staticStyle:{"text-align":"center"}})])})),0)])]):a._e()],1),a.listGolfers.length>0?i("el-row",{staticClass:"p-10 border-1 mb-10"},[i("el-row",{staticClass:"data-table-content table-responsive"},[i("label",[a._v("Danh sách Dịch vụ đi kèm")]),i("table",{staticClass:"table table-bordered"},[i("thead",[i("tr",[i("th",{staticClass:"text-center col-2 vertical-middle",staticStyle:{"min-width":"180px"}},[a._v("Tên dịch vụ")]),i("th",{staticClass:"text-center col-2",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Mã hàng")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Đơn giá")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Số lượng")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Thành tiền")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Đại lý")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Note")]),i("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[a._v("Hành động")])])]),i("tbody",[a.postForm.service.length>0?[a._l(a.postForm.service,(function(e,t){return["booking_new"!==e.type?i("tr",{key:t},[i("th",{staticClass:"col-2",staticStyle:{"vertical-align":"center"}},[i("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn dịch vụ",clearable:"",disabled:""},on:{change:function(e){return a.changeService(t)}},model:{value:a.postForm.service[t].id,callback:function(e){a.$set(a.postForm.service[t],"id",e)},expression:"postForm.service[key_service].id"}},a._l(a.listService,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("td",{staticClass:"col-2"},[-1!==a.postForm.service[t].id&&2!==a.postForm.service[t].id?i("el-select",{ref:"otherService",refInFor:!0,staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Tìm kiếm sản phẩm...","remote-method":a.onSearchOtherService,loading:a.loadingSearchProduct},on:{change:function(e){return a.changeProduct(t)}},model:{value:a.postForm.service[t].commodity_code_id,callback:function(e){a.$set(a.postForm.service[t],"commodity_code_id",e)},expression:"postForm.service[key_service].commodity_code_id"}},a._l(a.listOtherService,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name+" - "+a.formatNumber(e.price_sale)+"đ",value:e.id}})})),1):a._e(),2==a.postForm.service[t].id?i("el-select",{staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Nhập mã HIO...","remote-method":a.onSearchInsurrance,loading:a.loadingSearchInsurrance},on:{change:function(e){return a.changeHoleInOne(t)}},model:{value:a.postForm.service[t].hio_id,callback:function(e){a.$set(a.postForm.service[t],"hio_id",e)},expression:"postForm.service[key_service].hio_id"}},a._l(a.listHoleInOne,(function(e){return i("el-option",{key:e.id,attrs:{label:"BH"+e.id+" - "+a.formatNumber(e.total_pay)+"đ",value:e.id}})})),1):a._e(),-1==a.postForm.service[t].id?i("el-input",{attrs:{disabled:"",placeholder:"Nhập tên dịch vụ",clearable:""},model:{value:a.postForm.service[t].name_other_service,callback:function(e){a.$set(a.postForm.service[t],"name_other_service",e)},expression:"postForm.service[key_service].name_other_service"}}):a._e()],1),i("td",{staticClass:"text-center"},[i("el-input-number",{attrs:{disabled:"",min:1,step:5e4},model:{value:a.postForm.service[t].price,callback:function(e){a.$set(a.postForm.service[t],"price",e)},expression:"postForm.service[key_service].price"}})],1),i("td",{staticClass:"text-center"},[i("el-input-number",{attrs:{disabled:"",min:1,max:1e3,step:1},model:{value:a.postForm.service[t].quantity,callback:function(e){a.$set(a.postForm.service[t],"quantity",e)},expression:"postForm.service[key_service].quantity"}})],1),i("td",{staticClass:"vertical-middle text-center"},[i("span",[a._v(a._s(a.handlePriceService(t))+" đ")])]),i("td",{staticClass:"text-center"},[-1==a.postForm.service[t].id?i("el-select",{attrs:{size:"mini",clearable:"",disabled:"",filterable:"",placeholder:"Chọn Đại lý"},model:{value:a.postForm.service[t].agent_id,callback:function(e){a.$set(a.postForm.service[t],"agent_id",e)},expression:"postForm.service[key_service].agent_id"}},a._l(a.listAgency,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):a._e()],1),i("td",{staticClass:"vertical-middle text-center"},[i("el-input",{attrs:{disabled:"",type:"text",placeholder:"Note sản phẩm ngoài .",maxlength:"100","show-word-limit":""},model:{value:a.postForm.service[t].note,callback:function(e){a.$set(a.postForm.service[t],"note",e)},expression:"postForm.service[key_service].note"}})],1),i("td",{staticClass:"vertical-middle text-center"},[1!==+a.postForm.service[t].is_cancel?i("el-button",{attrs:{disabled:"",type:"danger",size:"mini"},on:{click:function(t){return a.handleCloseService(e)}}},[a._v("Xóa")]):i("p",{staticStyle:{color:"red"}},[a._v("Đã hủy")])],1)]):a._e()]}))]:i("tr",[i("td",{staticClass:"text-center",attrs:{colspan:"7"}},[a._v("Chưa có dịch vụ đi kèm")])])],2)])])],1):a._e(),a.listGolfers.length>0?i("el-row",{staticClass:"p-10 mb-10"},[i("el-col",{staticClass:"pr-10",attrs:{span:12}},[i("label",[a._v("Note nội bộ:")]),i("el-input",{attrs:{disabled:"",type:"textarea",placeholder:"Note Hiển thị nội bộ"},model:{value:a.postForm.note,callback:function(e){a.$set(a.postForm,"note",e)},expression:"postForm.note"}})],1),i("el-col",{staticClass:"pl-10",attrs:{span:12}},[i("label",[a._v("Note Hiển thị cho khách:")]),i("el-input",{attrs:{disabled:"",type:"textarea",placeholder:"Note Hiển thị cho khách"},model:{value:a.postForm.note_app,callback:function(e){a.$set(a.postForm,"note_app",e)},expression:"postForm.note_app"}})],1)],1):a._e(),i("el-dialog",{staticClass:"v-modal-list-vid-not-exits",attrs:{title:"Danh sách VID không tồn tại",width:"20%",visible:a.isShowGolferNotExist,"before-close":function(){a.isShowGolferNotExist=!1}},on:{"update:visible":function(e){a.isShowGolferNotExist=e}}},[i("el-table",{attrs:{data:a.dataVIDNotExist}},[i("el-table-column",{attrs:{property:"vid",label:"VID",width:"100"}})],1),i("el-button",{on:{click:function(){a.isShowGolferNotExist=!1}}},[a._v("Hủy bỏ")])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:a.handleClose}},[a._v("Hủy bỏ")])],1)],1)],1)])},p=[],h=a("53ca"),_=a("c7eb"),m=a("1da1"),f=(a("c740"),a("a434"),a("3ca3"),a("ddb0"),a("e9c4"),a("13d5"),a("25f0"),a("a15b"),a("bcc2")),v=a("9a76"),b=a("8ce5"),g=a("0419"),y=a("77a2"),x=a("61f7"),k=a("5f87"),C=a("e938"),w=a("5c96"),S=a("1146"),O=a("77c0"),j=a("81fe"),D=new b["a"],F=new v["a"],P=new g["a"],G=new y["a"],B=[{value:0,label:"Chưa xác nhận gửi PVI"},{value:1,label:"Xác nhận gửi PVI"}],I={name:"DialogAddGolfer",components:{ElAvatarCustom:O["a"],SearchUser:j["a"],Pagination:u["a"]},props:{showDialog:{type:Boolean,default:!1,value:!1},objectDataProduct:{type:Object,default:function(){return{}}},isAdd:{type:Boolean,default:!0},objectData:{type:Object,default:function(){return{}}},listInsurrance:{type:Array,default:function(){return[]}},listAgency:{type:Array,default:function(){return[]}}},data:function(){return{isShowGolferNotExist:!1,dataVIDNotExist:[],inputVisible:!1,inputVisibleHIO:!1,isShowChangePricePax:!1,isShowCard:!1,isInsideVhandicap:1,isShowHIO:!1,listGolfers:[],postForm:{dayPlayed:"",timePlayed:"",is_d20:0,pax:null,service:[],order_type:1,type_refund:"",host_user_id:null,host_user:{},path_id:null,total_price:0,type_hole:18,insurance_pax:0,insurance_pax_d20:1,note:"",code_booking_relate:""},postFormHio:{user_id:"",golfers:[],name_tour:"Outing",facility_id:"",path_id1:"",path_id2:"",date_played:"",options_member_id:6,options_money_id:"",total_pay:"",total_member:"",note:"",agent_id:8,is_outing:0,is_pay:0},loadingSearchUser:!1,loadingSearchFacility:!1,inputValue:"",inputValueHIO:"",golferModel:{},users:[],facilities:[],facilitiesHIO:[],facilityModel:{},dayPlayedModel:null,isBooking:-1,loadingSubmit:!1,tableData:[],listPax:[],baseUrl:"/",listHIO:C["listHIO"],listHoleInOne:[],listSurcharge:[],dataCardByUser:[],infoCardUser:{},listService:C["listService"],order_type:C["listOrderType"],paths:[],typeHole:C["listTypeHole"],dataPax:{},salePaxForm:{},loadingDialog:!1,fileExcel:null,listOtherService:[],loadingSearchProduct:!1,loadingSearchInsurrance:!1,showDialogDetailService:!1,loadingUpdatePricePax:!1,keyService:null,dialog:{titleName:"Tạo Bill",buttonName:"Thêm mới"},bill_id:null,pickerOption:{disabledDate:function(e){return e.getTime()<c()().subtract(2,"day")}},billSearch:[],listTypeCardSCB:C["LIST_TYPE_CARD_SCB"],listGolferBefore:[],list_hio:[],typeChooseBillSelect:1,datePlayed:new Date,timePickerOptions:{start:"04:00",step:"00:01",end:"21:00"},timePlayedHio:"07:00",typeChoosePay:"",optionsPay:[].concat(B),agent:"",agentInsurance:[],loadingSearchAgent:!1,optionPricePackage:{},prices:[],facilityModelHIO:{},listsGolfers:[],listsGolferError:[],passports:[],listsPassports:[],number_user:0,golferByInsurances:[],objectGolfer:{},dataPassport:[],dataGolfers:[],dataGolfersError:[],listQuery:{page:1,limit:200},total:0,checked:!1,types:[{value:"Miền bắc",label:"Miền bắc"},{value:"Miền trung",label:"Miền trung"},{value:"Miền nam",label:"Miền nam"}]}},computed:{checkDatePlayed:function(){if(this.postForm.pax_id&&this.postForm.dayPlayed){console.log(" this.postForm.dayPlayed",this.postForm.dayPlayed);var e=c()(this.postForm.dayPlayed,"DD-MM-YYYY").startOf("day"),t=c()().startOf("day");if(e.isBefore(t))return console.log(" ok đã vào đây"),!0}return!1}},watch:{golferModel:function(e){var t=this;return Object(m["a"])(Object(_["a"])().mark((function a(){var i,l;return Object(_["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.listGolfers.filter((function(t){return t.user_id===e.value})),!(i.length>0)){a.next=4;break}return t.$message.warning("VID đã được chọn."),a.abrupt("return");case 4:Object(x["b"])(e)||(l=[],console.log("listCardData_________________",l));case 5:case"end":return a.stop()}}),a)})))()},facilityModel:function(e){this.paths.length>0&&(this.paths=[],this.postForm.path_id=null),this.listPax.length>0&&(this.listPax=[],this.postForm.pax=null,this.postForm.pax_id=null),Object(x["b"])(e)||(this.paths=e.path,console.log("paths",this.paths),this.isBooking=e.booking,this.postForm.facility_id=e.value,this.postForm.facility_name=e.label,this.getListSurchargeFacility(e.value))},dayPlayedModel:function(e){this.listPax.length>0&&(this.listPax=[],this.postForm.pax=null,this.postForm.pax_id=null),Object(x["b"])(e)||(this.postForm.dayPlayed=e)},objectDataProduct:function(e){var t=this.postForm.service[this.keyService];e.remove_product?this.handleCloseService(t):(t.quantity=e.quantity,t.price=e.price,t.size=e.size||null,t.color=e.color||null,t.name_product=e.name_product,t.product=e.product,console.log("  this.postForm.service[this.key_service]................",this.postForm.service[this.keyService]))},objectData:function(e){console.log("..................value",e),Object(x["b"])(e)||(this.bill_id=e.general_bill_id,this.onGetDetail(e.general_bill_id))},isAdd:function(e){console.log("isAdd",e),this.dialog=e?Object.assign({},{titleName:"Tạo Booking Tee Time",buttonName:"Thêm mới"}):Object.assign({},{titleName:"Cập nhật Booking Tee Time",buttonName:"Cập nhật"})},datePlayed:function(e){if(null!==e){var t=new Date,a=t.toDateString();a=new Date(a);var i=new Date(e);if(a<=i){var l=this.handleConvertDatePlayed(e);this.postFormHio.date_played="".concat(l," ").concat(this.timePlayedHio)}else this.$message.warning("Vui lòng chọn ngày hơn ngày hiện tại!"),this.postFormHio.date_played=""}},timePlayedHio:function(e){var t=this.handleConvertDatePlayed(this.datePlayed);this.postFormHio.date_played="".concat(t," ").concat(e)},typeChoosePay:function(e){this.postFormHio.is_pay=e},optionsMemberModel:function(e){Object.keys(e).length>0&&(this.postFormHio.options_member_id=6)},optionPricePackage:function(e){"object"===Object(h["a"])(e)?this.postFormHio.options_money_id=e.value:this.postFormHio.options_money_id=e},dataGolfers:function(e){e.length>0&&(this.postFormHio.golfers=Object(n["a"])(e))},dataPassport:function(e){this.postFormHio.passport=Object(n["a"])(e)},facilityModelHIO:function(e){Object.keys(e).length>0&&(this.paths=e.paths,this.paths.length>1&&(this.postFormHio.path_id1=this.paths[0].id,this.postFormHio.path_id2=this.paths[1].id,this.pathModel2=this.paths[1].id),this.postFormHio.facility_id=e.value,this.onGetListPrices(this.postFormHio))},pathModel2:function(e){0!==e&&(this.postFormHio.path_id2=e)},objectGolfer:function(e){if(Object.keys(e).length>0){var t=this.dataGolfers.filter((function(t){return t.value===e.value}));0===t.length?this.dataGolfers.length<this.maxGolfer?(this.dataGolfers.push(e),this.onGetList()):this.$message.warning("Đã đủ số người khai báo!"):this.$message.warning("Người chơi đã tồn tại trong danh sách!")}},checked:function(e){e&&(console.log(e),this.postFormHio.is_outing=!0===e?1:0)}},created:function(){},methods:{onSubmitForm:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onSubmitAddGolfer:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onSubmitCreateHIO:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onSubmitUpdate:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},checkTimeMoneyInsurance:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},checkTimeMoneyInsuranceUpdate:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},validateFrom:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},onGetDetail:function(e){var t=this;return Object(m["a"])(Object(_["a"])().mark((function a(){var i,l,s,r,u,d,p,h,m,f,v,b,g,y,k,C,w,S,O,j,D,F,G;return Object(_["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingDialog=!0,a.next=3,P.detailBill({bill_id:e,all_service:!0});case 3:if(i=a.sent,console.log("res",i),0!==i.error_code){a.next=36;break}for(h=i.data,console.log("data.golfers___________",h.golfers),t.listGolferBefore=h.golfers,t.list_hio=null===h||void 0===h?void 0:h.list_hio,m=0;m<h.golfers.length;m++)f=h.golfers[m],v=f.booked,b=Object(o["a"])(Object(o["a"])({},f),{},{user_id:f.id,name_out_system:f.name,cccd:v&&v.booking_user_passport?v.booking_user_passport.passport:"",surcharge_facility_id:f.surcharge_facility_id.map((function(e){return e.code_surcharge_facility_id}))}),t.listGolfers.push(b);if(console.log("this.listGolfers________________",t.listGolfers),g=t.listGolfers.map((function(e){return e.insurance_id_pax})),y=(l=[]).concat.apply(l,Object(n["a"])(g)),console.log("..........list_hio_has_user",y),k=h.service.filter((function(e){return"hio"===e.type})).map((function(e){return e.hio_id})),C=h.list_hio.map((function(e){return e.id})),console.log("..........list_hio_all",C),w=C.filter((function(e){return!y.includes(e)&&!k.includes(e)})),console.log("..........list_hio_dif",w),S=h.list_hio.filter((function(e){return w.includes(e.id)&&0===+e.is_outing&&1===+e.is_send_pvi&&9!==+e.options_money_id})).map((function(e){return{User:e.User,options_money_id:e.options_money_id,can_payment:e.can_payment,id:e.id,id_general_bill_detail:e.id_general_bill_detail,is_outing:e.is_outing,user_id:e.user_id,total_pay:e.total_pay,is_send_pvi:e.is_send_pvi,status:e.status,is_customer_pay:e.is_customer_pay,is_pay:e.is_pay}})),console.log("..........list_hio_send_pvi_user_delete",S),O=t.listUserDEteleHioSendPVI(S),console.log("..........list_golfer_delete_hio_send_pvi",O),t.listGolfers=[].concat(Object(n["a"])(t.listGolfers),Object(n["a"])(O)),console.log("this.listGolfers________________",t.listGolfers),h.pax&&(t.facilities=[h.pax.facility].map((function(e){return{value:e.id,label:e.sub_title,path:e.paths}})),t.facilityModel=t.facilities[0],t.dayPlayedModel=null===h||void 0===h||null===(j=h.pax)||void 0===j?void 0:j.date_played,t.salePaxForm={price_9_hole:null===h||void 0===h||null===(D=h.pax)||void 0===D?void 0:D.price_9_hole,price_18_hole:null===h||void 0===h||null===(F=h.pax)||void 0===F?void 0:F.price_18_hole,price_27_hole:null===h||void 0===h||null===(G=h.pax)||void 0===G?void 0:G.price_27_hole},P.searchTeeTime({facility_id:h.pax.facility_id,path_id:h.pax.path_id,date_played:c()(h.pax.date_played).format("DD-MM-YYYY")}).then((function(e){0===e.error_code&&(t.listPax=e.data)}))),t.listOtherService=h.service.filter((function(e){return"shop"===e.type})).map((function(e){return e.product})),t.postForm={dayPlayed:c()(null===(s=h.pax)||void 0===s?void 0:s.date_played).format("DD-MM-YYYY"),timePlayed:"",is_d20:0,pax:h.pax,service:h.service,order_type:h.order_type,type_refund:null!==h&&void 0!==h&&h.pax&&null!==h&&void 0!==h&&null!==(r=h.pax)&&void 0!==r&&r.agency_name?null===h||void 0===h||null===(u=h.pax)||void 0===u?void 0:u.agency_name:"Người nhận hoàn tiền",host_user:h.host_user,host_user_id:h.host_user_id,path_id:null===(d=h.pax)||void 0===d?void 0:d.path_id,total_price:0,type_hole:h.type_hole,pax_id:null===(p=h.pax)||void 0===p?void 0:p.id,insurance_pax:h.insurance_pax,insurance_pax_d20:h.insurance_pax_d20,note:h.note,bill_name:null===h||void 0===h?void 0:h.bill_name,code_booking_relate:null===h||void 0===h?void 0:h.code_booking_relate},1===h.order_type?t.isShowHIO=!1:t.isShowHIO=!0,console.log("data..................................",h),Object(x["b"])(h.parent_id)||0===h.parent_id){a.next=34;break}return a.next=34,P.detailBill({bill_id:h.parent_id}).then((function(e){0===i.error_code&&(t.postForm.parent_id=e.data.general_bill_id,t.billSearch.push({value:e.data.general_bill_id,label:e.data.code}))}));case 34:a.next=37;break;case 36:t.$message.error(i.error_msg);case 37:t.loadingDialog=!1,console.log("this.listGolfers-------------------------------",t.listGolfers);case 39:case"end":return a.stop()}}),a)})))()},handleCloseTag:function(e){if(e.code_card&&20===e.agency_id){var t=this.listGolfers.findIndex((function(t){return t.puid_use_stb&&t.puid_use_stb.nameOutSystem===e.name_out_system}));console.log("index________",t),-1!==t&&delete this.listGolfers[t].puid_use_stb}this.listGolfers.splice(this.listGolfers.indexOf(e),1)},handleCloseService:function(e){this.postForm.service.splice(this.postForm.service.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;if(e){var t={user_id:-1,name_out_system:e,phone:"",agency_id:null,surcharge_facility_id:[],cccd:"",happy_golf_card:[],info_card:{},card_stb:[],info_card_stb:{},type_purchase:0};this.listGolfers.push(t),console.log("this.listGolfers",this.listGolfers)}this.inputVisible=!1,this.inputValue=""},resetDataModal:function(){this.isBooking=-1,this.facilityModel={},this.golferModel={},this.dayPlayedModel=null,this.listGolfers=[],this.isShowHIO=!1,this.postForm={dayPlayed:"",timePlayed:"",is_d20:0,pax:null,service:[],order_type:1,type_refund:"Người nhận hoàn tiền",host_user_id:null,path_id:null,total_price:0,type_hole:18,insurance_pax:0,insurance_pax_d20:1}},resetDataModalHIO:function(){this.facilityModelHIO={},this.golferModel={},this.datePlayed=null,this.listsGolfers=[],this.listsPassports=[],this.typeChoosePay="",this.agent="",this.typeChooseBillSelect=1,this.postFormHio={user_id:"",golfers:[],name_tour:"Outing",facility_id:"",path_id1:"",path_id2:"",date_played:"",options_member_id:6,options_money_id:"",total_pay:"",total_member:"",note:"",agent_id:8,is_outing:0}},handleClose:function(){this.$emit("clickButtonDialogDetail",!0),this.resetDataModal()},onSearchFacility:function(e){var t=this;this.postForm.path_id=null,F.listFacility({title:e}).then((function(e){var a=e.data;0===e.error_code?a.length>0?t.facilities=a.map((function(e){return{value:e.id,label:e.sub_title,booking:e.booking,path:e.paths}})):t.facilities=[]:t.$message.error(e.error_msg)}))},onSearchGolfer:function(e){var t=this,a={keyword:e};this.loadingSearchUser=!0,D.searchGolfer(a).then((function(e){var a=e.data;0===e.error_code?(a.length>0?t.users=a.map((function(e){return{value:e.id,label:e.fullname,phone:e.phone||""}})):t.users=[],t.loadingSearchUser=!1):t.$message.error(e.error_msg)}))},onSearchInsurrance:function(e){var t=this,a={page:1,limit:10,id:e};P.searchInsurance(a).then((function(e){if(0===e.error_code){var a=e.data;0===a.error_code&&(t.listHoleInOne=null===a||void 0===a?void 0:a.data,console.log(" this.listHoleInOne.............................",t.listHoleInOne))}}))},addService:function(){this.postForm.service.push({id:null,commodity_code_id:null,price:null,quantity:null,amount:null})},searchTeeTime:function(){var e=this;this.listPax=[],this.loadingDialog=!0,this.postForm.pax=null,P.searchTeeTime({facility_id:this.facilityModel.value,path_id:this.postForm.path_id,date_played:this.postForm.dayPlayed}).then((function(t){if(0===t.error_code){var a=t.data;a.length>0?(e.$message.success("Tìm Tee Time Thành công. Vui lòng chọn Tee Time"),e.listPax=t.data):e.$message.warning("Không tìm thấy Tee Time.")}else e.$message.error(t.error_msg)})).finally((function(){e.loadingDialog=!1}))},getListSurchargeFacility:function(e){var t=this;G.lists({facility_id:e}).then((function(e){t.listSurcharge=[],0===e.error_code?t.listSurcharge=e.data:t.$message.error(e.error_msg)}))},changePax:function(e){var t=this;console.log("value______________",e);var a=this.listPax.find((function(t){return t.id===e&&1===t.is_lock})),i=this.listPax.find((function(t){return t.id===e}));Object(x["b"])(a)?this.salePaxForm={price_9_hole:(null===i||void 0===i?void 0:i.price_9_hole)||0,price_18_hole:(null===i||void 0===i?void 0:i.price_18_hole)||0,price_27_hole:(null===i||void 0===i?void 0:i.price_27_hole)||0}:confirm("Tee đang khóa. Bạn có muốn mở Tee ?")?P.updateLockPax({id:this.postForm.pax_id,is_lock:0}).then((function(i){0===i.error_code?(t.$message.success(i.error_msg),t.listPax=t.listPax.map((function(t){return t.id===e&&(t.is_lock=0),t})),t.salePaxForm={price_9_hole:(null===a||void 0===a?void 0:a.price_9_hole)||0,price_18_hole:(null===a||void 0===a?void 0:a.price_18_hole)||0,price_27_hole:(null===a||void 0===a?void 0:a.price_27_hole)||0}):(t.$message.error(i.error_msg),delete t.postForm.pax_id)})):(delete this.postForm.pax_id,this.salePaxForm={})},changeOrderType:function(e){2===e?this.isShowHIO=!0:(this.isShowHIO=!1,this.postForm.insurance_pax=0)},convertPriceHole:function(e,t){if(e){var a=null;switch(t){case 9:a=e.price_9_hole;break;case 18:a=e.price_18_hole;break;case 27:a=e.price_27_hole;break;default:a=e.price_18_hole;break}return+a}},onChangeFileExcel:function(e,t){var a=this;return Object(m["a"])(Object(_["a"])().mark((function i(){var l,s;return Object(_["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:null!==e&&void 0!==e&&e.name.includes("%")||null!==e&&void 0!==e&&e.name.includes("#")||null!==e&&void 0!==e&&e.name.includes("/")?(Object(w["Message"])({message:"Tên file khồng được chứa ký tự %, # và /",type:"warning",duration:5e3}),t.pop()):"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==(null===e||void 0===e||null===(l=e.raw)||void 0===l?void 0:l.type)&&"success"!==e.status?(Object(w["Message"])({message:"Yêu cầu định dạng file là XLSX",type:"warning",duration:5e3}),t.pop()):(console.log(e.raw),a.fileExcel=e.raw,s=new FileReader,s.onload=function(){var e=Object(m["a"])(Object(_["a"])().mark((function e(t){var i,l,s,r,c,u,d,p,h,m,f,v,b,g,y,k,C,w,O,j,F;return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.result,l=S["read"](i,{type:"binary"}),s=l.SheetNames[0],r=l.Sheets[s],c=S["utils"].sheet_to_json(r,{header:["user_id","name_out_system","phone","cccd"]}),c.shift(),u=!0,!(c.length>0)){e.next=52;break}return d=c.filter((function(e){return e.user_id})).map((function(e){return+e.user_id})),e.next=11,D.getInGolfer({users_id:d});case 11:if(p=e.sent,h=p.data,m=h.map((function(e){return{id:e.id,id_display:e.id_display}})),f=d.filter((function(e){return m.filter((function(t){return t.id===e||t.id_display===e})).length<1})),console.log("nonExistingUserIds________",f),!(f.length>0)){e.next=23;break}return a.dataVIDNotExist=f.map((function(e){return{vid:e}})),a.isShowGolferNotExist=!0,u=!1,e.abrupt("return");case 23:v=Object(_["a"])().mark((function e(){var t,i;return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c[b],t.happy_golf_card=[],t.info_card={},t.card_stb=[],t.info_card_stb={},Object(x["b"])(t["user_id"])&&(t["user_id"]=-1),-1!==t["user_id"]||!Object(x["b"])(t["name_out_system"])){e.next=12;break}return a.$message.warning("Hàng thứ ".concat(b+1," yêu cầu có mã VID hoặc Tên KH ngoài hệ thống  !")),u=!1,e.abrupt("return",1);case 12:u=!0;case 13:-1!==t["user_id"]&&(i=h.find((function(e){return e.id===t["user_id"]||e.id_display===t["user_id"]})),t["name_out_system"]=i.fullname),delete t["fullName"];case 15:case"end":return e.stop()}}),e)})),b=0;case 25:if(!(b<c.length)){e.next=32;break}return e.delegateYield(v(),"t0",27);case 27:if(!e.t0){e.next=29;break}return e.abrupt("break",32);case 29:b++,e.next=25;break;case 32:if(!u){e.next=50;break}return a.isAdd?(a.listGolfers=c.filter((function(e,t,a){return-1===e.user_id||t===a.findIndex((function(t){return t.user_id===e.user_id}))})),a.$message.success("Import thành công , Các User trùng lặp sẽ xóa.")):a.postForm.pax_id?(g=a.listGolfers.filter((function(e){return a.checkDisabled(e)||a.checkInsuranceSendPVI(e.insurance_pax)})),console.log("golfersNew___________",g),a.listGolfers=[].concat(Object(n["a"])(g),Object(n["a"])(c)).filter((function(e,t,a){return-1===e.user_id||t===a.findIndex((function(t){return t.user_id===e.user_id}))})),a.$message.success("Import thành công , Các User đã thanh toán hoặc đã gửi bảo hiểm không thể xóa, các User trùng sẽ tự động xóa.")):(a.listGolfers=c.filter((function(e,t,a){return-1===e.user_id||t===a.findIndex((function(t){return t.user_id===e.user_id}))})),a.$message.success("Import thành công , Các User trùng lặp sẽ xóa.")),y=[],a.listGolfers.filter((function(e){return-1!==e.user_id})).map((function(e){y.push({name:"card_nab",process:a.getListHappyGolfCard(e.user_id)}),y.push({name:"card_stb",process:a.onGetCarByUserSTB(e.user_id)})})),e.next=38,Promise.all(y.map((function(e){return e.process}))).then((function(e){var t=[];return e.forEach((function(e,a){t.push({name:y[a].name,result:e})})),console.log(JSON.stringify(t)),t}));case 38:k=e.sent,console.log("listDataCardAll_______________",k),C=k.filter((function(e){return"card_stb"===e.name})).map((function(e){return e.result})),w=k.filter((function(e){return"card_nab"===e.name})).map((function(e){return e.result})),O=a.listGolfers.filter((function(e){return-1!==e.user_id})),j=Object(_["a"])().mark((function e(t){var i,l,n;return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=a.listGolfers.findIndex((function(e){return e.user_id===O[t].user_id})),console.log("index______________",i),l=w[i],n=C[i],a.listGolfers[i].happy_golf_card=(null===l||void 0===l?void 0:l.dataCardByUser)||[],a.listGolfers[i].info_card=(null===l||void 0===l?void 0:l.infoCardUser)||[],a.listGolfers[i].card_stb=(null===n||void 0===n?void 0:n.dataCardByUser.map((function(e,t){return Object(o["a"])(Object(o["a"])({},e),{},{id:t+1})})))||[],a.listGolfers[i].info_card_stb=(null===n||void 0===n?void 0:n.infoCardUser)||{};case 8:case"end":return e.stop()}}),e)})),F=0;case 45:if(!(F<O.length)){e.next=50;break}return e.delegateYield(j(F),"t1",47);case 47:F++,e.next=45;break;case 50:e.next=54;break;case 52:return a.$message.warning("Không có bản ghi."),e.abrupt("return");case 54:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.readAsBinaryString(e.raw),t.pop());case 1:case"end":return i.stop()}}),i)})))()},handlePriceByGolfer:function(e){var t=this,a=this.listGolfers[e];a.price=0;var i=this.listPax.find((function(e){return e.id===t.postForm.pax_id})),l=this.convertPriceHole(i,this.postForm.type_hole);if(a.is_deleted&&(l=0),a.price+=l,a.insurance_pax&&a.insurance_pax.length>0){var n=this.listInsurrance.filter((function(e){return a.insurance_pax.includes(e.value)})).map((function(e){return e.price})).reduce((function(e,t){return e+t}),0);a.price+=n||0}if(this.postForm.insurance_pax){var o=this.listInsurrance.find((function(e){return e.value===t.postForm.insurance_pax}));a.price+=o?o.price:0}return a["surcharge_facility_id"]&&a["surcharge_facility_id"].length>0&&this.listSurcharge.filter((function(e){return a["surcharge_facility_id"].includes(e.id)})).map((function(e){if(null!=e.last_price)a.price=a.price-l+e.last_price;else if(1===e.discount_by){var t=l*(l/100);1===e.type_method?+t>e.max_discount?a.price+=+e.max_discount:a.price+=+t:+t>e.max_discount?a.price-=+e.max_discount:a.price-=+t}else 1===e.type_method?a.price+=e.amount:a.price-=e.amount})),a.price=a.price||0,this.formatNumber(a.price)},onSearchOtherService:function(e){var t=this,a={page:1,limit:20,q:e};this.loadingSearchProduct=!0,P.searchOtherService(a).then((function(e){if(0===e.error_code){var a=e.data;0===a.error&&(t.listOtherService=null===a||void 0===a?void 0:a.list)}else t.$message.error("Đã có lỗi xảy ra. Vui lòng liên hệ bộ phận kỹ thuật.")})).finally((function(){t.loadingSearchProduct=!1}))},changeProduct:function(e){this.keyService=null;var t=this.postForm.service[e];this.$emit("openDialogDetailProduct",{service_id:+t.commodity_code_id}),this.keyService=e},changeService:function(e){var t=this.postForm.service[e];switch(t.id){case 1:t.type="shop";break;case 2:t.type="hio";break;case-1:t.type="other_service";break;default:break}},changeHoleInOne:function(e){var t=this.postForm.service[e],a=this.listHoleInOne.find((function(e){return e.id===t.hio_id}));t.price=a.total_pay,t.quantity=1,t.hio_info=a},handlePriceService:function(e){var t=this.postForm.service[e];return t.amount=t.price*t.quantity,Object(f["k"])(t.amount)},mapUserByPhone:function(e,t){var a=this;return Object(m["a"])(Object(_["a"])().mark((function i(){var l,n,o,s,r,c,u;return Object(_["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!Object(x["b"])(e.phone)){i.next=3;break}return a.$message.warning("SDT không được bỏ trống."),i.abrupt("return");case 3:if(l=a.listGolfers.find((function(t){return t.phone===e.phone&&-1!==t.user_id})),Object(x["b"])(l)){i.next=7;break}return a.$message.warning("SDT ".concat(l.phone," tương ứng mã VID").concat(l.user_id," đã được chọn .")),i.abrupt("return");case 7:return n={phone:e.phone,fullname:e.name_out_system},o=a.listGolfers[t],i.next=11,P.mapUserByPhone(n);case 11:if(s=i.sent,console.log("res.....................................data map user phone",s.data),0!==s.error_code){i.next=24;break}return c=s.data,o.user_id=c.id,o.name_out_system=c.fullname,o.phone=c.phone,i.next=20,a.getListHappyGolfCard(c.id);case 20:u=i.sent,o.happy_golf_card=(null===u||void 0===u||null===(r=u.dataCardByUser)||void 0===r?void 0:r.filter((function(e){return 1!==e.is_use&&"ACTIVE"===e.status_select})))||[],o.info_card=(null===u||void 0===u?void 0:u.infoCardUser)||{},a.$message.success("Tạo mã VID thành công.");case 24:case"end":return i.stop()}}),i)})))()},updatePricePax:function(){var e=this;if(this.postForm.pax_id){var t=Object(o["a"])(Object(o["a"])({},this.salePaxForm),{},{pax_id:this.postForm.pax_id});this.loadingUpdatePricePax=!0,P.updatePricePax(t).then((function(a){0===a.error_code?(e.$message.success(a.error_msg),e.listPax=e.listPax.map((function(e){return e.id===t.pax_id&&(e.price_9_hole=t.price_9_hole,e.price_18_hole=t.price_18_hole,e.price_27_hole=t.price_27_hole),e}))):e.$message.error(a.error_msg)})).finally((function(){e.loadingUpdatePricePax=!1,e.$refs.popoverRef.doClose()}))}else this.$message.warning("Bạn chưa chọn teetime")},downloadTemplate:function(){var e="/list_golfer_example.xlsx",t=document.createElement("a");t.href=e,t.target="_blank",t.download="list-golfer-example.xlsx",t.click()},downloadTemplateHIOnoVID:function(){var e="/File_import_list_golfer_no_vga.xlsx",t=document.createElement("a");t.href=e,t.target="_blank",t.download="File_import_list_golfer_no_vga.xlsx",t.click()},downloadTemplateHIOVID:function(){var e="/File_import_list_golfer.xlsx",t=document.createElement("a");t.href=e,t.target="_blank",t.download="File_import_list_golfer.xlsx",t.click()},getListHappyGolfCard:function(e){return Object(m["a"])(Object(_["a"])().mark((function t(){var a,i,l;return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.getCardByUser({user_id:e});case 2:if(a=t.sent,console.log("res.....................................data card by user",a.data),0!==a.error_code){t.next=14;break}if(console.log("res.....................................data card by user",a.data),i=a.data,"00"!==i.responsecode){t.next=12;break}return l=[],!Object(x["b"])(i.ListCardFree)&&i.ListCardFree.Details.length>0&&i.ListCardFree.Details.forEach((function(e){"ACTIVE"!==e.Status&&"PROCESS"!==e.Status||l.push(e)})),console.log("...................dataCardByUser",l),t.abrupt("return",{dataCardByUser:l,infoCardUser:Object(o["a"])(Object(o["a"])({},null===i||void 0===i?void 0:i.InfoCardUser),{},{provider:"nab"})});case 12:t.next=15;break;case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t)})))()},onGetCarByUserSTB:function(){var e=arguments;return Object(m["a"])(Object(_["a"])().mark((function t(){return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:"105581",t.abrupt("return",null);case 2:case"end":return t.stop()}}),t)})))()},handleAgency:function(e){var t=this,a=this.listGolfers[e];console.log("golfer agency........................",a),console.log("list agency........................",this.listAgency),console.log("key--------------------------------------",e);var i=this.listAgency.find((function(a){return a.value===t.listGolfers[e].agency_id}));if(Object(x["b"])(i))delete this.listGolfers[e].price_angency;else{console.log("agency........................search======================",i),console.log("this.facilityModel.......................",this.facilityModel);var l=i.data.price_facility.find((function(e){return e.id===t.facilityModel.value}));if(Object(x["b"])(l))delete this.listGolfers[e].price_angency;else{var n=c()(this.postForm.dayPlayed,"DD-MM-YYYY"),o=n.day();this.listGolfers[e].price_angency=0===o||6===o?l.booking_pax_agency_facility_price.holiday_price:l.booking_pax_agency_facility_price.normal_price}20===a.agency_id||Object(x["b"])(a.code_card_stb)||(delete a.code_card_stb,this.handleSelectCardStbByUser(e)),console.log("price........................",l)}},handleSelectCardByUser:function(e){var t=this.listGolfers[e];if(Object(x["b"])(t.code_card))return delete t.code_card,void delete t.use_card;if(t.use_card&&t.use_card.user_id!==t.user_id)this.$message.warning("vID".concat(t.user_id," đã được tặng thẻ bởi vID").concat(t.use_card.user_id));else if(!Object(x["b"])(t.code_card)){var a=t.happy_golf_card.find((function(e){return e.Code.toString()===t.code_card.toString()}));t.use_card={user_id:a.user_id,code:a.Code,TimesReg:a.ExDate,CustomerName:t.info_card.CustomerName,Phone:t.phone}}},handleSelectCardStbByUser:function(e){var t=this.listGolfers[e];if(Object(x["b"])(t.code_card_stb)){if(delete t.code_card_stb,delete t.use_card_stb,t.puid_use_stb){var a=this.listGolfers.findIndex((function(e){return e.name_out_system===t.puid_use_stb.nameOutSystem}));delete this.listGolfers[a].code_card,delete this.listGolfers[a].agency_id,delete t.puid_use_stb}}else if(console.log("golfer_______",t),console.log("golfer.use_card_stb_________",t.use_card_stb),console.log("moment().unix()______",c()().unix()),t.use_card_stb&&t.use_card_stb.user_id!==t.user_id)this.$message.warning("vID".concat(t.user_id," đã được tặng thẻ bởi vID").concat(t.use_card_stb.user_id));else if(!Object(x["b"])(t.code_card_stb)){var i,l,n=t.card_stb.find((function(e){return+e.offerRate===+t.code_card_stb}));console.log("card___________",n),console.log("getAcountInfo__________",Object(k["a"])()),t.use_card_stb={user_id:t.user_id,sale_name:(null===(i=Object(k["a"])())||void 0===i?void 0:i.user_name)||(null===(l=Object(k["a"])())||void 0===l?void 0:l.name),offer_rate:n.offerRate,note:"test"}}},checkCardGift:function(e){var t=this.listGolfers.filter((function(e){return e.code_card})).map((function(e){return e.code_card}));return t.includes(e.code)},onSearchBill:function(e){var t=this;this.loadingSearchUser=!0,this.billSearch=[],P.listBill({limit:10,page:1,code_key:e}).then((function(e){var a;(console.log("res.............................bookingPaxResource",e),0===e.error_code)?(t.billSearch=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(a=a.bill)||void 0===a?void 0:a.bill_list.map((function(e){return{value:e.general_bill_id,label:e.code}})),console.log("this.bills.............................",t.billSearch)):t.$message.error(e.error_msg)})).finally((function(){t.loadingSearchUser=!1}))},handleSelectionChangedUser:function(e){console.log("value",e),Object(x["b"])(e)?delete this.postForm.host_user_id:this.postForm.host_user_id=e.value},checkPaymentOtherService:function(e){return!(!e.bookingOutside||1!==e.bookingOutside.status)||(!(!e.hio_info||2!==e.hio_info.is_send_pvi&&1!==e.hio_info.is_customer_pay)||!(!e.product||1!==e.status_payment))},checkInsuranceSendPVI:function(e){if(e&&e.length>0){var t,a=null===(t=this.list_hio.filter((function(t){return e.includes(null===t||void 0===t?void 0:t.OptionsMoney.id)})))||void 0===t||null===(t=t.map((function(e){return e.is_send_pvi})))||void 0===t?void 0:t.includes(2);return!!a}return!1},checkDisabled:function(e){return!(!e.booked||null===e.booked.type_purchase||0===+e.booked.type_purchase||0===+e.booked.price_booking)},onSearchAgent:function(e){var t=this;return Object(m["a"])(Object(_["a"])().mark((function a(){var i,l,n,o;return Object(_["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={keyword:e},t.loadingSearchAgent=!0,a.next=4,P.searchAgentNew(i);case 4:l=a.sent,n=l.data,o=[],n.length>0?(t.loadingSearchAgent=!1,n.map((function(e){var t={label:"".concat(e.name," - ").concat(e.code_agent),value:e.id};o.push(t)})),t.agentInsurance=[].concat(o),console.log(t.agentInsurance)):t.agentInsurance=[];case 8:case"end":return a.stop()}}),a)})))()},onGetListPrices:function(e){var t=this,a={action:1,facility_id:e.facility_id};P.getListsPriceByHoleInsurance(a).then((function(e){var a=e.data.data;console.log(a);var i=a.reduce((function(e,t){var a=e.find((function(e){return e.reward_value===t.reward_value}));return a?e:e.concat([t])}),[]);if(i.length>0){var l=[];i.map((function(e){var t={label:"".concat(e.text_display," - ").concat(e.reward_value.toLocaleString()),value:e.id};l.push(t)})),t.prices=[].concat(l),t.optionPricePackage=l[0]}}))},onGetListFacilities:function(e){var t=this,a={title:e};this.loadingSearchFacility=!0,P.getFacilityCanBuyInsurance(a).then((function(e){t.loadingSearchFacility=!1,console.log("asdasdasd",e);var a=e.data.data;if(a.length>0){var i=[];a.map((function(e){var t={label:e.sub_title,value:e.id,paths:e.paths};i.push(t)})),t.facilitiesHIO=[].concat(i)}else t.facilitiesHIO=[]}))},handleConvertDatePlayed:function(e){function t(e){return e<10?"0"+e:e}return[t(e.getFullYear()),t(e.getMonth()+1),t(e.getDate())].join("-")},onGetPassport:function(){if(this.dataPassport.length>0){var e=this.dataPassport;this.listsPassports=Object(n["a"])(e),console.log("qqqqqqqqqqq",this.listsPassports),this.total_passport=this.listsPassports.length,this.number_user=this.dataGolfers.length+this.listsPassports.length}else this.listsPassports=[],this.number_user=this.dataGolfers.length+this.listsPassports.length},handleSetDataPassport:function(e){this.dataPassport=Object(n["a"])(e),this.onGetPassport()},handleSetData:function(e,t){if(this.dataGolfers=Object(n["a"])(e),this.dataGolfersError=Object(n["a"])(t),e.length>0){var a=e[0],i=this.golferByInsurances.filter((function(e){return e.value===a.value}));0===i.length&&(this.golferByInsurances.push(a),this.postFormHio.user_id=a.value),this.onGetList()}else this.listsGolfers=[],this.total=0},getValuePass:function(e){var t=this.postFormHio.value_user,a=this.postFormHio.name;if(""===a||void 0===t||void 0===a||""===t)this.$message.warning("Name hoặc passport không được để trống!");else{var i=Object({name:a}),l=Object({passport:t}),n=Object(o["a"])(Object(o["a"])({},i),l);console.log(n),console.log("aaaaaaaa",this.dataPassport),this.dataPassport.push(n),this.total_passport=this.dataPassport.length,this.number_user=this.total_passport+this.total_user,this.postFormHio.value_user="",this.postFormHio.name="",this.onGetPassport()}},onGetList:function(){var e=this;if(this.dataGolfers.length>0){console.log("this,dataaaaaa",this.dataGolfers),console.log("this,qqqq",this.listQuery);var t=this.dataGolfers.filter((function(t,a){return a<e.listQuery.limit*e.listQuery.page&&a>=e.listQuery.limit*(e.listQuery.page-1)}));this.listsGolfers=Object(n["a"])(t);var a=this.dataGolfersError;this.listsGolferError=Object(n["a"])(a),this.total_user=this.listsGolfers.length,this.total=this.dataGolfers.length,this.number_user=this.dataGolfers.length+this.listsPassports.length}else this.listsGolfers=[],this.total=0,this.number_user=this.dataGolfers.length+this.listsPassports.length},onKeydownEnter:function(){var e=this;if(1===this.golferByInsurances.length){var t=this.golferByInsurances[0];this.postForm.user_id=t.value,this.dataGolfers.find((function(e){return e.value===t.value}))?this.$message.warning("Người chơi đã tồn tại trong danh sách!"):(this.dataGolfers.push(t),this.onGetList())}this.$nextTick((function(){e.$refs.golfer.focus(),e.golfers=[]}))},onChangeGolferCreate:function(e){if(console.log("qưqqqqqqqqqq",e),e){var t=this.golferByInsurances.find((function(t){return t.value===e}));this.dataGolfers.find((function(t){return t.value===e}))?this.$message.warning("Người chơi đã tồn tại trong danh sách!"):(this.dataGolfers.push(t),this.onGetList())}},handleSearchGolfers:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={keyword:e};P.getGolferByIdInsurance(i).then((function(e){if(0===e.data.error_code){var i=e.data.data,l=[];i.map((function(e){var t="";t=e.id_display?"vID".concat(e.id_display," - ").concat(e.fullname," - ").concat(e.nickname):"vID".concat(e.id," - ").concat(e.fullname," - ").concat(e.nickname);var a={value:e.id,label:t,golfer:e};l.push(a)})),a?t.golferByInsurances=[].concat(l):t.golfers=[].concat(l)}}))},onRemoveGofer:function(e){var t=this.dataGolfers.findIndex((function(t){return t.value===e.value}));this.dataGolfers.splice(t,1),this.onGetList()},onRemovePassport:function(e){var t=this.dataPassport.findIndex((function(t){return t.passport===e.passport}));this.dataPassport.splice(t,1),this.onGetPassport()},listUserDEteleHioSendPVI:function(e){var t=[],a={};return e.forEach((function(e){var i=e.user_id;if(a[i]){var l=t.find((function(e){return e.id===i}));l.insurance_pax.push(e.options_money_id),l.insurance_id_pax.push(e.id)}else{var n,o={user_id:i,name_out_system:null===e||void 0===e||null===(n=e.User)||void 0===n?void 0:n.fullname,insurance_pax:[e.options_money_id],insurance_id_pax:[e.id],is_deleted:1};t.push(o),a[i]=!0}})),t},convertTimestampToDateTime:f["h"],formatNumber:f["k"]}},T=I,M=(a("f270"),a("2877")),H=Object(M["a"])(T,d,p,!1,null,"3688bde5",null),N=H.exports,R=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"Chi tiết sản phẩm",visible:e.showDialog,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDialog,expression:"loadingDialog"}],attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("el-row",{staticClass:"p-10 border-1 pb-10 mb-10 other-service"},[e.isData?t("el-row",{staticClass:"dialog-add-golfer pb-10"},[t("el-col",{staticClass:"p-10",attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[t("el-image",{staticClass:"w-100",attrs:{src:e.objectData.thumb,"preview-src-list":e.objectData.images}})],1),t("el-col",{staticClass:"p-10",attrs:{xs:24,sm:24,md:24,lg:12,xl:11}},[t("div",[t("h3",{staticClass:"name_product"},[e._v(e._s(e.objectData.name))])]),t("div",[t("span",[e._v("Mã đơn hàng : "),t("el-tag",[e._v(e._s(e.objectData.product_code))])],1)]),t("div",[t("span",{staticClass:"price_sale"},[e._v(e._s(e.formatNumber(e.objectData.price_sale))+" đ")]),e.objectData.price_sale<e.objectData.price?t("span",{staticClass:"price"},[e._v(e._s(e.formatNumber(e.objectData.price))+" đ")]):e._e()]),e.objectData["color_new"]&&e.objectData["color_new"].length>0?t("div",{staticClass:"mt-10"},[t("span",[e._v("Màu sắc : "),e._l(e.objectData.color_new,(function(a){return t("el-tag",{key:a,staticStyle:{cursor:"default"},attrs:{type:e.bodyRequest.color==a?"success":"info",effect:"plain"},on:{click:function(t){return e.addColor(a)}}},[e._v(" "+e._s(a)+" ")])}))],2)]):e._e(),e.objectData["color_new"]&&e.objectData["size_new"].length>0?t("div",{staticClass:"mt-10"},[t("span",[e._v("Size : "),e._l(e.objectData.size_new,(function(a){return t("el-tag",{key:a,staticStyle:{cursor:"default"},attrs:{type:e.bodyRequest.size==a?"success":"info",effect:"plain"},on:{click:function(t){return e.addSize(a)}}},[e._v(" "+e._s(a)+" ")])}))],2)]):e._e(),t("div",{staticClass:"mt-10"},[t("span",[e._v("Số lượng ")]),t("el-input-number",{attrs:{min:1,step:1},model:{value:e.bodyRequest.quantity,callback:function(t){e.$set(e.bodyRequest,"quantity",t)},expression:"bodyRequest.quantity"}})],1)])],1):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:e.onSubmitAddProduct}},[e._v("Thêm mới")])],1)],1)])},A=[],$=(a("a9e3"),new g["a"]),E={name:"DialogDetailOtherService",props:{showDialog:{type:Boolean,default:!1,value:!1},serviceId:{type:Number,default:function(){return 0}}},data:function(){return{isData:!1,objectData:{},bodyRequest:{quantity:1},loadingSubmit:!1,loadingDialog:!1}},watch:{serviceId:function(e){e>0&&(this.bodyRequest={quantity:1},this.onGetDetail(e))}},created:function(){},methods:{formatNumber:f["k"],onGetDetail:function(e){var t=this;this.loadingDialog=!0,$.detailProduct({id:e}).then((function(e){if(0===e.error_code){var a=e.data;if(0===a.error){var i=a.info;i.size_new=Object(x["b"])(i["color"])?[]:i["color"].split(","),i.color_new=Object(x["b"])(i["size"])?[]:i["size"].split(","),console.log("data.size_new ",i.size_new),console.log("data.color_new ",i.color_new),t.objectData=i,t.bodyRequest=Object(o["a"])(Object(o["a"])({},t.bodyRequest),{},{price:i.price_sale,name_product:i.name,product:i})}}t.isData=!0})).finally((function(){t.loadingDialog=!1}))},addColor:function(e){this.bodyRequest=Object(o["a"])(Object(o["a"])({},this.bodyRequest),{},{color:e})},addSize:function(e){console.log(e),this.bodyRequest=Object(o["a"])(Object(o["a"])({},this.bodyRequest),{},{size:e})},onSubmitAddProduct:function(){var e=this;return Object(m["a"])(Object(_["a"])().mark((function t(){var a;return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateFrom();case 2:if(a=t.sent,!a){t.next=6;break}return e.$message.warning(a),t.abrupt("return");case 6:e.$emit("clickButtonDialogDetailService",e.bodyRequest);case 7:case"end":return t.stop()}}),t)})))()},validateFrom:function(){var e=this;return Object(m["a"])(Object(_["a"])().mark((function t(){return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.objectData["size_new"].length>0&&Object(x["b"])(e.bodyRequest.size))){t.next=2;break}return t.abrupt("return","Bạn cần phải chọn size");case 2:if(!(e.objectData["color_new"].length>0&&Object(x["b"])(e.bodyRequest.color))){t.next=4;break}return t.abrupt("return","Bạn cần phải chọn màu!");case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}}),t)})))()},resetDataModal:function(){this.objectData={},this.bodyRequest={quantity:1}},handleClose:function(){var e=this;return Object(m["a"])(Object(_["a"])().mark((function t(){var a;return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateFrom();case 2:if(a=t.sent,!a){t.next=6;break}return e.$message.warning(a),t.abrupt("return");case 6:e.$emit("clickButtonDialogDetailService"),e.resetDataModal();case 8:case"end":return t.stop()}}),t)})))()}}},q=E,V=(a("3c5e"),Object(M["a"])(q,R,A,!1,null,"a7596e20",null)),L=V.exports,U=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"Xác nhận thanh toán",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{attrs:{model:e.postForm}},[t("el-form-item",{attrs:{label:"Hình thức thanh toán"}},[t("el-select",{attrs:{placeholder:"Hình thức thanh toán"},model:{value:e.postForm.method_payment,callback:function(t){e.$set(e.postForm,"method_payment",t)},expression:"postForm.method_payment"}},e._l(e.payments,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"Ngân hàng"}},[t("el-input",{attrs:{placeholder:"Ngân hàng"},model:{value:e.postForm.name_bank,callback:function(t){e.$set(e.postForm,"name_bank",t)},expression:"postForm.name_bank"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("Hủy")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:e.handleSubmit}},[e._v("Xác nhận")])],1)],1)},Q=[],z=new g["a"],Y={name:"ConfirmPayment",props:{objectData:{type:Object,default:function(){return{}}},dialogVisible:{type:Boolean,default:!1}},data:function(){return{postForm:{admin_id:Object(k["a"])().id},payments:[{id:0,name:"Chuyển khoản"},{id:1,name:"Tiền mặt"},{id:2,name:"Chuyển khoản / tiền mặt"},{id:3,name:"Thanh toán bằng code payment"}],loadingSubmit:!1}},watch:{objectData:function(e){e&&(this.postForm.general_bill_id=e.general_bill_id)}},methods:{handleSubmit:function(){var e=this;this.loadingSubmit=!0,console.log("post form...............",this.postForm),0===this.postForm.method_payment?z.detailBill({bill_id:this.postForm.general_bill_id}).then(function(){var t=Object(m["a"])(Object(_["a"])().mark((function t(a){var i;return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===a.error_code?(i=a.data,e.postForm.data=i,z.updatePaymentServiceChildStatistic(e.postForm).then((function(t){0===t.error_code?(e.$emit("onClickButtonConfirmPayment",{dialog:!1,reload:!0}),e.$message.success("Xác nhận thành công."),e.resetDataModal()):e.$message.error(t.error_msg)}))):e.$message.error(a.error_msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.loadingDialog=!1})):3===this.postForm.method_payment?z.confirmPaymentBill(this.postForm).then(function(){var t=Object(m["a"])(Object(_["a"])().mark((function t(a){return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===a.error_code?z.updatePaymentBillCodePaymnet(e.postForm).then((function(t){0===t.error_code?(e.$emit("onClickButtonConfirmPayment",{dialog:!1,reload:!0}),e.$message.success("Xác nhận thành công."),e.resetDataModal()):e.$message.error(t.error_msg)})):e.$message.error(a.error_msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.loadingSubmit=!1})):z.confirmPaymentBill(this.postForm).then(function(){var t=Object(m["a"])(Object(_["a"])().mark((function t(a){return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===a.error_code?(e.$emit("onClickButtonConfirmPayment",{dialog:!1,reload:!0}),e.$message.success("Xác nhận thành công."),e.resetDataModal()):e.$message.error(a.error_msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.loadingSubmit=!1}))},handleClose:function(){this.$emit("onClickButtonConfirmPayment",{dialog:!1,reload:!1}),this.resetDataModal()},resetDataModal:function(){this.postForm={admin_id:Object(k["a"])().id}}}},K=Y,X=(a("db96"),Object(M["a"])(K,U,Q,!1,null,"37d28b86",null)),J=X.exports,W=function(){var e,t,a,i,l,n,o,s,r,c,u,d,p,h,_,m=this,f=m._self._c;return f("div",[f("el-dialog",{staticClass:"dialog-statistic-bill",attrs:{visible:m.showDialog,"before-close":m.handleClose,fullscreen:""},on:{"update:visible":function(e){m.showDialog=e}}},[f("div",{directives:[{name:"loading",rawName:"v-loading",value:m.loadingDialog,expression:"loadingDialog"}],attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[f("el-row",[f("h3",{staticStyle:{"text-align":"center",color:"#000000"}},[m._v("Hóa đơn chi tiết")]),0!=m.dataRequest.pax_id?f("p",{staticStyle:{"text-align":"center"}},[m._v(m._s(m.convertDateTime(null===(e=m.dataRequest)||void 0===e||null===(e=e.pax)||void 0===e?void 0:e.date_played)))]):m._e(),f("el-form",{ref:"ruleForm",attrs:{model:m.dataRequest,rules:m.rules}},[0!=m.dataRequest.pax_id?f("el-col",{staticClass:"price-col-8",attrs:{span:8}},[f("div",{staticClass:"grid-content bg-purple"},[f("p",[f("span",{staticClass:"title-name title-name-bold"},[m._v("Số lượng hố: ")]),f("span",[m._v(m._s(null===(t=m.dataRequest)||void 0===t||null===(t=t.pax)||void 0===t?void 0:t.number_hole))])])])]):m._e(),0!=m.dataRequest.pax_id?f("el-col",{staticClass:"price-col-8",attrs:{span:8}},[f("div",{staticClass:"grid-content bg-purple-light"},[f("p",[f("span",{staticClass:"title-name title-name-bold"},[m._v("Bảng giá thường: ")])]),null!==(a=m.dataRequest)&&void 0!==a&&null!==(a=a.pax)&&void 0!==a&&a.source_price_9?f("p",[f("span",{staticClass:"title-name title-name-bold"},[m._v("9 hố: ")]),f("span",[m._v(m._s(m.formatNumber(null===(i=m.dataRequest)||void 0===i||null===(i=i.pax)||void 0===i?void 0:i.source_price_9))+"đ")])]):m._e(),null!==(l=m.dataRequest)&&void 0!==l&&null!==(l=l.pax)&&void 0!==l&&l.source_price_18?f("p",[f("span",{staticClass:"title-name title-name-bold"},[m._v("18 hố: ")]),f("span",[m._v(m._s(m.formatNumber(null===(n=m.dataRequest)||void 0===n||null===(n=n.pax)||void 0===n?void 0:n.source_price_18))+"đ")])]):m._e(),null!==(o=m.dataRequest)&&void 0!==o&&null!==(o=o.pax)&&void 0!==o&&o.source_price_27?f("p",[f("span",{staticClass:"title-name title-name-bold"},[m._v("27 hố: ")]),f("span",[m._v(m._s(m.formatNumber(null===(s=m.dataRequest)||void 0===s||null===(s=s.pax)||void 0===s?void 0:s.source_price_27))+"đ")])]):m._e()])]):m._e(),0!=m.dataRequest.pax_id?f("el-col",{staticClass:"price-col-8",attrs:{span:8}},[f("div",{staticClass:"grid-content bg-purple"},[f("p",[f("span",{staticClass:"title-name title-name-bold"},[m._v("Bảng giá HIO: ")])]),f("p",[f("span",{staticClass:"title-name title-name-bold red"},[m._v("HIO 100tr: ")]),f("span",{staticClass:"title-name red"},[m._v(m._s(m.formatNumber(null===(r=m.dataRequest)||void 0===r||null===(r=r.pax)||void 0===r?void 0:r.hio_100))+"đ")])]),f("p",[f("span",{staticClass:"title-name title-name-bold red"},[m._v("HIO 200tr: ")]),f("span",{staticClass:"title-name red"},[m._v(m._s(m.formatNumber(null===(c=m.dataRequest)||void 0===c||null===(c=c.pax)||void 0===c?void 0:c.hio_200))+"đ")])])])]):m._e(),f("el-row",{staticClass:"row-price-statistic"},[f("el-col",{staticClass:"col-top-statistic",attrs:{span:14}}),f("el-col",{staticClass:"col-top-statistic",attrs:{span:6}},[f("div",{staticClass:"grid-content bg-purple-dark"},[f("el-form-item",{attrs:{label:"Tên Outing"}},[f("el-input",{attrs:{disabled:"",size:"small"},model:{value:m.dataRequest.bill_name,callback:function(e){m.$set(m.dataRequest,"bill_name",e)},expression:"dataRequest.bill_name"}})],1)],1)])],1),(null===(u=m.listGolfers)||void 0===u?void 0:u.length)>0&&0!=m.dataRequest.pax_id?f("el-row",{staticClass:"data-table-content table-responsive p-10 border-1 mb-10"},[f("h6",{staticClass:"mb-20"},[f("b",[m._v("Danh sách Golfer: ")])]),f("el-row",{staticClass:"row-price-statistic"},[f("el-col",{staticClass:"col-top-statistic",attrs:{sm:6,md:6}},[f("div",{staticClass:"grid-content bg-purple-dark"},[f("el-form-item",{attrs:{label:"Giá doanh thu",prop:"revenue_price"}},[f("el-input",{attrs:{disabled:"",size:"small"},model:{value:m.dataRequest.revenue_price,callback:function(e){m.$set(m.dataRequest,"revenue_price",e)},expression:"dataRequest.revenue_price"}})],1)],1)]),f("el-col",{staticClass:"col-top-statistic",attrs:{sm:6,md:6}},[f("div",{staticClass:"grid-content bg-purple-dark"},[f("el-form-item",{attrs:{label:"Phần trăm Refund ( nhỏ hơn 10 % )"}},[f("el-input",{attrs:{disabled:"",size:"small"},model:{value:m.dataRequest.refund,callback:function(e){m.$set(m.dataRequest,"refund",e)},expression:"dataRequest.refund"}})],1)],1)])],1),m.hio_outing?f("p",{staticStyle:{"font-size":"16px !important",color:"red"}},[m._v("Bảo hiểm Outing: "+m._s(m.hio_outing))]):m._e(),f("table",{staticClass:"table-golfer border table-bordered w-100"},[f("thead",[f("tr",[f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"320px"}},[m._v("Golfer")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Số lượng khách")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Khách lẻ / Đại lý")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Ngày thanh toán")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Ngày đại lý thanh toán")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Người thanh toán")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Phụ phí")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Doanh thu phụ phí")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Mã giảm giá")]),f("th",{staticClass:"p-10 text-center word-break",staticStyle:{"min-width":"150px"}},[m._v("Refund cho Golfer")])])]),f("tbody",m._l(m.listGolfers,(function(e,t){var a;return f("tr",{key:t},[f("td",{staticClass:"p-10"},[f("div",{staticClass:"mb-10"},[f("div",{staticClass:"info-custom"},[f("div",{staticStyle:{width:"110px"}},[f("div",{staticStyle:{display:"flex","flex-direction":"column"}},[f("p",{staticStyle:{"font-weight":"bold"}},[m._v(m._s(-1!==e.user_id?e.name:"(OUT) ".concat(e.name)))]),f("p",{staticClass:"id-golfer-booking"},[m._v(" "+m._s(-1!==e.user_id?"VID".concat(e.user_id):"")+" ")]),Boolean(e.is_deleted)?f("p",{staticStyle:{color:"red"}},[m._v("(Đã xóa - BH đã gửi PVI)")]):m._e(),f("el-input",{attrs:{hidden:"hidden"},model:{value:e.name,callback:function(t){m.$set(e,"name",t)},expression:"booked.name"}},[m._v(" "+m._s(e.name)+" ")])],1)]),f("div",{staticStyle:{width:"170px"}},[f("el-select",{staticClass:"w-100",attrs:{disabled:"",size:"small"},on:{change:function(e){return m.checkType(t)}},model:{value:e.type_purchase,callback:function(t){m.$set(e,"type_purchase",t)},expression:"booked.type_purchase"}},m._l(m.arrayTypePurchase,(function(e,t){return f("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])]),f("div",[f("div",{staticClass:"info-custom"},[f("div",{staticStyle:{width:"110px"}},[f("p",{staticStyle:{"font-weight":"bold"}},[m._v("Booking: ")])]),f("div",{staticStyle:{width:"170px"}},[f("p",[m._v(m._s(e.is_deleted?0:m.formatNumber(e.price_booking))+"đ")])])])]),e.insurance_pax.length>0?f("div",[f("div",{staticClass:"info-custom"},[f("div",{staticStyle:{width:"110px"}},[f("p",{staticStyle:{"font-weight":"bold"}},[m._v("Bảo hiểm tiền mặt: ")])]),f("div",{staticStyle:{width:"170px"}},[f("p",[m._v(m._s(m.convertHio(e.insurance_pax,e.insurance_provider,e.user_id)))])])])]):m._e(),e.type_refund?f("div",[f("div",{staticClass:"info-custom"},[f("div",{staticStyle:{width:"110px"}},[f("p",{staticStyle:{"font-weight":"bold"}},[m._v("Loại hoàn: ")])]),f("div",{staticStyle:{width:"170px"}},[f("p",[m._v(m._s(1===+e.type_refund?"Tiền mặt":"Hoàn point"))])])])]):m._e()]),f("td",{staticClass:"p-10"},[f("div",{staticClass:"mb-1"},[f("el-input",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),placeholder:"Số lượng khách",size:"small",type:"number"},model:{value:e.quantity_guest,callback:function(t){m.$set(e,"quantity_guest",t)},expression:" booked.quantity_guest"}})],1),f("div",[f("el-input",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),placeholder:"Passport/CCCD",size:"small"},model:{value:e.passport,callback:function(t){m.$set(e,"passport",t)},expression:"booked.passport"}})],1)]),f("td",{staticClass:"p-10"},[f("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),size:"small",filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"Đại lý"},model:{value:e.agency_id,callback:function(t){m.$set(e,"agency_id",t)},expression:"booked.agency_id"}},m._l(m.listAgency,(function(e){return f("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),f("td",{staticClass:"p-10"},[f("el-date-picker",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),size:"small",type:"date",format:"dd-MM-yyyy",placeholder:"Ngày thanh toán"},model:{value:e.date_payment,callback:function(t){m.$set(e,"date_payment",t)},expression:"booked.date_payment"}})],1),f("td",{staticClass:"p-10"},[f("el-date-picker",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),size:"small",type:"date",format:"dd-MM-yyyy",placeholder:"Ngày đại lý thanh toán"},model:{value:e.date_agent_payment,callback:function(t){m.$set(e,"date_agent_payment",t)},expression:"booked.date_agent_payment"}})],1),f("td",{staticClass:"p-10"},[f("el-select",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),clearable:"",size:"small",placeholder:"Người thanh toán"},model:{value:e.user_id_pay,callback:function(t){m.$set(e,"user_id_pay",t)},expression:"booked.user_id_pay"}},[f("el-option",{attrs:{value:0,label:"Không"}}),m._l(m.listGolfers.filter((function(e){return-1!=e.user_id})),(function(e,t){return f("el-option",{key:t,attrs:{value:e.user_id,label:"vID".concat(e.user_id," - ").concat(e.name)}})}))],2)],1),f("td",{staticClass:"p-10 text-center"},m._l(e.surcharge_facility,(function(e,t){return f("el-tag",{key:t,staticStyle:{margin:"2px"}},[m._v(" "+m._s(e.booking_code_surcharge_facility.code)+" ")])})),1),f("td",{staticClass:"p-10"},[f("el-input",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),size:"small",placeholder:"Giá doanh thu của phụ phí"},model:{value:e.surcharge_revenue,callback:function(t){m.$set(e,"surcharge_revenue",t)},expression:"booked.surcharge_revenue"}})],1),f("td",{staticClass:"p-10"},[e.promotion_code_id?f("div",[e.promotional?f("el-tag",[m._v(m._s(null===(a=e.promotional)||void 0===a?void 0:a.code))]):m._e()],1):m._e()]),f("td",{staticClass:"p-10"},[f("el-select",{attrs:{disabled:e.is_cancel>0||Boolean(e.is_deleted),size:"small"},model:{value:e.is_refund,callback:function(t){m.$set(e,"is_refund",t)},expression:"booked.is_refund"}},m._l(m.refunds,(function(e){return f("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)])})),0)])],1):m._e(),null!==(d=m.dataRequest)&&void 0!==d&&d.pax?f("el-row",{staticClass:"row-price-statistic mb-20"},[null!==(p=m.dataRequest)&&void 0!==p&&null!==(p=p.pax)&&void 0!==p&&p.note?f("el-col",{staticClass:"col-top-statistic",attrs:{span:11}},[f("label",[m._v("Lưu ý của khách hàng (nếu có)")]),f("el-input",{attrs:{disabled:"",size:"small",type:"textarea",rows:5},model:{value:m.dataRequest.note,callback:function(e){m.$set(m.dataRequest,"note",e)},expression:"dataRequest.note"}})],1):m._e(),f("el-col",{staticClass:"col-top-statistic",attrs:{span:2}}),null!==(h=m.dataRequest)&&void 0!==h&&null!==(h=h.pax)&&void 0!==h&&h.customer_invoice?f("el-col",{staticClass:"col-top-statistic",attrs:{span:11}},[f("label",[m._v("Thông tin khách hàng xuất hóa đơn (nếu có)")]),f("el-input",{attrs:{disabled:"",size:"small",type:"textarea",rows:5},model:{value:m.dataRequest.customer_invoice,callback:function(e){m.$set(m.dataRequest,"customer_invoice",e)},expression:"dataRequest.customer_invoice"}})],1):m._e()],1):m._e(),m.listGolfers.length>0?f("el-row",{staticClass:"p-10 border-1 mb-10"},[f("el-row",{staticClass:"data-table-content table-responsive"},[f("h6",{staticClass:"mb-20"},[f("b",[m._v("Danh sách Dịch vụ đi kèm: ")])]),f("table",{staticClass:"table table-bordered"},[f("thead",[f("tr",[f("th",{staticClass:"text-center col-2 vertical-middle",staticStyle:{"min-width":"180px"}},[m._v("Tên dịch vụ")]),f("th",{staticClass:"text-center col-2",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Mã hàng")]),f("th",{staticClass:"text-center col-2",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Hình thức thanh toán")]),f("th",{staticClass:"text-center col-2",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Ngày thanh toán")]),f("th",{staticClass:"text-center col-2",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Ngày đại lý thanh toán")]),f("th",{staticClass:"text-center col-2",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Người thanh toán")]),f("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Đơn giá")]),f("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Số lượng")]),f("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Thành tiền")]),f("th",{staticClass:"text-center",staticStyle:{"min-width":"180px"},attrs:{scope:"col"}},[m._v("Đại lý")])])]),f("tbody",[(null===(_=m.postForm)||void 0===_||null===(_=_.service)||void 0===_?void 0:_.length)>0?[m._l(m.postForm.service,(function(e,t){return[f("tr",{key:t},[f("th",{staticClass:"col-2",staticStyle:{"vertical-align":"center"}},[f("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn dịch vụ",clearable:"",disabled:""},on:{change:function(e){return m.changeService(t)}},model:{value:m.postForm.service[t].id,callback:function(e){m.$set(m.postForm.service[t],"id",e)},expression:"postForm.service[key_service].id"}},m._l(m.listService,(function(e){return f("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),f("td",{staticClass:"col-2"},[-1!==m.postForm.service[t].id&&2!==m.postForm.service[t].id?f("el-input",{attrs:{disabled:""},model:{value:m.postForm.service[t].name_product,callback:function(e){m.$set(m.postForm.service[t],"name_product",e)},expression:"postForm.service[key_service].name_product"}}):m._e(),2==m.postForm.service[t].id?f("el-select",{staticClass:"w-100",attrs:{disabled:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Nhập mã HIO..."},on:{change:function(e){return m.changeHoldInOne(t)}},model:{value:m.postForm.service[t].hio_id,callback:function(e){m.$set(m.postForm.service[t],"hio_id",e)},expression:"postForm.service[key_service].hio_id"}},m._l(m.listHoldInOne,(function(e){return f("el-option",{key:e.id,attrs:{label:"BH"+e.id+" - "+m.formatNumber(e.total_pay)+"đ",value:e.id}})})),1):m._e(),-1==m.postForm.service[t].id?f("el-input",{attrs:{placeholder:"Nhập tên dịch vụ",disabled:"",clearable:""},model:{value:m.postForm.service[t].name_other_service,callback:function(e){m.$set(m.postForm.service[t],"name_other_service",e)},expression:"postForm.service[key_service].name_other_service"}}):m._e()],1),f("td",{staticClass:"text-center"},[f("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small",clearable:"",placeholder:"Hình thức thanh toán"},on:{change:function(e){return m.checkTypeServiceChild(t)}},model:{value:m.postForm.service[t].type_purchase,callback:function(e){m.$set(m.postForm.service[t],"type_purchase",e)},expression:"postForm.service[key_service].type_purchase"}},m._l(m.convertListTypePurchaseChild(m.postForm.service[t]),(function(e,t){return f("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),m.postForm.service[t].type_refund?f("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[f("span",[m._v("Loại hoàn: "+m._s(1===+m.postForm.service[t].type_refund?"Tiền mặt":"Hoàn point"))])]):m._e()],1),f("td",{staticClass:"text-center"},[f("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:2==m.postForm.service[t].id||m.postForm.service[t].is_cancel>0,size:"small",type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"Ngày thanh toán"},model:{value:m.postForm.service[t].date_payment,callback:function(e){m.$set(m.postForm.service[t],"date_payment",e)},expression:"postForm.service[key_service].date_payment"}})],1),f("td",{staticClass:"text-center"},[f("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:-1!==m.postForm.service[t].id||m.postForm.service[t].is_cancel>0,size:"small",type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"Ngày đại lý thanh toán"},model:{value:m.postForm.service[t].date_agent_payment,callback:function(e){m.$set(m.postForm.service[t],"date_agent_payment",e)},expression:"postForm.service[key_service].date_agent_payment"}})],1),f("td",{staticClass:"text-center"},[f("el-select",{staticStyle:{width:"100%"},attrs:{disabled:m.postForm.service[t].is_cancel>0,size:"small",clearable:"",placeholder:"Người thanh toán"},model:{value:m.postForm.service[t].host_user_id,callback:function(e){m.$set(m.postForm.service[t],"host_user_id",e)},expression:"postForm.service[key_service].host_user_id"}},m._l(m.listGolfers.filter((function(e){return-1!=e.user_id})),(function(e,t){return f("el-option",{key:t,attrs:{value:e.user_id,label:"vID".concat(e.user_id," - ").concat(e.name)}})})),1)],1),f("td",{staticClass:"text-center"},[f("el-input-number",{attrs:{disabled:"",min:0,step:5e4},model:{value:m.postForm.service[t].price,callback:function(e){m.$set(m.postForm.service[t],"price",e)},expression:"postForm.service[key_service].price"}})],1),f("td",{staticClass:"text-center"},[f("el-input-number",{attrs:{disabled:"",min:1,max:1e3,step:1},model:{value:m.postForm.service[t].quantity,callback:function(e){m.$set(m.postForm.service[t],"quantity",e)},expression:"postForm.service[key_service].quantity"}})],1),f("td",{staticClass:"vertical-middle text-center"},[f("span",[m._v(m._s(m.handlePriceService(t))+" đ")])]),f("td",{staticClass:"text-center"},[-1==m.postForm.service[t].id?f("el-select",{attrs:{disabled:m.postForm.service[t].is_cancel>0,size:"mini",clearable:"",filterable:"",placeholder:"Chọn Đại lý"},model:{value:m.postForm.service[t].agent_id,callback:function(e){m.$set(m.postForm.service[t],"agent_id",e)},expression:"postForm.service[key_service].agent_id"}},m._l(m.listAgency,(function(e){return f("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):m._e()],1)])]}))]:f("tr",[f("td",{staticClass:"text-center",attrs:{colspan:"6"}},[m._v("Chưa có dịch vụ đi kèm")])])],2)])])],1):m._e(),m.listGolfers.length>0?f("el-row",{staticClass:"p-10 mb-10"},[f("el-input",{attrs:{disabled:"",type:"textarea",placeholder:"Note"},model:{value:m.postForm.note,callback:function(e){m.$set(m.postForm,"note",e)},expression:"postForm.note"}})],1):m._e(),f("el-form-item",[f("el-button",{attrs:{size:"mini",type:"warning"},on:{click:m.handleClose}},[m._v("Hủy")])],1)],1)],1)],1)]),m.indexGolfer&&m.indexGolfer>=0?[f("el-dialog",{attrs:{title:"Chọn phương thức refund",width:"400px",visible:m.isShowDialogRefund,"before-close":m.handleCloseDialogRefund},on:{"update:visible":function(e){m.isShowDialogRefund=e}}},[f("el-form",[f("el-form-item",[f("el-select",{attrs:{size:"small"},model:{value:m.listGolfers[m.indexGolfer-1].type_refund,callback:function(e){m.$set(m.listGolfers[m.indexGolfer-1],"type_refund",e)},expression:"listGolfers[indexGolfer-1].type_refund"}},m._l(m.typeRefund,(function(e){return f("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),f("el-button",{on:{click:m.handleCloseDialogRefund}},[m._v("Xác nhận")])],1)]:m._e(),m.indexService&&m.indexService>=0?[f("el-dialog",{attrs:{title:"Chọn phương thức refund",width:"400px",visible:m.isShowDialogRefundService,"before-close":m.handleCloseDialogRefundService},on:{"update:visible":function(e){m.isShowDialogRefundService=e}}},[f("el-form",[f("el-form-item",[f("el-select",{attrs:{size:"small"},model:{value:m.postForm.service[m.indexService-1].type_refund,callback:function(e){m.$set(m.postForm.service[m.indexService-1],"type_refund",e)},expression:"postForm.service[indexService-1].type_refund"}},m._l(m.typeRefund,(function(e){return f("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),f("el-button",{on:{click:m.handleCloseDialogRefundService}},[m._v("Xác nhận")])],1)]:m._e()],2)},Z=[],ee=(a("0481"),a("4069"),a("4ec9"),a("a630"),a("498a"),a("fb6a"),a("5408")),te=a("e0cb"),ae=a("579c"),ie=a("60fe"),le=new ae["a"],ne=new g["a"],oe=new te["a"],se={name:"DialogStatistic",props:{showDialog:{type:Boolean,default:!1},listInsurrance:{type:Array,default:function(){return[]}},objectData:{type:Object,default:function(){return{}}},statisticId:{type:Number,default:function(){return 0}}},data:function(){return{listService:C["listService"],listOrderType:C["listOrderType"],listHIO:C["listHIO"],listTypeHole:C["listTypeHole"],listHoldInOne:[],loadingSearchProduct:!1,listAgency:[],loadingDialog:!1,loadingSubmit:!1,supplierModel:null,loadingSearchSupplier:!1,suppliers:[],postForm:{},checkbox_purchase:[],numberCustom:1,agencyModel:[],agencies:[],categories:[],cateId:null,datePayment:[],dateAgentPayment:[],loadingSearchAgency:!1,arrayTypePurchase:Object.keys(Object(ee["C"])()).map((function(e){return{value:parseInt(e),label:Object(ee["C"])()[e]}})),refunds:[{id:0,name:"Không"},{id:1,name:"Có"}],dataRequest:{listUser:[],supplier:"",source_price:"",revenue_price:"",refund:"",categories:"",pax_id:"",note:"",customer_invoice:"",type_post:"",type_purchase:""},check_exist_not_payment:!0,rules:{},listGolfers:[],clone_listGolfers:[],data_hio:[],listTypePurchaseChildService:ie["c"],status_bill:"",isSTB:!1,isShowDialogRefund:!1,typeRefund:[{value:1,label:"Tiền mặt"},{value:2,label:"Hoàn point"}],indexGolfer:null,indexService:null,isShowDialogRefundService:!1,clone_convert_service:[],hio_outing:null,dialogShowOTP:!1,otp:""}},watch:{objectData:function(e){Object(x["b"])(e)||(this.status_bill=e.status,this.updateDataJson(e.general_bill_id,e.pax_id))}},created:function(){},methods:{onSubmitForm:function(){return Object(m["a"])(Object(_["a"])().mark((function e(){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},checkType:function(e){var t=this;14===+this.listGolfers[e].type_purchase&&this.clone_listGolfers[e].type_purchase>0&&this.$confirm("Bạn có chắc chắn hủy golfer này, sau khi hủy đơn sẽ hoàn point và không thể thao tác golfer này ?").then((function(a){t.indexGolfer=e+1,console.log("indexGolfer...........",t.indexGolfer),console.log(".........isShowDialogRefund",t.isShowDialogRefund),t.isShowDialogRefund=!0})).catch((function(){console.log("cancel.............."),t.listGolfers[e].type_purchase=t.clone_listGolfers[e].type_purchase}))},checkTypeServiceChild:function(e){var t,a=this;14===+this.postForm.service[e].type_purchase&&(1===+this.postForm.service[e].id&&+(null===(t=this.postForm.service[e])||void 0===t?void 0:t.state)>1?(this.$message.warning("Đơn Shop này đang đóng gói không thể hủy !!!"),this.postForm.service[e].type_purchase=this.clone_convert_service[e].type_purchase):this.clone_convert_service[e].type_purchase>0&&this.$confirm("Bạn có chắc chắn hủy golfer này, sau khi hủy đơn sẽ hoàn point và không thể thao tác golfer này ?").then((function(t){a.indexService=e+1,console.log("indexService...........",a.indexService),console.log(".........isShowDialogRefundService",a.isShowDialogRefundService),a.isShowDialogRefundService=!0})).catch((function(){console.log("cancel.............."),a.postForm.service[e].type_purchase=a.clone_convert_service[e].type_purchase})))},handleCloseDialogRefund:function(){this.listGolfers[this.indexGolfer-1].type_refund?this.isShowDialogRefund=!1:this.$message.warning("Bạn cần chọn loại hoàn tiền")},handleCloseDialogRefundService:function(){this.postForm.service[this.indexService-1].type_refund?this.isShowDialogRefundService=!1:this.$message.warning("Bạn cần chọn loại hoàn tiền")},updateDataJson:function(e,t){this.onGetListAgency(),this.onGetDetail(e)},onGetListAgency:function(){var e=this;le.searchAgency().then((function(t){if(0===t.error_code){var a=t.data;a.length>0?e.listAgency=a.map((function(e){return{value:e.id,label:e.name,data:e}})):e.listAgency=[]}else e.$message.error(t.error_msg)}))},onGetDetail:function(e){var t=this;return Object(m["a"])(Object(_["a"])().mark((function a(){return Object(_["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("_________",t.listTypePurchaseChildService),t.loadingDialog=!0,ne.detailBill({bill_id:e,all_service:!0}).then(function(){var e=Object(m["a"])(Object(_["a"])().mark((function e(a){var i,l,s,r,u,d,p,h,m,f,v,b,g,y,k,C,w,S,O,j,D,F,P,G,B,I,T,M,H,N,R,A,$,E,q,V,L,U,Q,z,Y,K,X;return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===a.error_code){for(h=a.data,Object(x["b"])(h.insurance_id_pax)||(v=null===h||void 0===h||null===(m=h.list_hio)||void 0===m?void 0:m.find((function(e){return+e.id===(null===h||void 0===h?void 0:h.insurance_id_pax)})),t.hio_outing="".concat(null===v||void 0===v||null===(f=v.OptionsMoney)||void 0===f?void 0:f.name," - BH").concat(null===v||void 0===v?void 0:v.id)),h.pax&&(g=0===(null===h||void 0===h||null===(b=h.pax)||void 0===b||null===(b=b.booked.filter((function(e){return"Sacombank"!==e.agency_name||0!==+e.price_booking})))||void 0===b?void 0:b.length),g&&(t.isSTB=!0)),t.dataRequest=Object(o["a"])(Object(o["a"])({},h),{},{customer_invoice:null===h||void 0===h||null===(i=h.pax)||void 0===i?void 0:i.customer_invoice,note:null===h||void 0===h||null===(l=h.pax)||void 0===l?void 0:l.note,revenue_price:null===h||void 0===h||null===(s=h.pax)||void 0===s?void 0:s.revenue_price}),y=0;y<(null===h||void 0===h||null===(k=h.golfers)||void 0===k?void 0:k.length);y++)H=h.golfers[y],N=Object(o["a"])(Object(o["a"])({},H),{},{user_id:H.id,name_out_system:null===H||void 0===H?void 0:H.name,price_booking:null===H||void 0===H||null===(C=H.booked)||void 0===C?void 0:C.price_booking,surcharge_facility_id:null===H||void 0===H||null===(w=H.surcharge_facility_id)||void 0===w?void 0:w.map((function(e){return e.code_surcharge_facility_id})),pax_booked_id:null===H||void 0===H||null===(S=H.booked)||void 0===S?void 0:S.id,vga:null===H||void 0===H?void 0:H.user_id,agency:null===H||void 0===H?void 0:H.agency_id,type_purchase:null===H||void 0===H||null===(O=H.booked)||void 0===O?void 0:O.type_purchase,quantity_guest:null===H||void 0===H||null===(j=H.booked)||void 0===j?void 0:j.quantity_guest,date_payment:null===H||void 0===H||null===(D=H.booked)||void 0===D?void 0:D.date_payment,date_agent_payment:null===H||void 0===H||null===(F=H.booked)||void 0===F?void 0:F.date_agent_payment,user_id_pay:null===H||void 0===H||null===(P=H.booked)||void 0===P?void 0:P.user_id_pay,surcharge_revenue:null===H||void 0===H||null===(G=H.booked)||void 0===G?void 0:G.surcharge_revenue,is_refund:null===H||void 0===H||null===(B=H.booked)||void 0===B?void 0:B.is_refund,passport:null===H||void 0===H||null===(I=H.booked)||void 0===I||null===(I=I.booking_user_passport)||void 0===I?void 0:I.passport,is_cancel:14===(null===H||void 0===H||null===(T=H.booked)||void 0===T?void 0:T.type_purchase)?1:0,type_refund:14===(null===H||void 0===H||null===(M=H.booked)||void 0===M?void 0:M.type_purchase)?-1:null}),t.listGolfers.push(N);t.clone_listGolfers=JSON.parse(JSON.stringify(t.listGolfers)),R=t.listGolfers.map((function(e){return e.insurance_id_pax})),A=(r=[]).concat.apply(r,Object(n["a"])(R)),console.log("..........list_hio_has_user",A),$=h.service.filter((function(e){return"hio"===e.type})).map((function(e){return e.hio_id})),E=h.list_hio.map((function(e){return e.id})),console.log("..........list_hio_all",E),q=E.filter((function(e){return!A.includes(e)&&!$.includes(e)})),console.log("..........list_hio_dif",q),V=h.list_hio.filter((function(e){return q.includes(e.id)&&0===+e.is_outing&&1===+e.is_send_pvi&&9!==+e.options_money_id})).map((function(e){return{User:e.User,options_money_id:e.options_money_id,can_payment:e.can_payment,id:e.id,id_general_bill_detail:e.id_general_bill_detail,is_outing:e.is_outing,user_id:e.user_id,total_pay:e.total_pay,is_send_pvi:e.is_send_pvi,status:e.status,is_customer_pay:e.is_customer_pay,is_pay:e.is_pay}})),console.log("..........list_hio_send_pvi_user_delete",V),L=t.listUserDEteleHioSendPVI(V),console.log("..........list_golfer_delete_hio_send_pvi",L),t.listGolfers=[].concat(Object(n["a"])(t.listGolfers),Object(n["a"])(L)),h.pax&&(t.listPax=[h.pax],t.facilities=[h.pax.facility].map((function(e){return{value:e.id,label:e.sub_title,path:e.paths}})),t.facilityModel=t.facilities[0]),t.listOtherService=h.service.filter((function(e){return"shop"===e.type})).map((function(e){return e.product})),U=h.golfers.map((function(e){return e.surcharge_facility_id})).flat().map((function(e){return e.booking_code_surcharge_facility})),t.listSurcharge=U.filter((function(e,t){return t===U.findIndex((function(t){return e.id===t.id}))})),1===h.order_type?t.isShowHIO=!1:t.isShowHIO=!0,console.log("...........data.service..",h.service),Q=new Map,h.service.forEach((function(e){var t=e.transaction_provider_id;Q.has(t)?(Q.get(t).name_product+=" + ".concat(e.name_product),Q.get(t).price+=e.price*e.quantity,Q.get(t).quantity=1):Q.set(t,Object(o["a"])({},e))})),z=Array.from(Q.values()),Y=z.map((function(e){var t,a,i,l;return Object(o["a"])(Object(o["a"])({},e),{},{type_purchase:"other_service"===e.type?1!==+(null===(t=e.bookingOutside)||void 0===t?void 0:t.status)||null!==(a=e.bookingOutside)&&void 0!==a&&a.type_purchase?null===(i=e.bookingOutside)||void 0===i?void 0:i.type_purchase:12:"shop"===e.type?1!==+e.status_payment||null!==e&&void 0!==e&&e.type_purchase?e.type_purchase:12:"hio"===e.type?e.is_cancel>0?14:null===e||void 0===e||null===(l=e.hio_info)||void 0===l?void 0:l.is_customer_pay:0,date_payment:"other_service"===e.type?e.bookingOutside.date_payment:"shop"===e.type?e.date_payment:"",date_agent_payment:"other_service"===e.type?e.bookingOutside.date_agent_payment:"",host_user_id:"other_service"===e.type?e.bookingOutside.user_id:"shop"===e.type&&null!==e&&void 0!==e&&e.user_id?null===e||void 0===e?void 0:e.user_id:h.host_user_id})})),K=Y.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{type_refund:14===e.type_purchase?-1:null})})),t.clone_convert_service=JSON.parse(JSON.stringify(K)),t.postForm=Object(o["a"])(Object(o["a"])({},h),{},{dayPlayed:c()(null===(u=h.pax)||void 0===u?void 0:u.date_played).format("DD-MM-YYYY"),timePlayed:"",pax:h.pax,service:K,order_type:h.order_type,host_user_id:h.host_user_id,path_id:null===(d=h.pax)||void 0===d?void 0:d.path_id,total_price:0,type_hole:h.type_hole,pax_id:null===(p=h.pax)||void 0===p?void 0:p.id,insurance_pax:h.insurance_pax,insurance_pax_d20:h.insurance_pax_d20,note:h.note}),X=h.service.filter((function(e){return 2===+e.id})),(null===X||void 0===X?void 0:X.length)>0&&(t.listHoldInOne=X.map((function(e){return{id:e.hio_info.id,total_pay:e.hio_info.total_pay}})))}else t.$message.error(a.error_msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loadingDialog=!1}));case 3:case"end":return a.stop()}}),a)})))()},listUserDEteleHioSendPVI:function(e){var t=[],a={};return e.forEach((function(e){var i=e.user_id;if(a[i]){var l=t.find((function(e){return e.id===i}));l.insurance_pax.push(e.options_money_id),l.insurance_id_pax.push(e.id)}else{var n,o={user_id:i,name:null===e||void 0===e||null===(n=e.User)||void 0===n?void 0:n.fullname,insurance_pax:[e.options_money_id],insurance_id_pax:[e.id],is_deleted:1};t.push(o),a[i]=!0}})),t},handleUpdate:function(){var e,t,a,i=this,l=this.listGolfers.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{date_payment:e.date_payment?c()(e.date_payment).format("yyyy-MM-DD HH:mm:ss"):"",date_agent_payment:e.date_agent_payment?c()(e.date_agent_payment).format("yyyy-MM-DD HH:mm:ss"):""})})),n={insurance_pax_d20:this.dataRequest.insurance_pax_d20,list_hio:this.dataRequest.list_hio,refund:this.postForm.refund,service:this.postForm.service,general_bill_id:this.postForm.general_bill_id,pax_id:this.postForm.pax_id,note:null===(e=this.dataRequest)||void 0===e?void 0:e.note,customer_invoice:null===(t=this.dataRequest)||void 0===t?void 0:t.customer_invoice,revenue_price:null===(a=this.dataRequest)||void 0===a?void 0:a.revenue_price};console.log("...............{ data: this.dataRequest, list_golfer}..........",{status_bill:this.status_bill,isSTB:this.isSTB,data:n,list_golfer_booking:l,check_exist_not_payment:this.check_exist_not_payment,listGolfers_old:this.clone_listGolfers,convert_service_old:this.clone_convert_service}),this.loadingSubmit=!0,ne.updateStatisticBill({status_bill:this.status_bill,isSTB:this.isSTB,data:n,list_golfer_booking:l,check_exist_not_payment:this.check_exist_not_payment,listGolfers_old:this.clone_listGolfers.map((function(e){var t,a;return{booked:{id:null===e||void 0===e||null===(t=e.booked)||void 0===t?void 0:t.id,type_purchase:null===e||void 0===e||null===(a=e.booked)||void 0===a?void 0:a.type_purchase}}}))}).then(function(){var e=Object(m["a"])(Object(_["a"])().mark((function e(t){return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.handleClose();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){i.loadingSubmit=!1}))},onSearchAgency:function(e){var t=this;this.loadingSearchAgency=!0,oe.searchAgency({keyword_agency:e.trim()}).then((function(e){t.loadingSearchAgency=!1;var a=e.error_code,i=e.data;0===a&&(t.listAgency=i)}))},onSearchSupplier:function(e){var t=this;this.loadingSearchSupplier=!0,oe.searchSupplier({keyword_supplier:e.trim()}).then((function(e){t.loadingSearchSupplier=!1;var a=e.error_code,i=e.data;0===a&&(t.suppliers=i)}))},handlePriceService:function(e){var t=this.postForm.service[e];return Object(f["k"])(t.price)},convertHio:function(e,t,a){return console.log("data_hio.........",this.data_hio),console.log("insurance_provider.........",t),this.listInsurrance.filter((function(t){return e.includes(+t.value)})).map((function(e,a){var i,l,n;return"".concat(e.label," - BH").concat(null===t||void 0===t||null===(i=t.find((function(t){return+t.options_money_id===+e.value})))||void 0===i?void 0:i.id," - \n        ").concat(Object(f["k"])(e.price),"đ \n        ").concat((null===t||void 0===t||null===(l=t.find((function(t){return+t.options_money_id===+e.value})))||void 0===l?void 0:l.is_cancel)>0?"(Đã hủy)":1===(null===t||void 0===t||null===(n=t.find((function(t){return+t.options_money_id===+e.value})))||void 0===n?void 0:n.is_customer_pay)?"(Đã thanh toán)":"(Chưa thanh toán)")})).join(", ")},convertListTypePurchaseChild:function(e){if(-1===+e.id)return this.listTypePurchaseChildService;if(2===+e.id)return 1===+e.type_purchase?[{value:1,label:"Đã thanh toán"},{value:14,label:"Đã hủy"}]:[{value:0,label:"Chưa thanh toán"},{value:1,label:"Đã thanh toán"},{value:14,label:"Đã hủy"}];if(1===+e.id){var t=Object(n["a"])(this.listTypePurchaseChildService);return 1===+e.status_payment?t.slice(1):t}return[]},handleClose:function(){this.listGolfers=[],this.clone_listGolfers=[],this.postForm={},this.check_exist_not_payment=!0,this.dataRequest={type_purchase:""},this.indexGolfer=null,this.indexService=null,this.clone_convert_service=[],this.dialogShowOTP=!1,this.otp="",this.$emit("closeDialog",{dialog:!1,reload:!1})},convertDateTime:f["b"],formatNumber:f["k"]}},re=se,ce=(a("ae12"),a("51b1"),Object(M["a"])(re,W,Z,!1,null,"0a3fdfe0",null)),ue=ce.exports,de=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"Xuất chứng từ",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.postForm}},[t("el-form-item",[t("el-radio-group",{on:{change:e.handleRadio},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("el-radio",{attrs:{border:"",value:1,label:1}},[e._v("Khách có MST")]),t("el-radio",{attrs:{border:"",value:2,label:2}},[e._v("Khách lẻ")])],1)],1),t("el-form-item",{attrs:{label:"Nhập mã số thuế khách hàng",required:""}},[t("el-form-item",{attrs:{prop:"tax_code"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:2===e.radio,filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"Nhập mã số thuế của khách","remote-method":e.onSearchPaxCode,loading:e.loadingSearchPaxCode},on:{change:e.handleTaxCode},model:{value:e.postForm.tax_code,callback:function(t){e.$set(e.postForm,"tax_code",t)},expression:"postForm.tax_code"}},e._l(e.listpax,(function(e,a){return t("el-option",{key:a,attrs:{label:e.companyName+" - Mã thuế: "+e.taxCode,value:e.taxCode}})})),1)],1)],1),t("el-form-item",{attrs:{label:"Tên sản phẩm",required:""}},[t("el-form-item",{attrs:{prop:"product_name"}},[t("el-input",{attrs:{placeholder:"Nhập tên sản phẩm"},model:{value:e.postForm.product_name,callback:function(t){e.$set(e.postForm,"product_name",t)},expression:"postForm.product_name"}})],1)],1),t("el-form-item",{attrs:{label:"Họ tên người mua",required:""}},[t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{placeholder:"Nhập tên người mua"},model:{value:e.postForm.name,callback:function(t){e.$set(e.postForm,"name",t)},expression:"postForm.name"}})],1)],1),t("el-form-item",{attrs:{label:"Mã số thuê"}},[t("el-input",{attrs:{disabled:"",placeholder:"Mã số thuê"},model:{value:e.postForm.tax_code,callback:function(t){e.$set(e.postForm,"tax_code",t)},expression:"postForm.tax_code"}})],1),t("el-form-item",{attrs:{label:"Địa chỉ",required:""}},[t("el-form-item",{attrs:{prop:"address"}},[t("el-input",{attrs:{placeholder:"Địa chỉ"},model:{value:e.postForm.address,callback:function(t){e.$set(e.postForm,"address",t)},expression:"postForm.address"}})],1)],1),t("el-form-item",{attrs:{label:"Mã Bill :",required:""}},[t("el-form-item",{attrs:{prop:"general_bill_ids"}},e._l(e.listBill,(function(a,i){return t("el-tag",{key:i,staticStyle:{"margin-right":"10px"},attrs:{closable:"",type:"primary"},on:{close:function(t){return e.handleCloseBill(a)}}},[e._v(" Code: "+e._s(a.bill_code)+" ")])})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("Hủy")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("Xuất")])],1)],1)},pe=[],he=a("bc3a"),_e=a.n(he),me=new g["a"],fe={name:"ExportVoucher",props:{listBillExport:{type:Array,default:function(){return[]}},dialogVisible:{type:Boolean,default:!1}},data:function(){var e=this;return{radio:1,rules:{tax_code:[{validator:function(t,a,i){return Object(x["q"])(t,1===e.radio?e.postForm.tax_code:"ok",i,"Mã số thuế")},trigger:"change"}],product_name:[{validator:function(t,a,i){return Object(x["q"])(t,e.postForm.product_name,i,"Tên sản phẩm")},trigger:"change"}],name:[{validator:function(t,a,i){return Object(x["q"])(t,e.postForm.name,i,"Người mua")},trigger:"change"}],address:[{validator:function(t,a,i){return Object(x["q"])(t,e.postForm.address,i,"Địa chỉ")},trigger:"change"}],general_bill_ids:[{validator:function(t,a,i){return Object(x["f"])(t,e.postForm.general_bill_ids,i,"Mã bill")},trigger:"change"}]},postForm:{},payments:[{id:0,name:"Chuyển khoản"},{id:1,name:"Tiền mặt"},{id:2,name:"Chuyển khoản / tiền mặt"}],paxCode:null,loadingSearchPaxCode:!1,loadingSearchBill:!1,listpax:[],listBill:[],general_bill_id:null,loadingSubmit:!1}},watch:{listBillExport:function(e){this.listBill=e,this.postForm.general_bill_ids=null===e||void 0===e?void 0:e.map((function(e){return e.general_bill_id}))}},methods:{handleCloseBill:function(e){this.listBill.splice(this.listBill.findIndex((function(t){return t.general_bill_id===e.general_bill_id})),1),this.postForm.general_bill_ids.splice(this.postForm.general_bill_ids.indexOf(e.general_bill_id),1),this.$emit("onRemoveBillExport",e)},onSearchPaxCode:function(e){var t=this;return Object(m["a"])(Object(_["a"])().mark((function a(){var i,l;return Object(_["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingSearchPaxCode=!0,i={project:"VGS",apikey:"6PTi057KDbwDrNXAuvQCF5D2RIyOW4Cv"},l={input:e},a.next=5,_e.a.get("https://test-org.misa.com.vn/ms-org/v1/search",{headers:i,params:l}).then((function(e){t.loadingSearchPaxCode=!1;var a=e.data;t.listpax=a.data}));case 5:case"end":return a.stop()}}),a)})))()},onSearchBill:function(e){var t=this,a={code_key:e,page:1,limit:10};this.loadingSearchBill=!0,me.listBill(a).then((function(e){var a;(console.log(e),0===e.error_code)?t.listBill=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(a=a.bill)||void 0===a?void 0:a.bill_list.filter((function(e){return 0===e.misa_voucher_status||2===e.misa_voucher_status})):t.$message.error(e.error_msg)})).finally((function(){t.loadingSearchBill=!1}))},handleRadio:function(e){2===e&&(this.listpax=[],delete this.postForm.tax_code)},handleTaxCode:function(e){if(e){var t=this.listpax.find((function(t){return t.taxCode===e}));this.postForm.tax_code=t.taxCode,this.postForm.address=t.address,this.postForm.name=t.companyName}},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.loadingSubmit=!0,t.postForm.employee_id=Object(k["a"])().id,me.createMiSaVoucher(t.postForm).then((function(e){0===e.error_code?(t.$emit("onClickButtonExportVoucher",{dialog:!1,reload:!0}),t.$message.success("Xuất chứng từ thành công"),t.resetDataModal()):t.$message.error(e.error_msg)})).finally((function(){t.loadingSubmit=!1})))}))},handleClose:function(){this.$emit("onClickButtonExportVoucher",{dialog:!1,reload:!1}),this.resetDataModal()},resetDataModal:function(){var e=this;return Object(m["a"])(Object(_["a"])().mark((function t(){return Object(_["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve((e.listpax=[],e.listpax=[],e.postForm={},e.listBill=[],e.general_bill_id=""));case 2:e.$refs["ruleForm"].clearValidate();case 3:case"end":return t.stop()}}),t)})))()}}},ve=fe,be=(a("99c3"),Object(M["a"])(ve,de,pe,!1,null,"0f1df33d",null)),ge=be.exports,ye=a("26ed"),xe=a("a275"),ke=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.showDialog,"before-close":e.handleClose,width:"50%",title:"Cập nhật giá nhập phụ phí"},on:{"update:visible":function(t){e.showDialog=t}}},[t("table",{staticStyle:{width:"100%","text-align":"center"}},[t("thead",[t("th",{staticStyle:{width:"50px"}},[e._v("#")]),t("th",[e._v("Tên")]),t("th",[e._v("Phụ phí")]),t("th",[e._v("Giá nhập phụ phí")])]),t("tbody",e._l(e.booked,(function(a,i){return t("tr",{key:i},[t("td",{staticStyle:{width:"50px"}},[e._v(e._s(i+1))]),t("td",[e._v(e._s(a.golfer?a.golfer.fullname:a.name_out_system))]),t("td"),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.body.surcharge_entry_price[i].surcharge_entry_price,expression:"body.surcharge_entry_price[index].surcharge_entry_price"}],staticClass:"surcharge-revenue",attrs:{type:"number",placeholder:"Nhập giá phụ phí"},domProps:{value:e.body.surcharge_entry_price[i].surcharge_entry_price},on:{input:function(t){t.target.composing||e.$set(e.body.surcharge_entry_price[i],"surcharge_entry_price",t.target.value)}}})])])})),0)]),t("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[t("el-button",{on:{click:e.handleClose}},[e._v("Đóng")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:e.onsubmitInput}},[e._v("Lưu")])],1)])},Ce=[],we=new g["a"],Se={name:"DialogInputPriceBill",props:{showDialog:{type:Boolean,default:!1},objectData:{type:Object,default:function(){return{}}}},data:function(){return{booked:[],loadingSubmit:!1,body:{pax_id:"",surcharge_entry_price:[]}}},watch:{objectData:function(e){if(console.log("row..........",e),e.pax){var t=e.pax;this.body.pax_id=t.id,this.body.general_bill_id=e.general_bill_id,this.booked=t.booked;var a=[];this.booked.map((function(e){console.log(e,"--surcharge_entry_price");var t={booked_id:e.id,surcharge_entry_price:e.surcharge_entry_price};a.push(t)})),console.log("..............user",a),this.body.surcharge_entry_price=a}}},methods:{onsubmitInput:function(){var e=this;this.loadingSubmit=!0,we.updateBookedSurchargeEntryPrice(this.body).then((function(t){console.log("--------------------"),e.loadingSubmit=!1;var a=t.error_code,i=t.error_msg;0===a?(e.$message.success(i),e.handleClose()):e.$message.error(i)})).catch((function(t){e.loadingSubmit=!1}))},handleClose:function(){this.$emit("handleCloseDialog",{dialog:!1,reload:!1})}}},Oe=Se,je=(a("6518"),Object(M["a"])(Oe,ke,Ce,!1,null,"7482b9c8",null)),De=je.exports,Fe=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.showDialog,"before-close":e.handleClose,width:"70%",title:"Thông tin nhà cung cấp1"},on:{"update:visible":function(t){e.showDialog=t}}},[t("table",{staticClass:"table-golfer border w-100",staticStyle:{width:"100%","text-align":"center"}},[t("thead",[t("th",{staticStyle:{width:"50px"}},[e._v("#")]),t("th",{staticStyle:{"min-width":"180px"}},[e._v("Tên dịch vụ")]),t("th",{staticStyle:{"min-width":"180px"}},[e._v("Mã hàng")]),t("th",{staticStyle:{"min-width":"180px"}},[e._v("Nhà cung cấp")]),t("th",{staticStyle:{"min-width":"180px"}},[e._v("Giá nhập")]),t("th",{staticStyle:{"min-width":"180px"}},[e._v("Xác nhận TT NCC")])]),t("tbody",e._l(e.list_service,(function(a,i){return t("tr",{key:i},[t("td",{staticStyle:{width:"50px"}},[e._v(e._s(i+1))]),t("td",[e._v(" "+e._s(a.service)+" ")]),t("td",[e._v(" "+e._s(a.label)+" ")]),t("td",[1==a.id||"other_service"==a.type?t("el-select",{attrs:{size:"small",filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"Tìm kiếm NCC",loading:e.loadingSearchSupplier},model:{value:e.list_service[i].supplier_id,callback:function(t){e.$set(e.list_service[i],"supplier_id",t)},expression:"list_service[index].supplier_id"}},e._l(e.suppliers,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):"shop"==a.type?t("span",[e._v(e._s(a.supplier_id))]):e._e()],1),t("td",[1==a.id||"other_service"==a.type?t("el-input-number",{attrs:{size:"small",placeholder:"Giá nhập"},model:{value:e.list_service[i].source_price,callback:function(t){e.$set(e.list_service[i],"source_price",t)},expression:"list_service[index].source_price"}}):"shop"==a.type?t("span",[e._v(e._s(e.list_service[i].source_price?e.formatNumber(e.list_service[i].source_price):""))]):e._e()],1),e.data_pax&&0==e.data_pax.is_purchase_supplier&&!e.comfirm_done?t("td",[1==a.id?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.comfirmTT()}}},[e._v("Xác nhận TT")]):e._e()],1):t("td",[1==a.id?t("el-tag",{attrs:{type:"success"}},[e._v("Đã cập nhật thanh toán nhà cung")]):e._e()],1)])})),0)]),t("div",{staticStyle:{"text-align":"right","margin-top":"20px"}},[t("el-button",{on:{click:e.handleClose}},[e._v("Đóng")]),t("el-button",{attrs:{type:"primary",loading:e.loadingSubmit},on:{click:e.onsubmitInput}},[e._v("Lưu")])],1)])},Pe=[],Ge=new te["a"],Be=new g["a"],Ie={name:"DialogUpdateSupplier",props:{showDialog:{type:Boolean,default:!1},objectData:{type:Object,default:function(){return{}}}},data:function(){return{booked:[],loadingSubmit:!1,list_service:[],suppliers:[],loadingSearchSupplier:!1,pax_id:"",id_bill:"",data_pax:{},comfirm_done:!1}},watch:{objectData:function(e){Object(x["b"])(e)||(this.id_bill=e.general_bill_id,this.onGetDetail(e.general_bill_id),this.onGetListService())}},methods:{onGetDetail:function(e){var t=this;return Object(m["a"])(Object(_["a"])().mark((function a(){return Object(_["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingDialog=!0,a.next=3,Be.detailBill({bill_id:e}).then(function(){var e=Object(m["a"])(Object(_["a"])().mark((function e(a){var i,l,o,s,r,c,u;return Object(_["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===a.error_code?(t.data_pax=null===(i=a.data)||void 0===i?void 0:i.pax,console.log("this.pax........",t.data_pax),console.log("res.data?.service..........",null===(l=a.data)||void 0===l?void 0:l.service),r=null===(o=a.data)||void 0===o||null===(o=o.service)||void 0===o?void 0:o.map((function(e,t){var a,i,l,n;return{id:t+2,type:e.type,service:"other_service"===e.type?"Sản phẩm khác":"hio"===e.type?"Bảo hiểm":"Shop",label:"other_service"===e.type?null===e||void 0===e?void 0:e.name_other_service:"hio"===e.type?"BH"+(null===e||void 0===e?void 0:e.hio_id):null===e||void 0===e?void 0:e.name_product,supplier_id:"other_service"===e.type?null===e||void 0===e||null===(a=e.bookingOutside)||void 0===a?void 0:a.supplier_id:"shop"===e.type?null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.shop_name:"",pax_id:null,other_service_id:"other_service"===e.type?null===e||void 0===e||null===(l=e.bookingOutside)||void 0===l?void 0:l.id:null,source_price:"other_service"===e.type?null===e||void 0===e||null===(n=e.bookingOutside)||void 0===n?void 0:n.original_amount:"shop"===e.type?null===e||void 0===e?void 0:e.cost:""}})),t.data_pax?t.list_service=[{id:1,service:"Booking",label:"",supplier_id:null===(c=a.data)||void 0===c||null===(c=c.pax)||void 0===c?void 0:c.supplier_id,pax_id:null===(u=a.data)||void 0===u?void 0:u.pax_id,other_service_id:null,source_price:9===t.data_pax.number_hole?t.data_pax.source_price_9:27===t.data_pax.number_hole?t.data_pax.source_price_27:t.data_pax.source_price_18}].concat(Object(n["a"])(r)):t.list_service=Object(n["a"])(r),console.log("..........list_service.......",t.list_service),t.pax_id=null===(s=a.data)||void 0===s?void 0:s.pax_id):t.$message.error(a.error_msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.loadingDialog=!1}));case 3:case"end":return a.stop()}}),a)})))()},onsubmitInput:function(){var e=this;this.loadingSubmit=!0,Be.updateSuplierBill({list_service:this.list_service,pax_id:this.pax_id,general_bill_id:this.id_bill}).then((function(t){console.log("--------------------"),e.loadingSubmit=!1;var a=t.error_code,i=t.error_msg;0===a?(e.$message.success(i),e.handleClose()):e.$message.error(i)})).catch((function(t){e.loadingSubmit=!1}))},onGetListService:function(){var e=this;Ge.listSupplier().then((function(t){var a=t.error_code,i=t.data;0===a&&(e.suppliers=i)}))},comfirmTT:function(){var e,t=this,a={pax_id:null===(e=this.data_pax)||void 0===e?void 0:e.id,type:0,general_bill_id:this.id_bill};this.$confirm("Bạn có chắc muốn xác nhận thanh toán NCC cho bill này?").then((function(e){Be.confirmExpense(a).then((function(e){var a=e.error_code,i=e.error_msg;0===a?(t.comfirm_done=!0,t.$message.success(i),t.onGetLists()):t.$message.error(i)}))}))},handleClose:function(){this.$emit("handleCloseDialog",{dialog:!1,reload:!1})},formatNumber:f["k"]}},Te=Ie,Me=(a("ade3"),Object(M["a"])(Te,Fe,Pe,!1,null,"439783dc",null)),He=Me.exports,Ne=["page","limit"],Re=new ae["a"],Ae=new xe["a"],$e=new g["a"],Ee={name:"Lists",components:{Pagination:u["a"],DialogDetailOtherService:L,DialogDetailBill:N,exportVoucher:ge,DialogConfirmPayment:J,DialogStatistic:ue,DialogInputPriceBill:De,DialogUpdateSupplier:He},props:{admin:{type:Object,default:function(){return{}}},bank:{type:Object,default:function(){return{}}}},data:function(){return{listAgency:[],is_delete:Object(k["a"])().is_delete,is_write:Object(k["a"])().is_write,is_edit:Object(k["a"])().is_edit,dataAllAdmin:Object(k["c"])()||[],listQuery:{limit:10,page:1,admin_id:[Object(k["a"])().id]},isAdd:!0,tableData:[],total:0,from:0,total_money:0,objectData:{},objectDataV2:{},showDialogAddGolfer:!1,showDialogDetailService:!1,showDialogDetail:!1,loadingTable:!1,loadingData:!1,showVoucher:!1,showDialogConfirmPayment:!1,serviceId:0,bill:{},objectDataProduct:{},status_bill:ee["k"],payment_method:ee["g"],color_status:ee["c"],voucher_status:ee["e"],listInsurrance:[],objectVoucher:{},region:ee["i"],isColumnDisabled:!0,multipleSelection:[],loadingExportExcel:!1,objectDataStatistic:{},showDialogStatistic:!1,showPriceInput:!1,objectDataPriceInput:{},showUpdateSupplier:!1,objectDataUpdateSupplier:{},DateRangeCreated:[]}},computed:{},watch:{DateRangeCreated:function(e){if(e){this.listQuery.start_time=1e3*c()(e[0]).unix(),this.listQuery.end_time=1e3*c()(e[1]).unix();var t=new Date(this.listQuery.start_time);t.setDate(t.getDate()+31),new Date(this.listQuery.end_time).getTime()>t.getTime()&&(this.$message.warning("Chọn tối đa 31 ngày thôi !!!"),this.DateRangeCreated=void 0,this.listQuery.start_time=void 0,this.listQuery.end_time=void 0,console.log("this.listQuery.......",this.listQuery))}else delete this.listQuery.start_time,delete this.listQuery.end_time},"listQuery.date_played":function(e){if(e){console.log("value..........",e,c()(this.listQuery.date_played[1],"DD/MM/yyyy").unix()),console.log("start..........",1e3*c()(this.listQuery.date_played[0],"DD/MM/yyyy").unix());var t=1e3*c()(this.listQuery.date_played[0],"DD/MM/yyyy").add(31,"days").unix(),a=1e3*c()(this.listQuery.date_played[1],"DD/MM/yyyy").unix();console.log("Max31Day..........",t),console.log("last_day..........",a),t<a&&(this.$message.warning("Chọn tối đa 31 ngày thôi !!!"),this.listQuery.date_played=void 0,console.log("this.listQuery.......",this.listQuery))}}},created:function(){this.getListInsurrance()},mounted:function(){this.onGetLists(),this.getRevenueBillBySale(),this.getListAgent()},beforeDestroy:function(){},methods:{getRevenueBillBySale:function(){var e=this,t=this.listQuery,a=t.page,i=t.limit,l=Object(s["a"])(t,Ne);console.log(a,i),$e.getRevenueBillBySale(Object(o["a"])(Object(o["a"])({},l),{},{admin_id:Object(k["a"])().id})).then((function(t){var a;0===t.error_code?(console.log(t),e.total_money=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.payment_amount)||0):e.$message.error(t.error_msg)}))},getListAgent:function(){var e=this;Re.searchAgency().then((function(t){if(0===t.error_code){var a=t.data;a.length>0?e.listAgency=a.map((function(e){return{value:e.id,label:e.name,data:e}})):e.listAgency=[]}else e.$message.error(t.error_msg)}))},canSelectRow:function(e,t){return 0!==e.status&&(0===e.misa_voucher_status||2===e.misa_voucher_status)},handleFilter:function(){this.listQuery.page=1,this.onGetLists(),this.getRevenueBillBySale()},handleClickDialogAddGolfer:function(e){this.showDialogAddGolfer=!1,e&&this.onGetLists()},onSearchForm:function(e){this.listQuery=e,this.onGetLists()},onReloadTableData:function(e){e&&(this.listQuery=Object.assign({},{limit:10,page:1}),this.onGetLists())},onGetLists:function(){var e=this;this.loadingTable=!0,$e.listBill(this.listQuery).then((function(t){var a,i;(console.log(t),0===t.error_code)?(e.tableData=null===t||void 0===t||null===(a=t.data)||void 0===a||null===(a=a.bill)||void 0===a?void 0:a.bill_list,e.total=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.total,e.tableData.map((function(e){e.hio=[],e.out=[],e.data_provider.forEach((function(t){if("buy_hio"===t.name){var a=t.data_transaction.name_tour.split("-")[1]+" - "+t.data_transaction.id;e.hio.push(a)}else if("booking_outside_new"===t.name){var i="OUT"+t.data_transaction.payment_id;e.out.push(i)}}))})),console.log("this.tableData",e.tableData)):e.$message.error(t.error_msg)})).finally((function(){e.loadingTable=!1}))},onShowDetail:function(e){this.showDialogDetail=!0,this.objectData=Object(o["a"])({},e)},handleEdit:function(e){this.showDialogAddGolfer=!0,this.isAdd=!1,this.bill=Object(o["a"])({},e)},handleDelete:function(e){var t=this;this.$confirm("Bạn có chắc chắn xóa Bill này ?").then((function(a){var i={general_bill_id:e},l=t.create_signature(i);i=Object(o["a"])(Object(o["a"])({},i),{},{signature:l}),$e.removeBooking(i).then((function(e){0===e.error_code?(t.$message.success("Xóa thành công"),t.onGetLists()):t.$message.error(e.error_msg)}))}))},handleConfirmBill:function(e){var t=this;this.$confirm("Bạn có muốn xác nhận bill này ?").then((function(a){var i={general_bill_id:e},l=t.create_signature(i);i=Object(o["a"])(Object(o["a"])({},i),{},{signature:l}),$e.billConfirm(i).then((function(e){0===e.error_code?(t.$message.success("Xác nhận thành công."),t.onGetLists()):t.$message.error(e.error_msg)}))}))},handleIndexMethod:function(e){return 1===this.listQuery.page?this.listQuery.page+e:10*this.listQuery.page+e},handleOpenDialogDetailProduct:function(e){this.showDialogDetailService=!0,e&&(this.serviceId=e.service_id)},handleClickDialogDetailService:function(e){this.showDialogDetailService=!1,e&&(this.objectDataProduct=e)},handleClickDialogDetail:function(e){this.showDialogDetail=!1},handleAddBill:function(){this.showDialogAddGolfer=!0,this.isAdd=!0},getListInsurrance:function(){var e=this;Ae.listAllPackage().then((function(t){if(0===t.error_code){var a=null===t||void 0===t?void 0:t.data;a.length>0?(e.listInsurrance=a.filter((function(e){return e.name&&e.name.includes("D")&&(1===e.is_public&&4===e.number_hole||4===e.number_hole&&"D20"===e.name)})).map((function(e){return{value:e.id,label:e.name,price:e.price}})),e.listInsurrance=[].concat(Object(n["a"])(e.listInsurrance),[{value:0,label:"Không mua",price:0}])):e.listInsurrance=[{value:0,label:"Không mua",price:0}]}else e.$message.error(t.error_msg)}))},handleAdmin:function(e){var t=this.dataAllAdmin.find((function(t){return t.id===e}));return t?t.name:e},handleClickButtonExportVoucher:function(e){var t=e.dialog,a=e.reload;this.showVoucher=t,a?this.onGetLists():this.$refs.multipleTable.clearSelection()},exportVoucher:function(){this.showVoucher=!0},handleConfirmPayment:function(e){this.objectDataV2=Object(o["a"])({},e),this.showDialogConfirmPayment=!0},handleClickButtonConfirmPayment:function(e){var t=e.dialog,a=e.reload;this.showDialogConfirmPayment=t,a&&this.onGetLists()},handleSelectionChanged:function(e){console.log("value_________________",e),Object(x["b"])(e)?delete this.listQuery.facility_id:(this.listQuery.facility_id=e.value,console.log("this.listQuery.facility_id",this.listQuery))},handleSelectionChangedAdmin:function(e){Object(x["b"])(e)?delete this.listQuery.admin_id:this.listQuery.admin_id=e},handleSelectionChangedAgency:function(e){console.log("value",e),Object(x["b"])(e)?delete this.listQuery.agency_id:this.listQuery.agency_id=e.value},handleSelectionChangedUser:function(e){console.log("value",e),Object(x["b"])(e)?delete this.listQuery.uid:this.listQuery.uid=e.value},handleRemoveBillExport:function(e){var t=this,a=[e];a.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e,!1)}))},handleSelectionChange:function(e){this.multipleSelection=e},handleExportExcel:function(){var e=this;this.loadingExportExcel=!0;var t=Object.assign({},this.listQuery);delete t.page,delete t.limit,console.log(this.listQuery),console.log(t),$e.exportBill(t).then((function(e){var t=document.createElement("a");t.href=e.data.link.includes("http")?e.data.link:"http://"+e.data.link,t.download="statistic.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((function(t){e.$message.error((null===t||void 0===t?void 0:t.error_code)||"Có lỗi xảy ra")})).finally((function(){e.loadingExportExcel=!1}))},onShowStatistic:function(e){this.showDialogStatistic=!0,this.objectDataStatistic=Object(o["a"])({},e)},handleCloseDialog:function(){this.objectDataStatistic={},this.showDialogStatistic=!1,this.showPriceInput=!1,this.showUpdateSupplier=!1,this.objectDataUpdateSupplier={},this.onGetLists()},handleInputPrice:function(e){var t;console.log(".....roww,,,,,,,,,",e),this.objectDataPriceInput=Object.assign({},{pax:null===(t=JSON.parse(e.data_json))||void 0===t?void 0:t.pax,general_bill_id:e.general_bill_id}),this.showPriceInput=!0},handleShowUpdateSupplier:function(e){this.objectDataUpdateSupplier=Object(o["a"])({},e),this.showUpdateSupplier=!0},checkShowButtonConfirmPayment:function(e){var t,a,i,l,n=JSON.parse(e.data_json),o=(null===n||void 0===n||null===(t=n.hio)||void 0===t?void 0:t.some((function(e){return 1===(null===e||void 0===e?void 0:e.is_customer_pay)})))||(null===n||void 0===n||null===(a=n.pax)||void 0===a?void 0:a.booked.some((function(e){return(null===e||void 0===e?void 0:e.type_purchase)>0&&14!==+(null===e||void 0===e?void 0:e.type_purchase)})))||(null===n||void 0===n||null===(i=n.other_services)||void 0===i?void 0:i.some((function(e){return 1===(null===e||void 0===e?void 0:e.status)})))||(null===n||void 0===n||null===(l=n.shop)||void 0===l?void 0:l.some((function(e){return e.some((function(e){return(null===e||void 0===e?void 0:e.paid)>0}))})));return console.log("json..................",JSON.parse(e.data_json)),console.log("check_exist_payment.....",o),console.log("status........",e.status),(2===e.status||3===e.status)&&!o&&1!==(null===e||void 0===e?void 0:e.is_cancel)},formatNumber:f["k"],create_signature:ye["create_signature"],formatDate:f["j"]}},qe=Ee,Ve=(a("1122"),Object(M["a"])(qe,i,l,!1,null,"4be84974",null));t["default"]=Ve.exports},"579c":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=a("6c6e"),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"agency")}return Object(l["a"])(a,[{key:"searchAgency",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/search"),method:"get",params:e})}},{key:"listPriceFacilityAgency",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/list_price_facility_agency"),method:"get",params:e})}}]),a}(s["a"])},6:function(e,t){},6518:function(e,t,a){"use strict";a("9836")},"6b5b":function(e,t,a){},"6f48":function(e,t,a){"use strict";var i=a("6d61"),l=a("6566");i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),l)},7:function(e,t){},7255:function(e,t,a){},7511:function(e,t,a){},"77a2":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=(a("99af"),a("6c6e")),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"surcharge-facility")}return Object(l["a"])(a,[{key:"lists",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/lists"),method:"post",data:e})}},{key:"search",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/search"),method:"post",data:e})}},{key:"created",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/created"),method:"post",data:e})}},{key:"update",value:function(e,t){return Object(r["a"])({url:c+"/".concat(this.uri,"/update/").concat(t),method:"post",data:e})}},{key:"deleted",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/deleted"),method:"post",data:e})}}]),a}(s["a"])},"77c0":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-avatar",{staticClass:"image-avatar",attrs:{size:60,src:e.avatarPath},on:{error:e.errorHandler}},[t("img",{attrs:{src:e.avatarPathDefault}})])},l=[],n={name:"ElAvatarCustom",props:{avatarPath:{type:String,default:null},avatarPathDefault:{type:String,default:null}},methods:{errorHandler:function(){return!0}}},o=n,s=(a("097c"),a("2877")),r=Object(s["a"])(o,i,l,!1,null,null,null);t["a"]=r.exports},8:function(e,t){},"81fe":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("el-select",{ref:"searchGolfer",staticClass:"w-100",attrs:{filterable:"",remote:"",size:e.size,clearable:"","reserve-keyword":"",placeholder:"Tìm kiếm mã VID","remote-method":e.onSearchGolfer,loading:e.loadingSearchUser},on:{change:e.handleSelectionChange,"hook:mounted":function(t){return e.cancalReadOnly(t,"searchGolfer")},"visible-change":function(t){return e.cancalReadOnly(t,"searchGolfer")}},model:{value:e.golferModel,callback:function(t){e.golferModel=t},expression:"golferModel"}},e._l(e.users,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),1)],1)},l=[],n=a("2909"),o=(a("99af"),a("d81d"),a("8ce5")),s=a("61f7"),r=new o["a"],c={name:"SearchUser",props:{clearData:{type:Boolean,default:!1},object:{type:Object,default:function(){return{}}},size:{type:String,default:"medium"},dataModel:{type:Object,default:function(){return{}}},dataDefault:{type:Array,default:function(){return[]}}},data:function(){return{golferModel:{},users:[],loadingSearchUser:!1}},watch:{clearData:function(e){console.log("val.....................clear                vào đây",e),e&&(this.golferModel={},this.users=[])},dataModel:function(e){console.log("val.....................dataModel",Object(s["b"])(e),e),Object(s["b"])(e)?(this.golferModel={},this.users=[]):(console.log("tại sao lại vào đây..............................",!Object(s["b"])(e)),this.golferModel={value:e._id,label:"VID".concat(e._id," - ").concat(e.fullname)},this.users=[this.golferModel],console.log("this.golferModel",this.golferModel))},dataDefault:function(e){Object(s["b"])(e)||(this.users=Object(n["a"])(e),console.log("this.users........",this.users))}},methods:{cancalReadOnly:function(e,t){var a=this;this.$nextTick((function(){if(!e){var i=a.$refs[t],l=i.$el.querySelector(".el-input__inner");l.removeAttribute("readonly")}}))},onSearchGolfer:function(e){var t=this;r.searchGolfer({keyword:e}).then((function(e){var a=e.data;0===e.error_code?(a.length>0?t.users=a.map((function(e){var t="VID".concat(e.id," - ").concat(e.fullname);return{value:e.id,label:t}})):t.users=[],t.loadingSearchUser=!1):t.$message.error(e.error_msg)}))},handleSelectionChange:function(e){console.log(this.golferModel),this.$emit("selection-changed-user",this.golferModel)}}},u=c,d=a("2877"),p=Object(d["a"])(u,i,l,!1,null,null,null);t["a"]=p.exports},"857a":function(e,t,a){"use strict";var i=a("e330"),l=a("1d80"),n=a("577e"),o=/"/g,s=i("".replace);e.exports=function(e,t,a,i){var r=n(l(e)),c="<"+t;return""!==a&&(c+=" "+a+'="'+s(n(i),o,"&quot;")+'"'),c+">"+r+"</"+t+">"}},"8ce5":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=a("6c6e"),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"golfer")}return Object(l["a"])(a,[{key:"searchGolfer",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/search"),method:"get",params:e})}},{key:"getInGolfer",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/get-in-golfer"),method:"post",data:e})}},{key:"checkGolferExists",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/check-golfer-exists"),method:"post",data:e})}}]),a}(s["a"])},9:function(e,t){},9836:function(e,t,a){},9911:function(e,t,a){"use strict";var i=a("23e7"),l=a("857a"),n=a("af03");i({target:"String",proto:!0,forced:n("link")},{link:function(e){return l(this,"a","href",e)}})},"99c3":function(e,t,a){"use strict";a("0abd")},"9a76":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=a("6c6e"),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"facility")}return Object(l["a"])(a,[{key:"listFacility",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/list"),method:"post",data:e})}},{key:"searchFacilityNew",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/search"),method:"post",data:e})}},{key:"Detail",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/detail"),method:"post",data:e})}}]),a}(s["a"])},a275:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=a("6c6e"),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"price-insurrance")}return Object(l["a"])(a,[{key:"lists",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/list-price-insurrance"),method:"get",params:e})}},{key:"listAllPackage",value:function(e){return Object(r["a"])({url:c+"/".concat(this.uri,"/list-price-insurrance-all"),method:"get",params:e})}}]),a}(s["a"])},ade3:function(e,t,a){"use strict";a("c29d")},ae12:function(e,t,a){"use strict";a("7511")},af03:function(e,t,a){"use strict";var i=a("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},c281:function(e,t,a){},c29d:function(e,t,a){},db96:function(e,t,a){"use strict";a("524b")},e0cb:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),s=(a("99af"),a("6c6e")),r=a("b775"),c="https://prod-wap-wghn-beta.vcallid.com",u=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.call(this,"search")}return Object(l["a"])(a,[{key:"searchFacility",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-facility"),method:"post",data:e})}},{key:"searchAdmin",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-admin"),method:"post",data:e})}},{key:"searchAgency",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-agency"),method:"post",data:e})}},{key:"getAllAgency",value:function(e){return Object(r["a"])({url:c+"/agency/search",method:"get",params:e})}},{key:"searchSupplier",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-supplier"),method:"post",data:e})}},{key:"searchBooking",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-code-booking"),method:"post",data:e})}},{key:"searchByBooking",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-booked-by-code-booking"),method:"post",data:e})}},{key:"searchUserByBooked",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-user-by-booked"),method:"post",data:e})}},{key:"searchGolfer",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/search-golfer"),method:"post",data:e})}},{key:"listSupplier",value:function(e){return Object(r["a"])({url:"".concat(c,"/").concat(this.uri,"/list-supplier"),method:"get",params:e})}}]),a}(s["a"])},e938:function(e,t){var a=[{value:1,label:"SHOP",type:"shop",commodity_codes:[{value:1,label:"CUP 1"},{value:2,label:"CUP 2"},{value:3,label:"CUP 3"},{value:4,label:"CUP 4"}]},{value:2,label:"HIO",type:"hio",commodity_codes:[{value:1,label:"Quà giải 1"},{value:2,label:"Quà giải 2"},{value:3,label:"Quà giải 3"},{value:4,label:"Quà giải 4"}]},{value:-1,label:"Sản phẩm khác",type:"other_service",commodity_codes:[{value:1,label:"MC 1"},{value:2,label:"MC 2"},{value:3,label:"MC 3"},{value:4,label:"MC 4"}]}],i=[{value:1,label:"Đơn thường"},{value:2,label:"Đơn Outing"}],l=[{value:9,label:"9 lỗ"},{value:18,label:"18 lỗ"},{value:27,label:"27 lỗ"}],n=[{value:0,label:"Không mua"},{value:1,label:"D20"},{value:2,label:"D100"},{value:3,label:"D200"}],o=[{value:0,label:"Non Member"},{value:1,label:"Member"},{value:2,label:"VIP"},{value:3,label:"Luxury"},{value:4,label:"Infinite"}],s=[{value:0,label:"Nam"},{value:1,label:"Nữ"}],r=[{value:1,label:"Dưới 18"},{value:2,label:"Từ 18 đến 50"},{value:3,label:"Trên 50"}],c=[{value:"ShopProductDetailView",label:"Sản phẩm chi tiết shop"},{value:"ShopVPhone",label:"Màn hình vSim"},{value:"InsuranceHome",label:"Màn hình bảo hiểm HIO"},{value:"BookingHomeView",label:"Màn hình Booking"},{value:"ShopHomeView",label:"Màn hình vShop"},{value:"Travel",label:"Màn hình vTravel"},{value:"PointRechagerView",label:"Màn hình nạp ví điểm thưởng"},{value:"VNewsHotnewsDetail",label:"Màn hình vNews chi tiết"},{value:"VNewsMP4PlayerView",label:"Màn hình vNews MP4"},{value:"VNewsShortVideoList",label:"Màn hình vNews Short Video"},{value:"VNewsLive",label:"Màn hình VNews Live"}],u=["ShopProductDetailView","VNewsHotnewsDetail","VNewsMP4PlayerView","VNewsShortVideoList","VNewsLive"],d=[{value:1,label:"Thẻ Infinite - Miễn Phí"},{value:2,label:"Thẻ World MC - Giảm Phí"},{value:3,label:"Thẻ World MC - Miễn Phí"},{value:4,label:"Thẻ VIP - Miễn Phí"},{value:5,label:"Thẻ Infinite FLC - Miễn phí"}],p={1:"Khách thường",3:"Khách member",4:"Khách inbound",5:"Khách memberguest",6:"Khách Lady",7:"Khách Junior",8:"Khách Senior",9:"Khách giá visitor"},h={VIETIN:5,NAB:4,SCB:6,BIDV:7};e.exports={typeAccounts:[{label:"Tất cả",value:-1},{label:"Non Member",value:0},{label:"Member",value:1},{label:"Member Vip",value:2},{label:"Member Luxury",value:3},{label:"Member Infinite",value:12}],AccountOptionForm:[{label:"Member",value:1},{label:"Member VIP",value:2},{label:"Member LUXURY",value:3}],HistoryUserOrderVgaOption:[{label:"Thanh toán mã",value:1},{label:"Thanh toán mã Sale",value:2},{label:"Thanh toán mã free",value:3}],typeMembership:[{label:"Trial Member",value:-2},{label:"Member Profesional",value:4},{label:"Member Junior",value:5},{label:"Member MGA",value:6},{label:"Member Reference",value:10},{label:"Member Senior",value:11}],listService:a,listOrderType:i,listTypeHole:l,listHIO:n,listMember:o,listGender:s,listAge:r,SCREEN_APP:c,TYPE_DETAIL_SCREEN:u,LIST_TYPE_CARD_SCB:d,CUSTOMER_TYPE:p,SOURCE_BANK:h}},f270:function(e,t,a){"use strict";a("c281")}}]);