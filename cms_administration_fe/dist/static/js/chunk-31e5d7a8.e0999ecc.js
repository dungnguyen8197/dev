(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31e5d7a8"],{"0538":function(t,e,n){"use strict";var a=n("e330"),i=n("59ed"),r=n("861d"),o=n("1a2d"),c=n("f36a"),s=n("40d5"),l=Function,u=a([].concat),d=a([].join),f={},g=function(t,e,n){if(!o(f,e)){for(var a=[],i=0;i<e;i++)a[i]="a["+i+"]";f[e]=l("C,a","return new C("+d(a,",")+")")}return f[e](t,n)};t.exports=s?l.bind:function(t){var e=i(this),n=e.prototype,a=c(arguments,1),o=function(){var n=u(a,c(arguments));return this instanceof o?g(e,n.length,n):e.apply(t,n)};return r(n)&&(o.prototype=n),o}},"0df4":function(t,e,n){"use strict";n("eac1")},1341:function(t,e,n){},"262e":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d9e2"),n("131a"),n("1f68");function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}},"2caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("4ae1"),n("d3b7"),n("f8c9"),n("131a"),n("3410"),n("1f68");function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n("d9e2");var r=n("53ca");function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if(e&&("object"===Object(r["a"])(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function s(t){var e=i();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}},"333d":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[e("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},i=[];n("a9e3");Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function c(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,n){var a=c(),i=t-a,s=20,l=0;e="undefined"===typeof e?500:e;var u=function t(){l+=s;var c=Math.easeInOutQuad(l,a,i,e);o(c),l<e?r(t):n&&"function"===typeof n&&n()};u()}var l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,15]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=l,d=(n("0df4"),n("2877")),f=Object(d["a"])(u,a,i,!1,null,"2f2d1216",null);e["a"]=f.exports},"4ae1":function(t,e,n){"use strict";var a=n("23e7"),i=n("d066"),r=n("2ba4"),o=n("0538"),c=n("5087"),s=n("825a"),l=n("861d"),u=n("7c73"),d=n("d039"),f=i("Reflect","construct"),g=Object.prototype,p=[].push,h=d((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),m=!d((function(){f((function(){}))})),b=h||m;a({target:"Reflect",stat:!0,forced:b,sham:b},{construct:function(t,e){c(t),s(e);var n=arguments.length<3?t:c(arguments[2]);if(m&&!h)return f(t,e,n);if(t===n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var a=[null];return r(p,a,e),new(r(o,t,a))}var i=n.prototype,d=u(l(i)?i:g),b=r(t,d,e);return l(b)?b:d}})},"6c6e":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n("d4ec"),i=n("bee2"),r=n("b775"),o=function(){function t(e){Object(a["a"])(this,t),this.uri=e}return Object(i["a"])(t,[{key:"list",value:function(t){return Object(r["a"])({url:"/"+this.uri,method:"get",params:t})}},{key:"get",value:function(t){return Object(r["a"])({url:"/"+this.uri+"/"+t,method:"get"})}},{key:"store",value:function(t){return Object(r["a"])({url:"/"+this.uri,method:"post",data:t})}},{key:"update",value:function(t,e){return Object(r["a"])({url:"/"+this.uri+"/"+t,method:"put",data:e})}},{key:"destroy",value:function(t){return Object(r["a"])({url:"/"+this.uri+"/"+t,method:"delete"})}}]),t}()},a27e:function(t,e,n){"use strict";var a=n("c7eb"),i=n("1da1"),r=(n("d3b7"),n("bc3a")),o=n.n(r),c=n("5c96"),s=n("4360"),l=n("5f87"),u="https://prod-wap-wghn-beta.vcallid.com",d=o.a.create({baseURL:u,headers:{Authorization:Object(l["f"])(),auththor:Object(l["d"])(),"X-Token":Object(l["d"])(),"Access-Control-Allow-Origin":"*"},timeout:18e4});d.interceptors.request.use((function(t){t.headers.Authorization=Object(l["f"])(),t.headers["X-Token"]=Object(l["d"])();var e="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaWF0IjoxNjc4MzMzNDY4fQ.d5WWQAGWF_TCPkvWa0ieclauQAlLierkNKGDCDfbDk5Cd-X98bLV7usneU2jXEu_cqjbJFerDRCky255aLElQLpxHmn_66tcgbTZqa5GRumTDqO4JOmgWd5vE0zRPx3xdfFPG0fILPEAA2_5bIGc4Mzd_FHMr9hqTKOn4TKxgBsCW0z9KNfO-2xevEP_gFi7xauUkdG5KUbG3UAr4sEr1s9Kfhz7H5F_lyIR99TfqV-45E4x4Av0tao2nxt5Nc16z201zjpd9OaHibpIGI1pcCkwORYQpH5pqoanO9alsYkNwyEPZbMCfenY95pD16GTswQwNlCGVmGHnSkkXF1SkBV4_rWt-J6fX1VGjq61nqr6yGm_JXvK3R_DMUN5GIZ_xC4BE6WOZQcF1SseMJalbBJKdFlRz0DpW4rsblr5Ge7KVI4ugPQFRV5PaEL6y_wx65-K8DyFYWwbFVG_YZJqzt7mVgSVZftx1yTaSYoUoAeD8FJ-zVPupv93ZM3y7Q3ybwvwZBj6KI-R9VuXlsLFWAqt7bWcUMXExhDeENGWMbgwF3YdJzG947_KzSkRsEsXK7ZOUKp7ihE3wLxQIueIyITQfmgvuG-AvtDqiffFfjbTP5e8DOLvloP2keIS1v252nZyr3i9pEBqm10KEmCx0krhQHjz5sdJStIenVtKospeB8tBjSbyCW5t0-RRo8vQOg40Jn-ySKnnBGW_jYMTy3hadbAxAQc4IprphQmvuFuVaO4YK4wNB_dEtbzAYSLpfm9vTk9eX0f95tleguH6QjEG8siA4znsMUf2SLdQNKcTniOEHp5hGcKV0gRX63zIC7X9dClOINwg3wYh6ecyXg";return t.headers.token=e,s["a"].getters.token,t}),(function(t){return Promise.reject(t)})),d.interceptors.response.use(function(){var t=Object(i["a"])(Object(a["a"])().mark((function t(e){var n,i,r,s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.data,0===n.error_code){t.next=26;break}if(console.log(n.error_code),403!==n.error_code){t.next=6;break}return c["Message"].error(n.error_msg||"Có lỗi xảy ra vui lòng thử lại sau"),t.abrupt("return");case 6:if(498!==n.error_code){t.next=9;break}return f(),t.abrupt("return");case 9:if(401!==n.error_code){t.next=23;break}return i=Object(l["d"])(),t.next=13,d.post("/admin/token",{refresh_token:i});case 13:if(r=t.sent,0!==r.error_code){t.next=22;break}return s=e.config,s._retry=!0,o.a.defaults.headers.common["Authorization"]="Bearer "+r.data.token,Object(l["q"])(r.data.token),t.abrupt("return",d(s));case 22:f();case 23:return t.abrupt("return",n);case 26:return t.abrupt("return",n);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return c["Message"].error(t.message||"Có lỗi xảy ra vui lòng thử lại sau"),Promise.reject(t)}));var f=function(){c["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){return s["a"].dispatch("user/resetToken").then((function(){return location.reload()}))}))};e["a"]=d},a535:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"tag-page"}},[e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("p",{staticStyle:{"margin-right":"15px","margin-bottom":"0px"},on:{click:t.onBack}},[e("i",{staticClass:"el-icon-back"})]),e("h3",{staticStyle:{margin:"0px"}},[t._v("Quản lý tag")])]),e("div",[t.is_write?e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleAddTag}},[t._v("Thêm mới")]):t._e(),e("el-button",{attrs:{icon:"el-icon-refresh",loading:t.loading},on:{click:t.resetFilter}},[t._v("Làm mới")])],1)]),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px","flex-wrap":"wrap"}},[e("div",{staticStyle:{display:"flex","flex-direction":"row","margin-right":"10px"}},[e("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{type:"text",rows:1,placeholder:"Nhập tên tag",maxlength:"50"},model:{value:t.searchTagName,callback:function(e){t.searchTagName=e},expression:"searchTagName"}},[e("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:t.resetPage},slot:"suffix"})]),e("el-select",{staticStyle:{width:"180px"},attrs:{filterable:""},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.resetPage}},[t._v("Tìm kiếm")])],1),e("div",{staticClass:"select-tag"},[e("el-select",{staticStyle:{width:"180px"},attrs:{filterable:"",placeholder:"Chọn hạng mục"},on:{change:function(e){return t.resetPage()}},model:{value:t.filterCategory,callback:function(e){t.filterCategory=e},expression:"filterCategory"}},t._l(t.categoryOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("div",{staticClass:"select-tag"},[e("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"Trạng thái"},on:{change:function(e){return t.resetPage()}},model:{value:t.filterState,callback:function(e){t.filterState=e},expression:"filterState"}},t._l(t.stateOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),e("div",{staticStyle:{"margin-top":"20px"},attrs:{id:"brand-table-id"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,align:"center",border:""}},[e("el-table-column",{attrs:{prop:"code",label:"Mã tag",width:"180",align:"center"}}),e("el-table-column",{attrs:{prop:"name",label:"Tên tag",align:"center"}}),e("el-table-column",{attrs:{prop:"category_name",label:"Hạng mục",align:"center"}}),e("el-table-column",{attrs:{prop:"state",label:"Trạng thái",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-tag",{attrs:{type:1===n.row.active?"success":"danger"}},[t._v(t._s(n.row.state))])]}}])}),e("el-table-column",{attrs:{prop:"action",label:"Hành động",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[t.is_edit?e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.handleEdit(n.row)}}}):t._e()]}}])})],1),e("el-row",[e("pagination",{attrs:{total:t.total,limit:t.listQuery.limit,page:t.listQuery.page},on:{"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},"update:page":function(e){return t.$set(t.listQuery,"page",e)},pagination:t.getListTag}})],1),t.showDialogAddTag?e("DialogAddTag",{attrs:{"show-dialog":t.showDialogAddTag}}):t._e(),t.showDialogEditTag?e("DialogEditTag",{attrs:{"show-dialog":t.showDialogEditTag,"object-data":t.objectRow}}):t._e()],1)])},i=[],r=n("2909"),o=(n("ac1f"),n("5319"),n("e9c4"),n("498a"),n("d3b7"),n("159b"),n("99af"),n("d4ec")),c=n("bee2"),s=n("262e"),l=n("2caf"),u=n("6c6e"),d=n("a27e"),f="https://shop.vcallid.com/api/public",g=function(t){Object(s["a"])(n,t);var e=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),e.call(this,"")}return Object(c["a"])(n,[{key:"listCategory",value:function(){return Object(d["a"])({url:f+"/category/list_option",method:"get"})}},{key:"listTag",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:10};return Object(d["a"])({url:f+"/tags/list_for_cms",method:"get",params:t})}},{key:"createTag",value:function(t){return Object(d["a"])({url:f+"/tags/create",method:"post",data:t})}},{key:"updateTag",value:function(t){return Object(d["a"])({url:f+"/tags/update",method:"post",data:t})}},{key:"activeTag",value:function(t){return Object(d["a"])({url:f+"/tags/change_active",method:"post",data:t})}}]),n}(u["a"]),p=n("333d"),h=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.dialog.titleName,visible:t.showDialog,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showDialog=e}}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{rules:t.rules,model:t.formRequest}},[e("el-form-item",[e("label",[t._v(t._s("Tên tag")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-form-item",{attrs:{prop:"name"}},[e("el-input",{attrs:{required:"",prop:"name",placeholder:"Nhập tên tag"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmitForm("ruleForm")}},model:{value:t.formRequest.name,callback:function(e){t.$set(t.formRequest,"name",e)},expression:"formRequest.name"}})],1)],1),e("el-form-item",[e("label",[t._v(t._s("Hạng mục")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-form-item",{attrs:{prop:"category"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Chọn hạng mục"},model:{value:t.formRequest.category_id,callback:function(e){t.$set(t.formRequest,"category_id",e)},expression:"formRequest.category_id"}},t._l(t.categoryOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("el-form-item",{attrs:{label:"Trạng thái"}},[e("el-form-item",{attrs:{prop:"active"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},model:{value:t.formRequest.active,callback:function(e){t.$set(t.formRequest,"active",e)},expression:"formRequest.active"}})],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleClose}},[t._v("Hủy")]),e("el-button",{attrs:{type:"primary",loading:t.loadingSubmit},on:{click:function(e){return t.onSubmitForm("ruleForm")}}},[t._v(t._s(t.dialog.buttonName))])],1)],1)},m=[],b=n("c7eb"),y=n("1da1"),v=n("61f7"),w=new g,_={name:"DialogAddTag",props:{showDialog:{type:Boolean,default:!1}},data:function(){var t=this;return{rules:{name:[{validator:function(e,n,a){return Object(v["q"])(e,t.formRequest.name,a,"Tên tag")},trigger:"change"}],category:[{validator:function(e,n,a){return Object(v["p"])(e,t.formRequest.category_id,a,"Hạng mục")},trigger:"change"}]},dialog:{titleName:"Tạo mới tag",buttonName:"Tạo mới"},dialogLoading:!1,loadingSubmit:!1,formRequest:{},filterCategory:"",categoryOption:[]}},mounted:function(){this.getListCategory()},methods:{onSubmitForm:function(t){var e=this;return Object(y["a"])(Object(b["a"])().mark((function n(){return Object(b["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$refs[t].validate(function(){var t=Object(y["a"])(Object(b["a"])().mark((function t(n){return Object(b["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&e.createNewTag();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},getListCategory:function(){var t=this;w.listCategory().then((function(e){console.log(e.data),t.categoryOption=e.data}))},handleClose:function(){this.showDialog=!1,this.$parent.$emit("hide-add-tag-dialog")},createNewTag:function(){var t=this;this.dialogLoading=!0,w.createTag(this.formRequest).then((function(e){t.dialogLoading=!1,t.$message.success("Tạo mới tag thành công"),t.showDialog=!1,t.$parent.$emit("hide-add-tag-dialog"),t.$parent.$emit("refresh-list-tag")})).catch((function(e){console.log(e),t.$message.error("Thêm mới tag thất bại")})).finally((function(){t.dialogLoading=!1}))}}},T=_,O=n("2877"),k=Object(O["a"])(T,h,m,!1,null,null,null),j=k.exports,x=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.dialog.titleName,visible:t.showDialog,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showDialog=e}}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{rules:t.rules,model:t.formRequest}},[e("el-form-item",[e("label",[t._v(t._s("Tên tag")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-form-item",{attrs:{prop:"name"}},[e("el-input",{attrs:{prop:"name",placeholder:"Nhập tên tag"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmitForm("ruleForm")}},model:{value:t.formRequest.name,callback:function(e){t.$set(t.formRequest,"name",e)},expression:"formRequest.name"}})],1)],1),e("el-form-item",[e("label",[t._v(t._s("Hạng mục")),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("el-form-item",{attrs:{prop:"category"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Chọn hạng mục"},model:{value:t.formRequest.category_id,callback:function(e){t.$set(t.formRequest,"category_id",e)},expression:"formRequest.category_id"}},t._l(t.categoryOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("el-form-item",{attrs:{label:"Trạng thái"}},[e("el-form-item",{attrs:{prop:"active"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},model:{value:t.formRequest.active,callback:function(e){t.$set(t.formRequest,"active",e)},expression:"formRequest.active"}})],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelConfirm}},[t._v("Hủy")]),e("el-button",{attrs:{type:"primary",loading:t.loadingSubmit},on:{click:function(e){return t.onSubmitForm("ruleForm")}}},[t._v(t._s(t.dialog.buttonName))])],1)],1)},C=[],S=n("5530"),D=new g,R={name:"DialogEditTag",props:{showDialog:{type:Boolean,default:!1},objectData:{type:Object,default:function(){return{}}}},data:function(){var t=this;return{rules:{name:[{validator:function(e,n,a){return Object(v["q"])(e,t.formRequest.name,a,"Tên tag")},trigger:"change"}],category:[{validator:function(e,n,a){return Object(v["p"])(e,t.formRequest.category_id,a,"Hạng mục")},trigger:"change"}]},dialog:{titleName:"Cập nhật tag",buttonName:"Cập nhật"},dialogLoading:!1,loadingSubmit:!1,formRequest:{},filterCategory:"",categoryOption:[]}},mounted:function(){this.formRequest=Object(S["a"])({},this.objectData),this.getListCategory()},methods:{onSubmitForm:function(t){var e=this;return Object(y["a"])(Object(b["a"])().mark((function n(){return Object(b["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$refs[t].validate(function(){var t=Object(y["a"])(Object(b["a"])().mark((function t(n){return Object(b["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&e.editConfirm();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},getListCategory:function(){var t=this;D.listCategory().then((function(e){console.log(e.data),t.categoryOption=e.data}))},handleClose:function(){this.showDialog=!1,this.$parent.$emit("hide-edit-tag-dialog")},editTag:function(){var t=this;this.dialogLoading=!0,D.activeTag(this.formRequest).then((function(e){D.updateTag(t.formRequest).then((function(e){t.dialogLoading=!1,t.$message.success("Cập nhật tag thành công"),t.showDialog=!1,t.$parent.$emit("hide-edit-tag-dialog"),t.$parent.$emit("refresh-list-tag"),t.dialogLoading=!1})).catch((function(e){console.log(e),t.$message.error("Cập nhật tag thất bại"),t.dialogLoading=!1}))})).catch((function(e){console.log(e),t.$message.error("Cập nhật tag thất bại"),t.dialogLoading=!1}))},cancelConfirm:function(){var t=this;this.$confirm("Các chỉnh sửa sẽ không được lưu. Bạn có chắc chắn muốn tiếp tục ?","Xác nhận hủy chỉnh sửa?",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy",type:"warning"}).then((function(){t.handleClose()})).catch((function(){console.log("cancel")}))},editConfirm:function(){var t=this;this.$confirm("Các thông tin sẽ được cập nhật. Bạn có chắc chắn muốn lưu các thay đổi ?","Xác nhận thay đổi thông tin?",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy",type:"warning"}).then((function(){t.editTag()})).catch((function(){console.log("cancel")}))}}},q=R,N=Object(O["a"])(q,x,C,!1,null,null,null),L=N.exports,$=n("fa7d"),E=n("5f87"),F=new g,P={name:"TagPage",components:{Pagination:p["a"],DialogAddTag:j,DialogEditTag:L},data:function(){return{is_delete:0,is_view:0,is_edit:0,is_export:0,is_write:0,loading:!1,tableData:[],total:0,listQuery:{page:1,limit:10},objectRow:{},showDialog:!1,filterCategory:0,categoryOption:[{id:0,name:"Hạng mục(Tất cả)"}],filterState:0,stateOption:[{id:0,name:"Trạng thái(Tất cả)"},{id:2,name:"Hoạt động"},{id:1,name:"Tạm dừng"}],searchTagName:"",showDialogAddTag:!1,showDialogEditTag:!1,searchType:0,searchOption:[{id:0,name:"Tìm theo tên"},{id:1,name:"Tìm theo mã"}]}},created:function(){var t=this;console.log(this.$router.current),this.$on("hide-add-tag-dialog",(function(){t.showDialogAddTag=!1})),this.$on("hide-edit-tag-dialog",(function(){t.showDialogEditTag=!1})),this.$on("refresh-list-tag",(function(){t.getListTag()}))},mounted:function(){this.getListCategory(),this.requestListPermissionMenu()},beforeDestroy:function(){this.$off("hide-add-tag-dialog"),this.$off("hide-edit-tag-dialog"),this.$off("refresh-list-tag")},methods:{onBack:function(){window.history.back()},requestListPermissionMenu:function(){var t=this,e=this.$router.history.current.meta.roles,n=e&&e.length?e[0]:0;n=parseInt(n.replace("NCC",""));var a=Object(E["a"])(),i=a.email;Object($["a"])(i,n,(function(e){if(console.log("............list data 1",JSON.stringify(e)),e){var n=e.is_supper_admin,a=e.is_add,i=e.is_view,r=e.is_edit,o=e.is_delete,c=e.is_export;n=parseInt(n)||0,a=parseInt(a)||1,i=parseInt(i)||1,r=parseInt(r)||1,o=parseInt(o)||1,c=parseInt(c)||1,t.is_delete=n?1:o-1,t.is_write=n?1:a-1,t.is_edit=n?1:r-1,t.is_export=n?1:c-1,t.is_view=n?1:i-1,t.getListTag()}}))},getListTag:function(){var t=this;this.is_view&&(this.loading=!0,this.filterCategory&&(this.listQuery.category_id=this.filterCategory),this.listQuery.active=this.filterState?this.filterState:0,this.searchTagName&&(this.listQuery.q=this.searchTagName.trim()),this.listQuery.searchType=this.searchType,F.listTag(this.listQuery).then((function(e){1===t.listQuery.page&&(t.total=e.total),t.loading=!1,t.tableData=e.data,t.tableData.forEach((function(t){t.state=t.active?"Hoạt động":"Tạm dừng",t.code="TAG"+t.id}))})))},getListCategory:function(){var t=this;F.listCategory().then((function(e){var n=e.error,a=e.data;0===n&&(t.categoryOption=[{id:0,name:"Hạng mục(Tất cả)"}].concat(Object(r["a"])(a)))}))},resetFilter:function(){this.filterCategory=0,this.filterState=0,this.searchTagName="",this.listQuery={page:1,limit:10},this.getListTag()},resetPage:function(){this.listQuery.page=1,this.getListTag()},handleAddTag:function(){this.showDialogAddTag=!0},handleEdit:function(t){this.showDialogEditTag=!0,this.objectRow=t}}},z=P,A=(n("fd2d"),Object(O["a"])(z,a,i,!1,null,"4abaa890",null));e["default"]=A.exports},bee2:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("a38e");function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Object(a["a"])(i.key),i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},d4ec:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d9e2");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},eac1:function(t,e,n){},f8c9:function(t,e,n){"use strict";var a=n("23e7"),i=n("da84"),r=n("d44e");a({global:!0},{Reflect:{}}),r(i.Reflect,"Reflect",!0)},fa7d:function(t,e,n){"use strict";n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"a",(function(){return u}));n("99af");var a=n("a27e");function i(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-1);var e=new Date;return e.setHours(23),e.setMinutes(59),e.setSeconds(50),e.setDate(e.getDate()-1),[t.getTime(),e.getTime()]}function r(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=Date.now();return[t.getTime(),e]}function o(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(1);var e=Date.now();return[t.getTime(),e]}function c(){var t=i(),e=new Date(t[0]);e.setDate(e.getDate()-7);var n=new Date(t[1]);return n.setDate(n.getDate()-7),[e.getTime(),n.getTime()]}function s(){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setDate(t.getDate()-7);var e=Date.now();return[t.getTime(),e]}function l(t){return!isNaN(new Date(t))}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{Object(a["a"])({url:"https://shop.vcallid.com/api/public/supplier/get_permisson_menu?email=".concat(t,"&menu_id=").concat(e),method:"get"}).then((function(t){var e=t.error,a=t.data;0===e&&n&&n(a)})).catch((function(t){i&&i(t)}))}catch(r){}}},fd2d:function(t,e,n){"use strict";n("1341")}}]);