(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-536e3b72"],{"133f":function(e,t,a){},"6e9c":function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b0c0");var n=function(){var e=this,t=e._self._c;return t("el-row",{staticStyle:{margin:"20px"}},[t("el-row",[t("el-col",{attrs:{sm:18}},[t("h3",{staticStyle:{margin:"0",width:"100%",padding:"10px"}},[e._v("Lịch sử Log")])])],1),t("div",{staticClass:"clearfix-20"}),t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",{staticClass:"mr-10",attrs:{sm:4}},[t("el-input",{attrs:{clearable:"",placeholder:"Mã booking"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.query.code_booking,callback:function(t){e.$set(e.query,"code_booking",t)},expression:"query.code_booking"}})],1),t("el-col",{staticClass:"mr-10",attrs:{sm:4}},[t("el-input",{attrs:{clearable:"",placeholder:"Mô tả"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.query.description,callback:function(t){e.$set(e.query,"description",t)},expression:"query.description"}})],1),t("el-col",{staticClass:"search-money mr-10",attrs:{sm:6,md:3}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"Nhập tên sale","remote-method":e.onSearchAdmin,loading:e.loadingSearchAdmin},model:{value:e.query.admin_id,callback:function(t){e.$set(e.query,"admin_id",t)},expression:"query.admin_id"}},e._l(e.admins,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),t("el-col",{staticClass:"mr-10",attrs:{sm:6}},[t("el-date-picker",{staticClass:"w-100",attrs:{format:"dd-MM-yyyy HH:mm:ss",type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("el-col",{staticClass:"mr-10",attrs:{sm:6}},[t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",round:""},on:{click:e.onReset}},[e._v("Reset")]),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" Tìm kiếm ")])],1)],1)],1),t("div",{staticClass:"clearfix-10"}),t("el-row",{staticStyle:{"margin-top":"40px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:"STT",width:"100",align:"center",type:"index",index:e.handleIndexMethod}}),t("el-table-column",{attrs:{prop:"code_booking",label:"Mã booking",align:"center"}}),t("el-table-column",{attrs:{prop:"pax_id",label:"Pax_id",align:"center"}}),t("el-table-column",{attrs:{prop:"description",label:"Mô tả",align:"center"}}),t("el-table-column",{attrs:{label:"VID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[null!==n.booked?t("el-button",{attrs:{type:"primary",plain:""}},[e._v(" VID"+e._s(n.booked.user_id)+" ")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"Người xử lý",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n,i=a.row;return[t("el-button",{attrs:{type:"primary",plain:""}},[e._v(" "+e._s((null===i||void 0===i||null===(n=i.admin)||void 0===n?void 0:n.name)||"")+" ")])]}}])}),t("el-table-column",{attrs:{label:"Thời gian",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.created_at?t("span",[e._v(e._s(n.created_at))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"Hành động",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"info",icon:"el-icon-view",circle:""},on:{click:function(t){return e.onShowDialogDetail(a.row)}}})]}}])})],1),t("el-row",{staticClass:"list-device__footer"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>e.query.limit,expression:"total > query.limit"}],attrs:{total:e.total,limit:e.query.limit,page:e.query.page},on:{"update:limit":function(t){return e.$set(e.query,"limit",t)},"update:page":function(t){return e.$set(e.query,"page",t)},pagination:e.onGetList}}),t("dialog-history-log",{attrs:{"show-dialog":e.onShowDialog,"object-data":e.objectDetail},on:{onClickButtonDialog:e.handleClickButtonDialog}})],1)],1)],1)},i=[],l=a("5530"),o=(a("d3b7"),a("498a"),a("333d")),r=a("bcc2"),s=a("0419"),c=a("e0cb"),d=a("c1df"),u=a.n(d),m=a("322c"),p=new s["a"],g=new c["a"],h={name:"LogHistory",components:{DialogHistoryLog:m["a"],Pagination:o["a"]},data:function(){return{loadingTable:!1,tableData:[],adminData:[],loadingSearchAdmin:!1,onShowDialog:!1,objectDetail:{},query:{limit:10,page:1},total:0,admins:[],dateRange:[]}},computed:{},watch:{dateRange:function(e){e&&(this.query.dateStart=u()(e[0]).format("YYYY-MM-DD HH:mm:ss"),this.query.dateEnd=u()(e[1]).format("YYYY-MM-DD HH:mm:ss"))}},created:function(){this.onGetList()},methods:{convertDateTimeSecond:r["c"],onGetList:function(){var e=this;this.loadingTable=!0,p.listHistoryLog(this.query).then((function(t){if(0===t.error_code){var a=t.data;console.log("saaaaaaa",a),e.tableData=a.data,e.total=a.total.length}else e.$message.error("Lỗi hệ thống, vui lòng liên hệ bộ phận kỹ thuật")})).finally((function(){e.loadingTable=!1}))},handleFilter:function(){this.query.page=1,this.loadingTable=!0,this.onGetList()},handleIndexMethod:function(e){return 1===this.query.page?this.query.page+e:(this.query.page-1)*this.query.limit+e+1},onSearchAdmin:function(e){var t=this;this.loadingSearchAdmin=!0,g.searchAdmin({keyword_admin:e.trim()}).then((function(e){t.loadingSearchAdmin=!1;var a=e.error_code,n=e.data;0===a&&(t.admins=n)}))},onReset:function(){this.query=Object.assign({},{limit:10,page:1}),this.onGetList()},onShowDialogDetail:function(e){this.objectDetail=Object(l["a"])({},e),this.onShowDialog=!0},handleClickButtonDialog:function(e){this.onShowDialog=e},formatDate:r["j"]}},y=h,b=(a("74de"),a("2877")),f=Object(b["a"])(y,n,i,!1,null,"9cb5b42e",null);t["default"]=f.exports},"74de":function(e,t,a){"use strict";a("133f")}}]);