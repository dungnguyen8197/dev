(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbc5e316"],{"063f":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("caad"),a("2532");var i=function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"app-container list-account"},[e("el-row",{staticClass:"list-account__header mb-10"},[e("el-col",{staticStyle:{display:"flex"},attrs:{sm:24}},[e("h3",{staticStyle:{margin:"0",width:"80%"}},[t._v("Danh sách quảng cáo Popup")]),e("div",{staticStyle:{width:"20%"}},[e("el-button",{staticStyle:{float:"right","padding-top":"11px"},attrs:{type:"primary"},on:{click:t.handleCreateAdv}},[t._v("Thêm quảng cáo + ")])],1)])],1),e("div",{staticClass:"filter-container",staticStyle:{float:"right"}},[e("el-input",{staticClass:"filter-item mr-10",staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"Tìm kiếm theo tên"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter.apply(null,arguments)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),e("el-select",{staticClass:"filter-item mr-10",staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"Trạng thái"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter.apply(null,arguments)}},model:{value:t.listQuery.is_displayed,callback:function(e){t.$set(t.listQuery,"is_displayed",e)},expression:"listQuery.is_displayed"}},t._l(t.statusOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-date-picker",{staticClass:"filter-item mr-10",staticStyle:{width:"180px"},attrs:{type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd",placeholder:"Chọn ngày bắt đầu"},model:{value:t.listQuery.startDate,callback:function(e){t.$set(t.listQuery,"startDate",e)},expression:"listQuery.startDate"}}),e("el-date-picker",{staticClass:"filter-item mr-10",staticStyle:{width:"185px"},attrs:{type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd",placeholder:"Chọn ngày kết thúc"},model:{value:t.listQuery.endDate,callback:function(e){t.$set(t.listQuery,"endDate",e)},expression:"listQuery.endDate"}}),e("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" Tìm kiếm ")]),e("el-button",{staticClass:"filter-item",staticStyle:{"background-color":"#fff",color:"#000",border:"1px solid rgb(151 149 149)"},attrs:{type:"primary",icon:"el-icon-refresh",loading:t.loadingTable},on:{click:t.refreshPopUP}},[t._v(" Làm mới ")])],1),e("div",{staticClass:"data-table p-10"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{label:"Id",width:"70",align:"center",type:"index",index:t.handleIndexMethod},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(i.id))])]}}])}),e("el-table-column",{attrs:{label:"Tiêu đề",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(i.title))])]}}])}),e("el-table-column",{attrs:{label:"Thời gian",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("div",[t._v(t._s(t.convertToDateTimeString(i.start_time)))]),e("div",[t._v(t._s(t.convertToDateTimeString(i.expiried_time)))])]}}])}),e("el-table-column",{attrs:{label:"Màn hình điều hướng",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i,n=a.row;return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(null===(i=n.target)||void 0===i?void 0:i.name))])]}}])}),e("el-table-column",{attrs:{label:"Admin",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i,n=a.row;return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(null===(i=n.admin)||void 0===i?void 0:i.name))])]}}])}),e("el-table-column",{attrs:{label:"Hiển thị",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},on:{change:function(e){return t.change(i)}},model:{value:i.is_displayed,callback:function(e){t.$set(i,"is_displayed",e)},expression:"row.is_displayed"}})]}}])}),e("el-table-column",{attrs:{label:"Hình ảnh",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("img",{attrs:{src:i.banner_url.includes("http")?i.banner_url:t.baseUrlImg+"/"+i.banner_url,alt:"",width:"100%"}})]}}])}),e("el-table-column",{attrs:{label:"Hành động",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.handleEdit(i)}}}),e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.handleDelete(i)}}},[t._v("Delete")])]}}])})],1),e("el-row",[e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>t.listQuery.number,expression:"total > listQuery.number"}],attrs:{total:t.total,limit:t.listQuery.number,page:t.listQuery.page},on:{"update:limit":function(e){return t.$set(t.listQuery,"number",e)},"update:page":function(e){return t.$set(t.listQuery,"page",e)},pagination:t.getList}})],1)],1),e("dialog-adv",{attrs:{"is-popup":!0,"is-score-card":!1,"is-add":t.isAdd,"show-dialog":t.dialogFormVisible,"object-data":t.objectAdv},on:{onClickButtonDialog:t.handleClickButtonDialog}})],1)},n=[],l=a("c7eb"),s=a("1da1"),r=(a("d3b7"),a("1c55")),o=a("8f81"),c=a("5408"),d=a("bcc2"),u=a("333d"),p=[{value:1,label:"Hiển thị"},{value:0,label:"Ẩn"}],h=new o["a"],y={name:"Home",components:{Pagination:u["a"],DialogAdv:r["a"]},data:function(){return{loadingTable:!1,dialogFormVisible:!1,form:{name:"",region:""},isAdd:!0,objectAdv:{},typeAdv:c["p"],screenApp:c["j"],tableData:[],baseUrlImg:"https://prod-wap-wghn-beta.vcallid.com",searchValue:"",total:0,listQuery:{page:1,number:10},statusOptions:p}},created:function(){this.getList()},methods:{handleClickButtonDialog:function(t,e){console.log("isAdd",t),console.log("objectAdv",e),this.isAdd=!0,this.objectAdv={},this.dialogFormVisible=!1,this.getList()},handleCreateAdv:function(){this.isAdd=!0,this.objectAdv={},this.dialogFormVisible=!0},getList:function(){var t=this;this.loadingTable=!0,h.listAdv(this.listQuery).then((function(e){t.tableData=e.data.rows,t.total=e.data.count})).finally((function(){t.loadingTable=!1}))},search:function(){var t=this;h.listAdv({title:this.searchValue}).then((function(e){t.tableData=e.data}))},convertToDateTimeString:d["i"],handleEdit:function(t){console.log("row",t),this.isAdd=!1,this.objectAdv=t,this.dialogFormVisible=!0},handleDelete:function(t){var e=this;this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){h.destroyAdv({id:t.id}).then((function(t){e.$message({type:"success",message:"Xóa thành công!"}),e.getList()}))})).catch((function(){}))},refreshPopUP:function(){var t=this;return Object(s["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listQuery={name:"",is_displayed:null,startDate:null,endDate:null},e.next=3,t.getList();case 3:case"end":return e.stop()}}),e)})))()},change:function(t){var e=this;console.log("row",t),h.activeAdv({id:t.id,is_displayed:t.is_displayed}).then((function(a){console.log("res",a),0===a.error_code?e.$message({type:"success",message:"Cập nhật thành công!"}):(e.$message({type:"error",message:"Cập nhật thất bại!"}),t.is_displayed=!t.is_displayed)})).catch((function(e){console.log("err",e),t.is_displayed=!t.is_displayed}))},handleIndexMethod:function(t){return 1===this.listQuery.page?this.listQuery.page+t:10*this.listQuery.page+t},handleFilter:function(){this.listQuery.page=1,this.getList()}}},f=y,m=(a("ef73"),a("2877")),g=Object(m["a"])(f,i,n,!1,null,null,null);e["default"]=g.exports},df00:function(t,e,a){},ef73:function(t,e,a){"use strict";a("df00")}}]);